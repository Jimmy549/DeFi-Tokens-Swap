(()=>{var a={};a.id=974,a.ids=[974],a.modules={236:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,4160,23)),Promise.resolve().then(c.t.bind(c,1603,23)),Promise.resolve().then(c.t.bind(c,8495,23)),Promise.resolve().then(c.t.bind(c,5170,23)),Promise.resolve().then(c.t.bind(c,7526,23)),Promise.resolve().then(c.t.bind(c,8922,23)),Promise.resolve().then(c.t.bind(c,9234,23)),Promise.resolve().then(c.t.bind(c,2263,23)),Promise.resolve().then(c.bind(c,2146))},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},2704:()=>{},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3388:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1170,23)),Promise.resolve().then(c.t.bind(c,3597,23)),Promise.resolve().then(c.t.bind(c,6893,23)),Promise.resolve().then(c.t.bind(c,9748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,9576,23)),Promise.resolve().then(c.t.bind(c,3041,23)),Promise.resolve().then(c.t.bind(c,1384,23))},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6519:(a,b,c)=>{Promise.resolve().then(c.bind(c,8695))},6542:()=>{},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},6953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,metadata:()=>e});var d=c(5338);c(2704);let e={title:"SimpleSwap DEX | DeFi Learning Lab",description:"Decentralized token exchange built with Solidity AMM â€” DeFi learning project"};function f({children:a}){return(0,d.jsx)("html",{lang:"en",className:"dark",children:(0,d.jsx)("body",{children:a})})}},7742:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(7954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"d:\\\\Netixsol Intern-Projects\\\\Week-12\\\\Day3-4\\\\defi-nextjs\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"d:\\Netixsol Intern-Projects\\Week-12\\Day3-4\\defi-nextjs\\app\\page.tsx","default")},8354:a=>{"use strict";a.exports=require("util")},8695:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>fX});var d={};c.r(d),c.d(d,{OG:()=>dY,My:()=>dP,Ph:()=>dS,lX:()=>dT,Id:()=>dX,fg:()=>d_,qj:()=>dW,aT:()=>dR,lq:()=>dU,z:()=>dV,Q5:()=>d1});var e=c(1124),f=c(8301);async function g(a){let b=Object.keys(a);return(await Promise.all(b.map(b=>Promise.resolve(a[b])))).reduce((a,c,d)=>(a[b[d]]=c,a),{})}function h(a,b,c){for(let d in b){let e=b[d],f=c?c[d]:null;f&&function(a,b,c){let d=b.split("|").map(a=>a.trim());for(let c=0;c<d.length;c++)switch(b){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof a===b)return}let e=Error(`invalid value for type ${b}`);throw e.code="INVALID_ARGUMENT",e.argument=`value.${c}`,e.value=a,e}(e,f,d),Object.defineProperty(a,d,{enumerable:!0,value:e,writable:!1})}}function i(a,b){if(null==a)return"null";if(null==b&&(b=new Set),"object"==typeof a){if(b.has(a))return"[Circular]";b.add(a)}if(Array.isArray(a))return"[ "+a.map(a=>i(a,b)).join(", ")+" ]";if(a instanceof Uint8Array){let b="0123456789abcdef",c="0x";for(let d=0;d<a.length;d++)c+=b[a[d]>>4],c+=b[15&a[d]];return c}if("object"==typeof a&&"function"==typeof a.toJSON)return i(a.toJSON(),b);switch(typeof a){case"boolean":case"number":case"symbol":return a.toString();case"bigint":return BigInt(a).toString();case"string":return JSON.stringify(a);case"object":{let c=Object.keys(a);return c.sort(),"{ "+c.map(c=>`${i(c,b)}: ${i(a[c],b)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function j(a,b){return a&&a.code===b}function k(a){return j(a,"CALL_EXCEPTION")}function l(a,b,c){let d,e=a;{let d=[];if(c){if("message"in c||"code"in c||"name"in c)throw Error(`value will overwrite populated values: ${i(c)}`);for(let a in c){if("shortMessage"===a)continue;let b=c[a];d.push(a+"="+i(b))}}d.push(`code=${b}`),d.push("version=6.16.0"),d.length&&(a+=" ("+d.join(", ")+")")}switch(b){case"INVALID_ARGUMENT":d=TypeError(a);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":d=RangeError(a);break;default:d=Error(a)}return h(d,{code:b}),c&&Object.assign(d,c),null==d.shortMessage&&h(d,{shortMessage:e}),d}function m(a,b,c,d){if(!a)throw l(b,c,d)}function n(a,b,c,d){m(a,b,"INVALID_ARGUMENT",{argument:c,value:d})}function o(a,b,c){null==c&&(c=""),c&&(c=": "+c),m(a>=b,"missing argument"+c,"MISSING_ARGUMENT",{count:a,expectedCount:b}),m(a<=b,"too many arguments"+c,"UNEXPECTED_ARGUMENT",{count:a,expectedCount:b})}let p=["NFD","NFC","NFKD","NFKC"].reduce((a,b)=>{try{if("test"!=="test".normalize(b))throw Error("bad");if("NFD"===b){let a=String.fromCharCode(233).normalize("NFD"),b=String.fromCharCode(101,769);if(a!==b)throw Error("broken")}a.push(b)}catch(a){}return a},[]);function q(a,b,c){if(null==c&&(c=""),a!==b){let a=c,b="new";c&&(a+=".",b+=" "+c),m(!1,`private constructor; use ${a}from* methods`,"UNSUPPORTED_OPERATION",{operation:b})}}function r(a,b,c){if(a instanceof Uint8Array)return c?new Uint8Array(a):a;if("string"==typeof a&&a.length%2==0&&a.match(/^0x[0-9a-f]*$/i)){let b=new Uint8Array((a.length-2)/2),c=2;for(let d=0;d<b.length;d++)b[d]=parseInt(a.substring(c,c+2),16),c+=2;return b}n(!1,"invalid BytesLike value",b||"value",a)}function s(a,b){return r(a,b,!1)}function t(a,b){return r(a,b,!0)}function u(a,b){return"string"==typeof a&&!!a.match(/^0x[0-9A-Fa-f]*$/)&&("number"!=typeof b||a.length===2+2*b)&&(!0!==b||a.length%2==0)}function v(a){return u(a,!0)||a instanceof Uint8Array}let w="0123456789abcdef";function x(a){let b=s(a),c="0x";for(let a=0;a<b.length;a++){let d=b[a];c+=w[(240&d)>>4]+w[15&d]}return c}function y(a){return"0x"+a.map(a=>x(a).substring(2)).join("")}function z(a){return u(a,!0)?(a.length-2)/2:s(a).length}function A(a,b,c){let d=s(a);return null!=c&&c>d.length&&m(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:d,length:d.length,offset:c}),x(d.slice(null==b?0:b,null==c?d.length:c))}function B(a,b,c){let d=s(a);m(b>=d.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(d),length:b,offset:b+1});let e=new Uint8Array(b);return e.fill(0),c?e.set(d,b-d.length):e.set(d,0),x(e)}function C(a,b){return B(a,b,!0)}let D=BigInt(0),E=BigInt(1);function F(a,b){let c=J(a,"value"),d=BigInt(M(b,"width"));return(m(c>>d===D,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:a}),c>>d-E)?-((~c&(E<<d)-E)+E):c}function G(a,b){let c=I(a,"value"),d=BigInt(M(b,"width")),e=E<<d-E;return c<D?(m((c=-c)<=e,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:a}),(~c&(E<<d)-E)+E):(m(c<e,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:a}),c)}function H(a,b){return J(a,"value")&(E<<BigInt(M(b,"bits")))-E}function I(a,b){switch(typeof a){case"bigint":return a;case"number":return n(Number.isInteger(a),"underflow",b||"value",a),n(a>=-0x1fffffffffffff&&a<=0x1fffffffffffff,"overflow",b||"value",a),BigInt(a);case"string":try{if(""===a)throw Error("empty string");if("-"===a[0]&&"-"!==a[1])return-BigInt(a.substring(1));return BigInt(a)}catch(c){n(!1,`invalid BigNumberish string: ${c.message}`,b||"value",a)}}n(!1,"invalid BigNumberish value",b||"value",a)}function J(a,b){let c=I(a,b);return m(c>=D,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:a}),c}let K="0123456789abcdef";function L(a){if(a instanceof Uint8Array){let b="0x0";for(let c of a)b+=K[c>>4],b+=K[15&c];return BigInt(b)}return I(a)}function M(a,b){switch(typeof a){case"bigint":return n(a>=-0x1fffffffffffff&&a<=0x1fffffffffffff,"overflow",b||"value",a),Number(a);case"number":return n(Number.isInteger(a),"underflow",b||"value",a),n(a>=-0x1fffffffffffff&&a<=0x1fffffffffffff,"overflow",b||"value",a),a;case"string":try{if(""===a)throw Error("empty string");return M(BigInt(a),b)}catch(c){n(!1,`invalid numeric string: ${c.message}`,b||"value",a)}}n(!1,"invalid numeric value",b||"value",a)}function N(a,b){let c=J(a,"value"),d=c.toString(16);if(null==b)d.length%2&&(d="0"+d);else{let e=M(b,"width");if(0===e&&c===D)return"0x";for(m(2*e>=d.length,`value exceeds width (${e} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:a});d.length<2*e;)d="0"+d}return"0x"+d}function O(a,b){let c=J(a,"value");if(c===D)return new Uint8Array(null!=b?M(b,"width"):0);let d=c.toString(16);if(d.length%2&&(d="0"+d),null!=b){let c=M(b,"width");for(;d.length<2*c;)d="00"+d;m(2*c===d.length,`value exceeds width (${c} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:a})}let e=new Uint8Array(d.length/2);for(let a=0;a<e.length;a++){let b=2*a;e[a]=parseInt(d.substring(b,b+2),16)}return e}function P(a){let b=x(v(a)?a:O(a)).substring(2);for(;b.startsWith("0");)b=b.substring(1);return""===b&&(b="0"),"0x"+b}let Q=new Uint8Array(32),R=["then"],S={},T=new WeakMap;function U(a){return T.get(a)}function V(a,b){let c=Error(`deferred error during ABI decoding triggered accessing ${a}`);throw c.error=b,c}class W extends Array{#a;constructor(...a){var b,c;let d=a[0],e=a[1],f=(a[2]||[]).slice(),g=!0;d!==S&&(e=a,f=[],g=!1),super(e.length),e.forEach((a,b)=>{this[b]=a});let h=f.reduce((a,b)=>("string"==typeof b&&a.set(b,(a.get(b)||0)+1),a),new Map);if(b=Object.freeze(e.map((a,b)=>{let c=f[b];return null!=c&&1===h.get(c)?c:null})),T.set(this,b),this.#a=[],null==this.#a&&this.#a,!g)return;Object.freeze(this);let i=new Proxy(this,{get:(a,b,c)=>{if("string"==typeof b){if(b.match(/^[0-9]+$/)){let c=M(b,"%index");if(c<0||c>=this.length)throw RangeError("out of result range");let d=a[c];return d instanceof Error&&V(`index ${c}`,d),d}if(R.indexOf(b)>=0)return Reflect.get(a,b,c);let d=a[b];if(d instanceof Function)return function(...b){return d.apply(this===c?a:this,b)};if(!(b in a))return a.getValue.apply(this===c?a:this,[b])}return Reflect.get(a,b,c)}});return c=U(this),T.set(i,c),i}toArray(a){let b=[];return this.forEach((c,d)=>{c instanceof Error&&V(`index ${d}`,c),a&&c instanceof W&&(c=c.toArray(a)),b.push(c)}),b}toObject(a){let b=U(this);return b.reduce((c,d,e)=>(m(null!=d,`value at index ${e} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function a(b,c,d){return b.indexOf(null)>=0?c.map((b,c)=>b instanceof W?a(U(b),b,d):b):b.reduce((b,e,f)=>{let g=c.getValue(e);return e in b||(d&&g instanceof W&&(g=a(U(g),g,d)),b[e]=g),b},{})}(b,this,a)),{})}slice(a,b){null==a&&(a=0),a<0&&(a+=this.length)<0&&(a=0),null==b&&(b=this.length),b<0&&(b+=this.length)<0&&(b=0),b>this.length&&(b=this.length);let c=U(this),d=[],e=[];for(let f=a;f<b;f++)d.push(this[f]),e.push(c[f]);return new W(S,d,e)}filter(a,b){let c=U(this),d=[],e=[];for(let f=0;f<this.length;f++){let g=this[f];g instanceof Error&&V(`index ${f}`,g),a.call(b,g,f,this)&&(d.push(g),e.push(c[f]))}return new W(S,d,e)}map(a,b){let c=[];for(let d=0;d<this.length;d++){let e=this[d];e instanceof Error&&V(`index ${d}`,e),c.push(a.call(b,e,d,this))}return c}getValue(a){let b=U(this).indexOf(a);if(-1===b)return;let c=this[b];return c instanceof Error&&V(`property ${JSON.stringify(a)}`,c.error),c}static fromItems(a,b){return new W(S,a,b)}}function X(a){let b=O(a);return m(b.length<=32,"value out-of-bounds","BUFFER_OVERRUN",{buffer:b,length:32,offset:b.length}),32!==b.length&&(b=t(y([Q.slice(b.length%32),b]))),b}class Y{name;type;localName;dynamic;constructor(a,b,c,d){h(this,{name:a,type:b,localName:c,dynamic:d},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(a,b){n(!1,a,this.localName,b)}}class Z{#b;#c;constructor(){this.#b=[],this.#c=0}get data(){return y(this.#b)}get length(){return this.#c}#d(a){return this.#b.push(a),this.#c+=a.length,a.length}appendWriter(a){return this.#d(t(a.data))}writeBytes(a){let b=t(a),c=b.length%32;return c&&(b=t(y([b,Q.slice(c)]))),this.#d(b)}writeValue(a){return this.#d(X(a))}writeUpdatableValue(){let a=this.#b.length;return this.#b.push(Q),this.#c+=32,b=>{this.#b[a]=X(b)}}}class ${allowLoose;#b;#e;#f;#g;#h;constructor(a,b,c){h(this,{allowLoose:!!b}),this.#b=t(a),this.#f=0,this.#g=null,this.#h=null!=c?c:1024,this.#e=0}get data(){return x(this.#b)}get dataLength(){return this.#b.length}get consumed(){return this.#e}get bytes(){return new Uint8Array(this.#b)}#i(a){if(this.#g)return this.#g.#i(a);this.#f+=a,m(this.#h<1||this.#f<=this.#h*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#h} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:t(this.#b),offset:this.#e,length:a,info:{bytesRead:this.#f,dataLength:this.dataLength}})}#j(a,b,c){let d=32*Math.ceil(b/32);return this.#e+d>this.#b.length&&(this.allowLoose&&c&&this.#e+b<=this.#b.length?d=b:m(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:t(this.#b),length:this.#b.length,offset:this.#e+d})),this.#b.slice(this.#e,this.#e+d)}subReader(a){let b=new $(this.#b.slice(this.#e+a),this.allowLoose,this.#h);return b.#g=this,b}readBytes(a,b){let c=this.#j(0,a,!!b);return this.#i(a),this.#e+=c.length,c.slice(0,a)}readValue(){return L(this.readBytes(32))}readIndex(){return M(L(this.readBytes(32)))}}function _(a){if(!Number.isSafeInteger(a)||a<0)throw Error(`Wrong positive integer: ${a}`)}function aa(a,...b){if(!(a instanceof Uint8Array))throw Error("Expected Uint8Array");if(b.length>0&&!b.includes(a.length))throw Error(`Expected Uint8Array of length ${b}, not of length=${a.length}`)}function ab(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function ac(a,b){aa(a);let c=b.outputLen;if(a.length<c)throw Error(`digestInto() expects output buffer of length at least ${c}`)}let ad=BigInt(0x100000000-1),ae=BigInt(32),af=require("node:crypto");var ag=c.t(af,2);let ah=ag&&"object"==typeof ag&&"webcrypto"in ag?af.webcrypto:void 0,ai=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),aj=(a,b)=>a<<32-b|a>>>b;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function ak(a){if("string"==typeof a&&(a=function(a){if("string"!=typeof a)throw Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}(a)),!(a instanceof Uint8Array))throw Error(`expected Uint8Array, got ${typeof a}`);return a}class al{clone(){return this._cloneInto()}}function am(a){let b=b=>a().update(ak(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}function an(a=32){if(ah&&"function"==typeof ah.getRandomValues)return ah.getRandomValues(new Uint8Array(a));throw Error("crypto.getRandomValues must be defined")}let[ao,ap,aq]=[[],[],[]],ar=BigInt(0),as=BigInt(1),at=BigInt(2),au=BigInt(7),av=BigInt(256),aw=BigInt(113);for(let a=0,b=as,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],ao.push(2*(5*d+c)),ap.push((a+1)*(a+2)/2%64);let e=ar;for(let a=0;a<7;a++)(b=(b<<as^(b>>au)*aw)%av)&at&&(e^=as<<(as<<BigInt(a))-as);aq.push(e)}let[ax,ay]=function(a,b=!1){let c=new Uint32Array(a.length),d=new Uint32Array(a.length);for(let e=0;e<a.length;e++){let{h:f,l:g}=function(a,b=!1){return b?{h:Number(a&ad),l:Number(a>>ae&ad)}:{h:0|Number(a>>ae&ad),l:0|Number(a&ad)}}(a[e],b);[c[e],d[e]]=[f,g]}return[c,d]}(aq,!0),az=(a,b,c)=>c>32?((a,b,c)=>b<<c-32|a>>>64-c)(a,b,c):((a,b,c)=>a<<c|b>>>32-c)(a,b,c),aA=(a,b,c)=>c>32?((a,b,c)=>a<<c-32|b>>>64-c)(a,b,c):((a,b,c)=>b<<c|a>>>32-c)(a,b,c);class aB extends al{constructor(a,b,c,d=!1,e=24){if(super(),this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=d,this.rounds=e,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,_(c),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(a=>new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))(this.state)}keccak(){!function(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=az(f,g,1)^c[d],i=aA(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=ap[c],f=az(b,e,d),g=aA(b,e,d),h=ao[c];b=a[h],e=a[h+1],a[h]=f,a[h+1]=g}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=ax[d],a[1]^=ay[d]}c.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(a){ab(this);let{blockLen:b,state:c}=this,d=(a=ak(a)).length;for(let e=0;e<d;){let f=Math.min(b-this.pos,d-e);for(let b=0;b<f;b++)c[this.pos++]^=a[e++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){ab(this,!1),aa(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return _(a),this.xofInto(new Uint8Array(a))}digestInto(a){if(ac(a,this),this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return a||(a=new aB(b,c,d,f,e)),a.state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}let aC=am(()=>new aB(136,1,32)),aD=!1,aE=function(a){return aC(a)},aF=aE;function aG(a){let b=s(a,"data");return x(aF(b))}aG._=aE,aG.lock=function(){aD=!0},aG.register=function(a){if(aD)throw TypeError("keccak256 is locked");aF=a},Object.freeze(aG);let aH=BigInt(0),aI=BigInt(36);function aJ(a){let b=(a=a.toLowerCase()).substring(2).split(""),c=new Uint8Array(40);for(let a=0;a<40;a++)c[a]=b[a].charCodeAt(0);let d=s(aG(c));for(let a=0;a<40;a+=2)d[a>>1]>>4>=8&&(b[a]=b[a].toUpperCase()),(15&d[a>>1])>=8&&(b[a+1]=b[a+1].toUpperCase());return"0x"+b.join("")}let aK={};for(let a=0;a<10;a++)aK[String(a)]=String(a);for(let a=0;a<26;a++)aK[String.fromCharCode(65+a)]=String(10+a);let aL=function(){let a={};for(let b=0;b<36;b++)a["0123456789abcdefghijklmnopqrstuvwxyz"[b]]=BigInt(b);return a}();function aM(a){if(n("string"==typeof a,"invalid address","address",a),a.match(/^(0x)?[0-9a-fA-F]{40}$/)){a.startsWith("0x")||(a="0x"+a);let b=aJ(a);return n(!a.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||b===a,"bad address checksum","address",a),b}if(a.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){n(a.substring(2,4)===function(a){let b=(a=(a=a.toUpperCase()).substring(4)+a.substring(0,2)+"00").split("").map(a=>aK[a]).join("");for(;b.length>=15;){let a=b.substring(0,15);b=parseInt(a,10)%97+b.substring(a.length)}let c=String(98-parseInt(b,10)%97);for(;c.length<2;)c="0"+c;return c}(a),"bad icap checksum","address",a);let b=(function(a){a=a.toLowerCase();let b=aH;for(let c=0;c<a.length;c++)b=b*aI+aL[a[c]];return b})(a.substring(4)).toString(16);for(;b.length<40;)b="0"+b;return aJ("0x"+b)}n(!1,"invalid address","address",a)}let aN={};function aO(a,b){let c=!1;return b<0&&(c=!0,b*=-1),new aR(aN,`${c?"":"u"}int${b}`,a,{signed:c,width:b})}function aP(a,b){return new aR(aN,`bytes${b||""}`,a,{size:b})}let aQ=Symbol.for("_ethers_typed");class aR{type;value;#k;_typedSymbol;constructor(a,b,c,d){null==d&&(d=null),q(aN,a,"Typed"),h(this,{_typedSymbol:aQ,type:b,value:c}),this.#k=d,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(a=>a.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#k}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#k?-1:!1===this.#k?this.value.length:null}static from(a,b){return new aR(aN,a,b)}static uint8(a){return aO(a,8)}static uint16(a){return aO(a,16)}static uint24(a){return aO(a,24)}static uint32(a){return aO(a,32)}static uint40(a){return aO(a,40)}static uint48(a){return aO(a,48)}static uint56(a){return aO(a,56)}static uint64(a){return aO(a,64)}static uint72(a){return aO(a,72)}static uint80(a){return aO(a,80)}static uint88(a){return aO(a,88)}static uint96(a){return aO(a,96)}static uint104(a){return aO(a,104)}static uint112(a){return aO(a,112)}static uint120(a){return aO(a,120)}static uint128(a){return aO(a,128)}static uint136(a){return aO(a,136)}static uint144(a){return aO(a,144)}static uint152(a){return aO(a,152)}static uint160(a){return aO(a,160)}static uint168(a){return aO(a,168)}static uint176(a){return aO(a,176)}static uint184(a){return aO(a,184)}static uint192(a){return aO(a,192)}static uint200(a){return aO(a,200)}static uint208(a){return aO(a,208)}static uint216(a){return aO(a,216)}static uint224(a){return aO(a,224)}static uint232(a){return aO(a,232)}static uint240(a){return aO(a,240)}static uint248(a){return aO(a,248)}static uint256(a){return aO(a,256)}static uint(a){return aO(a,256)}static int8(a){return aO(a,-8)}static int16(a){return aO(a,-16)}static int24(a){return aO(a,-24)}static int32(a){return aO(a,-32)}static int40(a){return aO(a,-40)}static int48(a){return aO(a,-48)}static int56(a){return aO(a,-56)}static int64(a){return aO(a,-64)}static int72(a){return aO(a,-72)}static int80(a){return aO(a,-80)}static int88(a){return aO(a,-88)}static int96(a){return aO(a,-96)}static int104(a){return aO(a,-104)}static int112(a){return aO(a,-112)}static int120(a){return aO(a,-120)}static int128(a){return aO(a,-128)}static int136(a){return aO(a,-136)}static int144(a){return aO(a,-144)}static int152(a){return aO(a,-152)}static int160(a){return aO(a,-160)}static int168(a){return aO(a,-168)}static int176(a){return aO(a,-176)}static int184(a){return aO(a,-184)}static int192(a){return aO(a,-192)}static int200(a){return aO(a,-200)}static int208(a){return aO(a,-208)}static int216(a){return aO(a,-216)}static int224(a){return aO(a,-224)}static int232(a){return aO(a,-232)}static int240(a){return aO(a,-240)}static int248(a){return aO(a,-248)}static int256(a){return aO(a,-256)}static int(a){return aO(a,-256)}static bytes1(a){return aP(a,1)}static bytes2(a){return aP(a,2)}static bytes3(a){return aP(a,3)}static bytes4(a){return aP(a,4)}static bytes5(a){return aP(a,5)}static bytes6(a){return aP(a,6)}static bytes7(a){return aP(a,7)}static bytes8(a){return aP(a,8)}static bytes9(a){return aP(a,9)}static bytes10(a){return aP(a,10)}static bytes11(a){return aP(a,11)}static bytes12(a){return aP(a,12)}static bytes13(a){return aP(a,13)}static bytes14(a){return aP(a,14)}static bytes15(a){return aP(a,15)}static bytes16(a){return aP(a,16)}static bytes17(a){return aP(a,17)}static bytes18(a){return aP(a,18)}static bytes19(a){return aP(a,19)}static bytes20(a){return aP(a,20)}static bytes21(a){return aP(a,21)}static bytes22(a){return aP(a,22)}static bytes23(a){return aP(a,23)}static bytes24(a){return aP(a,24)}static bytes25(a){return aP(a,25)}static bytes26(a){return aP(a,26)}static bytes27(a){return aP(a,27)}static bytes28(a){return aP(a,28)}static bytes29(a){return aP(a,29)}static bytes30(a){return aP(a,30)}static bytes31(a){return aP(a,31)}static bytes32(a){return aP(a,32)}static address(a){return new aR(aN,"address",a)}static bool(a){return new aR(aN,"bool",!!a)}static bytes(a){return new aR(aN,"bytes",a)}static string(a){return new aR(aN,"string",a)}static array(a,b){throw Error("not implemented yet")}static tuple(a,b){throw Error("not implemented yet")}static overrides(a){return new aR(aN,"overrides",Object.assign({},a))}static isTyped(a){return a&&"object"==typeof a&&"_typedSymbol"in a&&a._typedSymbol===aQ}static dereference(a,b){if(aR.isTyped(a)){if(a.type!==b)throw Error(`invalid type: expecetd ${b}, got ${a.type}`);return a.value}return a}}class aS extends Y{constructor(a){super("address","address",a,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(a,b){let c=aR.dereference(b,"string");try{c=aM(c)}catch(a){return this._throwError(a.message,b)}return a.writeValue(c)}decode(a){return aM(N(a.readValue(),20))}}class aT extends Y{coder;constructor(a){super(a.name,a.type,"_",a.dynamic),this.coder=a}defaultValue(){return this.coder.defaultValue()}encode(a,b){return this.coder.encode(a,b)}decode(a){return this.coder.decode(a)}}function aU(a,b,c){let d=[];if(Array.isArray(c))d=c;else if(c&&"object"==typeof c){let a={};d=b.map(b=>{let d=b.localName;return m(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:b},value:c}),m(!a[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:b},value:c}),a[d]=!0,c[d]})}else n(!1,"invalid tuple value","tuple",c);n(b.length===d.length,"types/value length mismatch","tuple",c);let e=new Z,f=new Z,g=[];b.forEach((a,b)=>{let c=d[b];if(a.dynamic){let b=f.length;a.encode(f,c);let d=e.writeUpdatableValue();g.push(a=>{d(a+b)})}else a.encode(e,c)}),g.forEach(a=>{a(e.length)});let h=a.appendWriter(e);return h+a.appendWriter(f)}function aV(a,b){let c=[],d=[],e=a.subReader(0);return b.forEach(b=>{let f=null;if(b.dynamic){let c=a.readIndex(),d=e.subReader(c);try{f=b.decode(d)}catch(a){if(j(a,"BUFFER_OVERRUN"))throw a;(f=a).baseType=b.name,f.name=b.localName,f.type=b.type}}else try{f=b.decode(a)}catch(a){if(j(a,"BUFFER_OVERRUN"))throw a;(f=a).baseType=b.name,f.name=b.localName,f.type=b.type}if(void 0==f)throw Error("investigate");c.push(f),d.push(b.localName||null)}),W.fromItems(c,d)}class aW extends Y{coder;length;constructor(a,b,c){super("array",a.type+"["+(b>=0?b:"")+"]",c,-1===b||a.dynamic),h(this,{coder:a,length:b})}defaultValue(){let a=this.coder.defaultValue(),b=[];for(let c=0;c<this.length;c++)b.push(a);return b}encode(a,b){let c=aR.dereference(b,"array");Array.isArray(c)||this._throwError("expected array value",c);let d=this.length;-1===d&&(d=c.length,a.writeValue(c.length)),o(c.length,d,"coder array"+(this.localName?" "+this.localName:""));let e=[];for(let a=0;a<c.length;a++)e.push(this.coder);return aU(a,e,c)}decode(a){let b=this.length;-1===b&&m(32*(b=a.readIndex())<=a.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:a.bytes,offset:32*b,length:a.dataLength});let c=[];for(let a=0;a<b;a++)c.push(new aT(this.coder));return aV(a,c)}}class aX extends Y{constructor(a){super("bool","bool",a,!1)}defaultValue(){return!1}encode(a,b){let c=aR.dereference(b,"bool");return a.writeValue(+!!c)}decode(a){return!!a.readValue()}}class aY extends Y{constructor(a,b){super(a,a,b,!0)}defaultValue(){return"0x"}encode(a,b){b=t(b);let c=a.writeValue(b.length);return c+a.writeBytes(b)}decode(a){return a.readBytes(a.readIndex(),!0)}}class aZ extends aY{constructor(a){super("bytes",a)}decode(a){return x(super.decode(a))}}class a$ extends Y{size;constructor(a,b){let c="bytes"+String(a);super(c,c,b,!1),h(this,{size:a},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(a,b){let c=t(aR.dereference(b,this.type));return c.length!==this.size&&this._throwError("incorrect data length",b),a.writeBytes(c)}decode(a){return x(a.readBytes(this.size))}}let a_=new Uint8Array([]);class a0 extends Y{constructor(a){super("null","",a,!1)}defaultValue(){return null}encode(a,b){return null!=b&&this._throwError("not null",b),a.writeBytes(a_)}decode(a){return a.readBytes(0),null}}let a1=BigInt(0),a2=BigInt(1),a3=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class a4 extends Y{size;signed;constructor(a,b,c){let d=(b?"int":"uint")+8*a;super(d,d,c,!1),h(this,{size:a,signed:b},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(a,b){let c=I(aR.dereference(b,this.type)),d=H(a3,256);if(this.signed){let a=H(d,8*this.size-1);(c>a||c<-(a+a2))&&this._throwError("value out-of-bounds",b),c=G(c,256)}else(c<a1||c>H(d,8*this.size))&&this._throwError("value out-of-bounds",b);return a.writeValue(c)}decode(a){let b=H(a.readValue(),8*this.size);return this.signed&&(b=F(b,8*this.size)),b}}function a5(a,b,c,d,e){if("BAD_PREFIX"===a||"UNEXPECTED_CONTINUE"===a){let a=0;for(let d=b+1;d<c.length&&c[d]>>6==2;d++)a++;return a}return"OVERRUN"===a?c.length-b-1:0}let a6=Object.freeze({error:function(a,b,c,d,e){n(!1,`invalid codepoint at offset ${b}; ${a}`,"bytes",c)},ignore:a5,replace:function(a,b,c,d,e){return"OVERLONG"===a?(n("number"==typeof e,"invalid bad code point for replacement","badCodepoint",e),d.push(e),0):(d.push(65533),a5(a,b,c,d,e))}});function a7(a,b){(n("string"==typeof a,"invalid string value","str",a),null!=b)&&(m(p.indexOf(b)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:b}}),a=a.normalize(b));let c=[];for(let b=0;b<a.length;b++){let d=a.charCodeAt(b);if(d<128)c.push(d);else if(d<2048)c.push(d>>6|192),c.push(63&d|128);else if((64512&d)==55296){b++;let e=a.charCodeAt(b);n(b<a.length&&(64512&e)==56320,"invalid surrogate pair","str",a);let f=65536+((1023&d)<<10)+(1023&e);c.push(f>>18|240),c.push(f>>12&63|128),c.push(f>>6&63|128),c.push(63&f|128)}else c.push(d>>12|224),c.push(d>>6&63|128),c.push(63&d|128)}return new Uint8Array(c)}function a8(a,b){return(function(a,b){null==b&&(b=a6.error);let c=s(a,"bytes"),d=[],e=0;for(;e<c.length;){let a=c[e++];if(a>>7==0){d.push(a);continue}let f=null,g=null;if((224&a)==192)f=1,g=127;else if((240&a)==224)f=2,g=2047;else if((248&a)==240)f=3,g=65535;else{(192&a)==128?e+=b("UNEXPECTED_CONTINUE",e-1,c,d):e+=b("BAD_PREFIX",e-1,c,d);continue}if(e-1+f>=c.length){e+=b("OVERRUN",e-1,c,d);continue}let h=a&(1<<8-f-1)-1;for(let a=0;a<f;a++){let a=c[e];if((192&a)!=128){e+=b("MISSING_CONTINUE",e,c,d),h=null;break}h=h<<6|63&a,e++}if(null!==h){if(h>1114111){e+=b("OUT_OF_RANGE",e-1-f,c,d,h);continue}if(h>=55296&&h<=57343){e+=b("UTF16_SURROGATE",e-1-f,c,d,h);continue}if(h<=g){e+=b("OVERLONG",e-1-f,c,d,h);continue}d.push(h)}}return d})(a,b).map(a=>a<=65535?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10&1023)+55296,(1023&a)+56320)).join("")}class a9 extends aY{constructor(a){super("string",a)}defaultValue(){return""}encode(a,b){return super.encode(a,a7(aR.dereference(b,"string")))}decode(a){return a8(super.decode(a))}}class ba extends Y{coders;constructor(a,b){let c=!1,d=[];a.forEach(a=>{a.dynamic&&(c=!0),d.push(a.type)}),super("tuple","tuple("+d.join(",")+")",b,c),h(this,{coders:Object.freeze(a.slice())})}defaultValue(){let a=[];this.coders.forEach(b=>{a.push(b.defaultValue())});let b=this.coders.reduce((a,b)=>{let c=b.localName;return c&&(a[c]||(a[c]=0),a[c]++),a},{});return this.coders.forEach((c,d)=>{let e=c.localName;e&&1===b[e]&&("length"===e&&(e="_length"),null==a[e]&&(a[e]=a[d]))}),Object.freeze(a)}encode(a,b){let c=aR.dereference(b,"tuple");return aU(a,this.coders,c)}decode(a){return aV(a,this.coders)}}function bb(a){return aG(a7(a))}function bc(a){let b=new Set;return a.forEach(a=>b.add(a)),Object.freeze(b)}let bd=bc("external public payable override".split(" ")),be="constant external internal payable private public pure view override",bf=bc(be.split(" ")),bg="constructor error event fallback function receive struct",bh=bc(bg.split(" ")),bi="calldata memory storage payable indexed",bj=bc(bi.split(" ")),bk=bc([bg,bi,"tuple returns",be].join(" ").split(" ")),bl={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},bm=RegExp("^(\\s*)"),bn=RegExp("^([0-9]+)"),bo=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),bp=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),bq=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class br{#e;#l;get offset(){return this.#e}get length(){return this.#l.length-this.#e}constructor(a){this.#e=0,this.#l=a.slice()}clone(){return new br(this.#l)}reset(){this.#e=0}#m(a=0,b=0){return new br(this.#l.slice(a,b).map(b=>Object.freeze(Object.assign({},b,{match:b.match-a,linkBack:b.linkBack-a,linkNext:b.linkNext-a}))))}popKeyword(a){let b=this.peek();if("KEYWORD"!==b.type||!a.has(b.text))throw Error(`expected keyword ${b.text}`);return this.pop().text}popType(a){if(this.peek().type!==a){let b=this.peek();throw Error(`expected ${a}; got ${b.type} ${JSON.stringify(b.text)}`)}return this.pop().text}popParen(){let a=this.peek();if("OPEN_PAREN"!==a.type)throw Error("bad start");let b=this.#m(this.#e+1,a.match+1);return this.#e=a.match+1,b}popParams(){let a=this.peek();if("OPEN_PAREN"!==a.type)throw Error("bad start");let b=[];for(;this.#e<a.match-1;){let a=this.peek().linkNext;b.push(this.#m(this.#e+1,a)),this.#e=a}return this.#e=a.match+1,b}peek(){if(this.#e>=this.#l.length)throw Error("out-of-bounds");return this.#l[this.#e]}peekKeyword(a){let b=this.peekType("KEYWORD");return null!=b&&a.has(b)?b:null}peekType(a){if(0===this.length)return null;let b=this.peek();return b.type===a?b.text:null}pop(){let a=this.peek();return this.#e++,a}toString(){let a=[];for(let b=this.#e;b<this.#l.length;b++){let c=this.#l[b];a.push(`${c.type}:${c.text}`)}return`<TokenString ${a.join(" ")}>`}}function bs(a){let b=[],c=b=>{let c=f<a.length?JSON.stringify(a[f]):"$EOI";throw Error(`invalid token ${c} at ${f}: ${b}`)},d=[],e=[],f=0;for(;f<a.length;){let g=a.substring(f),h=g.match(bm);h&&(f+=h[1].length,g=a.substring(f));let i={depth:d.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:f,value:-1};b.push(i);let j=bl[g[0]]||"";if(j){if(i.type=j,i.text=g[0],f++,"OPEN_PAREN"===j)d.push(b.length-1),e.push(b.length-1);else if("CLOSE_PAREN"==j)0===d.length&&c("no matching open bracket"),i.match=d.pop(),b[i.match].match=b.length-1,i.depth--,i.linkBack=e.pop(),b[i.linkBack].linkNext=b.length-1;else if("COMMA"===j)i.linkBack=e.pop(),b[i.linkBack].linkNext=b.length-1,e.push(b.length-1);else if("OPEN_BRACKET"===j)i.type="BRACKET";else if("CLOSE_BRACKET"===j){let a=b.pop().text;if(b.length>0&&"NUMBER"===b[b.length-1].type){let c=b.pop().text;a=c+a,b[b.length-1].value=M(c)}if(0===b.length||"BRACKET"!==b[b.length-1].type)throw Error("missing opening bracket");b[b.length-1].text+=a}continue}if(h=g.match(bo)){if(i.text=h[1],f+=i.text.length,bk.has(i.text)){i.type="KEYWORD";continue}if(i.text.match(bq)){i.type="TYPE";continue}i.type="ID";continue}if(h=g.match(bn)){i.text=h[1],i.type="NUMBER",f+=i.text.length;continue}throw Error(`unexpected token ${JSON.stringify(g[0])} at position ${f}`)}return new br(b.map(a=>Object.freeze(a)))}function bt(a,b){let c=[];for(let d in b.keys())a.has(d)&&c.push(d);if(c.length>1)throw Error(`conflicting types: ${c.join(", ")}`)}function bu(a,b){if(b.peekKeyword(bh)){let c=b.pop().text;if(c!==a)throw Error(`expected ${a}, got ${c}`)}return b.popType("ID")}function bv(a,b){let c=new Set;for(;;){let d=a.peekType("KEYWORD");if(null==d||b&&!b.has(d))break;if(a.pop(),c.has(d))throw Error(`duplicate keywords: ${JSON.stringify(d)}`);c.add(d)}return Object.freeze(c)}function bw(a){let b=bv(a,bf);return(bt(b,bc("constant payable nonpayable".split(" "))),bt(b,bc("pure view payable nonpayable".split(" "))),b.has("view"))?"view":b.has("pure")?"pure":b.has("payable")?"payable":b.has("nonpayable")?"nonpayable":b.has("constant")?"view":"nonpayable"}function bx(a,b){return a.popParams().map(a=>bL.from(a,b))}function by(a){if(a.peekType("AT")){if(a.pop(),a.peekType("NUMBER"))return I(a.pop().text);throw Error("invalid gas")}return null}function bz(a){if(a.length)throw Error(`unexpected tokens at offset ${a.offset}: ${a.toString()}`)}let bA=new RegExp(/^(.*)\[([0-9]*)\]$/);function bB(a){let b=a.match(bq);if(n(b,"invalid type","type",a),"uint"===a)return"uint256";if("int"===a)return"int256";if(b[2]){let c=parseInt(b[2]);n(0!==c&&c<=32,"invalid bytes length","type",a)}else if(b[3]){let c=parseInt(b[3]);n(0!==c&&c<=256&&c%8==0,"invalid numeric width","type",a)}return a}let bC={},bD=Symbol.for("_ethers_internal"),bE="_ParamTypeInternal",bF="_ErrorInternal",bG="_EventInternal",bH="_ConstructorInternal",bI="_FallbackInternal",bJ="_FunctionInternal",bK="_StructInternal";class bL{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(a,b,c,d,e,f,g,i){if(q(a,bC,"ParamType"),Object.defineProperty(this,bD,{value:bE}),f&&(f=Object.freeze(f.slice())),"array"===d){if(null==g||null==i)throw Error("")}else if(null!=g||null!=i)throw Error("");if("tuple"===d){if(null==f)throw Error("")}else if(null!=f)throw Error("");h(this,{name:b,type:c,baseType:d,indexed:e,components:f,arrayLength:g,arrayChildren:i})}format(a){if(null==a&&(a="sighash"),"json"===a){let b=this.name||"";if(this.isArray()){let a=JSON.parse(this.arrayChildren.format("json"));return a.name=b,a.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(a)}let c={type:"tuple"===this.baseType?"tuple":this.type,name:b};return"boolean"==typeof this.indexed&&(c.indexed=this.indexed),this.isTuple()&&(c.components=this.components.map(b=>JSON.parse(b.format(a)))),JSON.stringify(c)}let b="";return this.isArray()?(b+=this.arrayChildren.format(a),b+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?b+="("+this.components.map(b=>b.format(a)).join("full"===a?", ":",")+")":b+=this.type,"sighash"!==a&&(!0===this.indexed&&(b+=" indexed"),"full"===a&&this.name&&(b+=" "+this.name)),b}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(a,b){if(this.isArray()){if(!Array.isArray(a))throw Error("invalid array value");if(-1!==this.arrayLength&&a.length!==this.arrayLength)throw Error("array is wrong length");let c=this;return a.map(a=>c.arrayChildren.walk(a,b))}if(this.isTuple()){if(!Array.isArray(a))throw Error("invalid tuple value");if(a.length!==this.components.length)throw Error("array is wrong length");let c=this;return a.map((a,d)=>c.components[d].walk(a,b))}return b(this.type,a)}#n(a,b,c,d){if(this.isArray()){if(!Array.isArray(b))throw Error("invalid array value");if(-1!==this.arrayLength&&b.length!==this.arrayLength)throw Error("array is wrong length");let e=this.arrayChildren,f=b.slice();f.forEach((b,d)=>{e.#n(a,b,c,a=>{f[d]=a})}),d(f);return}if(this.isTuple()){let e,f=this.components;if(Array.isArray(b))e=b.slice();else{if(null==b||"object"!=typeof b)throw Error("invalid tuple value");e=f.map(a=>{if(!a.name)throw Error("cannot use object value with unnamed components");if(!(a.name in b))throw Error(`missing value for component ${a.name}`);return b[a.name]})}if(e.length!==this.components.length)throw Error("array is wrong length");e.forEach((b,d)=>{f[d].#n(a,b,c,a=>{e[d]=a})}),d(e);return}let e=c(this.type,b);e.then?a.push(async function(){d(await e)}()):d(e)}async walkAsync(a,b){let c=[],d=[a];return this.#n(c,a,b,a=>{d[0]=a}),c.length&&await Promise.all(c),d[0]}static from(a,b){if(bL.isParamType(a))return a;if("string"==typeof a)try{return bL.from(bs(a),b)}catch(b){n(!1,"invalid param type","obj",a)}else if(a instanceof br){let c="",d="",e=null;bv(a,bc(["tuple"])).has("tuple")||a.peekType("OPEN_PAREN")?(d="tuple",e=a.popParams().map(a=>bL.from(a)),c=`tuple(${e.map(a=>a.format()).join(",")})`):d=c=bB(a.popType("TYPE"));let f=null,g=null;for(;a.length&&a.peekType("BRACKET");){let b=a.pop();f=new bL(bC,"",c,d,null,e,g,f),g=b.value,c+=b.text,d="array",e=null}let h=null;if(bv(a,bj).has("indexed")){if(!b)throw Error("");h=!0}let i=a.peekType("ID")?a.pop().text:"";if(a.length)throw Error("leftover tokens");return new bL(bC,i,c,d,h,e,g,f)}let c=a.name;n(!c||"string"==typeof c&&c.match(bp),"invalid name","obj.name",c);let d=a.indexed;null!=d&&(n(b,"parameter cannot be indexed","obj.indexed",a.indexed),d=!!d);let e=a.type,f=e.match(bA);if(f){let b=parseInt(f[2]||"-1"),g=bL.from({type:f[1],components:a.components});return new bL(bC,c||"",e,"array",d,null,b,g)}if("tuple"===e||e.startsWith("tuple(")||e.startsWith("(")){let b=null!=a.components?a.components.map(a=>bL.from(a)):null;return new bL(bC,c||"",e,"tuple",d,b,null,null)}return new bL(bC,c||"",e=bB(a.type),e,d,null,null,null)}static isParamType(a){return a&&a[bD]===bE}}class bM{type;inputs;constructor(a,b,c){q(a,bC,"Fragment"),h(this,{type:b,inputs:c=Object.freeze(c.slice())})}static from(a){if("string"==typeof a){try{bM.from(JSON.parse(a))}catch(a){}return bM.from(bs(a))}if(a instanceof br)switch(a.peekKeyword(bh)){case"constructor":return bR.from(a);case"error":return bP.from(a);case"event":return bQ.from(a);case"fallback":case"receive":return bS.from(a);case"function":return bT.from(a);case"struct":return bU.from(a)}else if("object"==typeof a){switch(a.type){case"constructor":return bR.from(a);case"error":return bP.from(a);case"event":return bQ.from(a);case"fallback":case"receive":return bS.from(a);case"function":return bT.from(a);case"struct":return bU.from(a)}m(!1,`unsupported type: ${a.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}n(!1,"unsupported frgament object","obj",a)}static isConstructor(a){return bR.isFragment(a)}static isError(a){return bP.isFragment(a)}static isEvent(a){return bQ.isFragment(a)}static isFunction(a){return bT.isFragment(a)}static isStruct(a){return bU.isFragment(a)}}class bN extends bM{name;constructor(a,b,c,d){super(a,b,d),n("string"==typeof c&&c.match(bp),"invalid identifier","name",c),d=Object.freeze(d.slice()),h(this,{name:c})}}function bO(a,b){return"("+b.map(b=>b.format(a)).join("full"===a?", ":",")+")"}class bP extends bN{constructor(a,b,c){super(a,"error",b,c),Object.defineProperty(this,bD,{value:bF})}get selector(){return bb(this.format("sighash")).substring(0,10)}format(a){if(null==a&&(a="sighash"),"json"===a)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(b=>JSON.parse(b.format(a)))});let b=[];return"sighash"!==a&&b.push("error"),b.push(this.name+bO(a,this.inputs)),b.join(" ")}static from(a){if(bP.isFragment(a))return a;if("string"==typeof a)return bP.from(bs(a));if(a instanceof br){let b=bu("error",a),c=bx(a);return bz(a),new bP(bC,b,c)}return new bP(bC,a.name,a.inputs?a.inputs.map(bL.from):[])}static isFragment(a){return a&&a[bD]===bF}}class bQ extends bN{anonymous;constructor(a,b,c,d){super(a,"event",b,c),Object.defineProperty(this,bD,{value:bG}),h(this,{anonymous:d})}get topicHash(){return bb(this.format("sighash"))}format(a){if(null==a&&(a="sighash"),"json"===a)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(b=>JSON.parse(b.format(a)))});let b=[];return"sighash"!==a&&b.push("event"),b.push(this.name+bO(a,this.inputs)),"sighash"!==a&&this.anonymous&&b.push("anonymous"),b.join(" ")}static getTopicHash(a,b){return new bQ(bC,a,b=(b||[]).map(a=>bL.from(a)),!1).topicHash}static from(a){if(bQ.isFragment(a))return a;if("string"==typeof a)try{return bQ.from(bs(a))}catch(b){n(!1,"invalid event fragment","obj",a)}else if(a instanceof br){let b=bu("event",a),c=bx(a,!0),d=!!bv(a,bc(["anonymous"])).has("anonymous");return bz(a),new bQ(bC,b,c,d)}return new bQ(bC,a.name,a.inputs?a.inputs.map(a=>bL.from(a,!0)):[],!!a.anonymous)}static isFragment(a){return a&&a[bD]===bG}}class bR extends bM{payable;gas;constructor(a,b,c,d,e){super(a,b,c),Object.defineProperty(this,bD,{value:bH}),h(this,{payable:d,gas:e})}format(a){if(m(null!=a&&"sighash"!==a,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===a)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(b=>JSON.parse(b.format(a)))});let b=[`constructor${bO(a,this.inputs)}`];return this.payable&&b.push("payable"),null!=this.gas&&b.push(`@${this.gas.toString()}`),b.join(" ")}static from(a){if(bR.isFragment(a))return a;if("string"==typeof a)try{return bR.from(bs(a))}catch(b){n(!1,"invalid constuctor fragment","obj",a)}else if(a instanceof br){bv(a,bc(["constructor"]));let b=bx(a),c=!!bv(a,bd).has("payable"),d=by(a);return bz(a),new bR(bC,"constructor",b,c,d)}return new bR(bC,"constructor",a.inputs?a.inputs.map(bL.from):[],!!a.payable,null!=a.gas?a.gas:null)}static isFragment(a){return a&&a[bD]===bH}}class bS extends bM{payable;constructor(a,b,c){super(a,"fallback",b),Object.defineProperty(this,bD,{value:bI}),h(this,{payable:c})}format(a){let b=0===this.inputs.length?"receive":"fallback";return"json"===a?JSON.stringify({type:b,stateMutability:this.payable?"payable":"nonpayable"}):`${b}()${this.payable?" payable":""}`}static from(a){if(bS.isFragment(a))return a;if("string"==typeof a)try{return bS.from(bs(a))}catch(b){n(!1,"invalid fallback fragment","obj",a)}else if(a instanceof br){let b=a.toString();if(n(a.peekKeyword(bc(["fallback","receive"])),"type must be fallback or receive","obj",b),"receive"===a.popKeyword(bc(["fallback","receive"]))){let b=bx(a);return n(0===b.length,"receive cannot have arguments","obj.inputs",b),bv(a,bc(["payable"])),bz(a),new bS(bC,[],!0)}let c=bx(a);c.length?n(1===c.length&&"bytes"===c[0].type,"invalid fallback inputs","obj.inputs",c.map(a=>a.format("minimal")).join(", ")):c=[bL.from("bytes")];let d=bw(a);if(n("nonpayable"===d||"payable"===d,"fallback cannot be constants","obj.stateMutability",d),bv(a,bc(["returns"])).has("returns")){let b=bx(a);n(1===b.length&&"bytes"===b[0].type,"invalid fallback outputs","obj.outputs",b.map(a=>a.format("minimal")).join(", "))}return bz(a),new bS(bC,c,"payable"===d)}return"receive"===a.type?new bS(bC,[],!0):"fallback"===a.type?new bS(bC,[bL.from("bytes")],"payable"===a.stateMutability):void n(!1,"invalid fallback description","obj",a)}static isFragment(a){return a&&a[bD]===bI}}class bT extends bN{constant;outputs;stateMutability;payable;gas;constructor(a,b,c,d,e,f){super(a,"function",b,d),Object.defineProperty(this,bD,{value:bJ}),h(this,{constant:"view"===c||"pure"===c,gas:f,outputs:e=Object.freeze(e.slice()),payable:"payable"===c,stateMutability:c})}get selector(){return bb(this.format("sighash")).substring(0,10)}format(a){if(null==a&&(a="sighash"),"json"===a)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(b=>JSON.parse(b.format(a))),outputs:this.outputs.map(b=>JSON.parse(b.format(a)))});let b=[];return"sighash"!==a&&b.push("function"),b.push(this.name+bO(a,this.inputs)),"sighash"!==a&&("nonpayable"!==this.stateMutability&&b.push(this.stateMutability),this.outputs&&this.outputs.length&&(b.push("returns"),b.push(bO(a,this.outputs))),null!=this.gas&&b.push(`@${this.gas.toString()}`)),b.join(" ")}static getSelector(a,b){return new bT(bC,a,"view",b=(b||[]).map(a=>bL.from(a)),[],null).selector}static from(a){if(bT.isFragment(a))return a;if("string"==typeof a)try{return bT.from(bs(a))}catch(b){n(!1,"invalid function fragment","obj",a)}else if(a instanceof br){let b=bu("function",a),c=bx(a),d=bw(a),e=[];bv(a,bc(["returns"])).has("returns")&&(e=bx(a));let f=by(a);return bz(a),new bT(bC,b,d,c,e,f)}let b=a.stateMutability;return null==b&&(b="payable","boolean"==typeof a.constant?(b="view",!a.constant&&(b="payable","boolean"!=typeof a.payable||a.payable||(b="nonpayable"))):"boolean"!=typeof a.payable||a.payable||(b="nonpayable")),new bT(bC,a.name,b,a.inputs?a.inputs.map(bL.from):[],a.outputs?a.outputs.map(bL.from):[],null!=a.gas?a.gas:null)}static isFragment(a){return a&&a[bD]===bJ}}class bU extends bN{constructor(a,b,c){super(a,"struct",b,c),Object.defineProperty(this,bD,{value:bK})}format(){throw Error("@TODO")}static from(a){if("string"==typeof a)try{return bU.from(bs(a))}catch(b){n(!1,"invalid struct fragment","obj",a)}else if(a instanceof br){let b=bu("struct",a),c=bx(a);return bz(a),new bU(bC,b,c)}return new bU(bC,a.name,a.inputs?a.inputs.map(bL.from):[])}static isFragment(a){return a&&a[bD]===bK}}let bV=new Map;bV.set(0,"GENERIC_PANIC"),bV.set(1,"ASSERT_FALSE"),bV.set(17,"OVERFLOW"),bV.set(18,"DIVIDE_BY_ZERO"),bV.set(33,"ENUM_RANGE_ERROR"),bV.set(34,"BAD_STORAGE_DATA"),bV.set(49,"STACK_UNDERFLOW"),bV.set(50,"ARRAY_RANGE_ERROR"),bV.set(65,"OUT_OF_MEMORY"),bV.set(81,"UNINITIALIZED_FUNCTION_CALL");let bW=new RegExp(/^bytes([0-9]*)$/),bX=new RegExp(/^(u?int)([0-9]*)$/),bY=null,bZ=1024;class b${#o(a){if(a.isArray())return new aW(this.#o(a.arrayChildren),a.arrayLength,a.name);if(a.isTuple())return new ba(a.components.map(a=>this.#o(a)),a.name);switch(a.baseType){case"address":return new aS(a.name);case"bool":return new aX(a.name);case"string":return new a9(a.name);case"bytes":return new aZ(a.name);case"":return new a0(a.name)}let b=a.type.match(bX);if(b){let c=parseInt(b[2]||"256");return n(0!==c&&c<=256&&c%8==0,"invalid "+b[1]+" bit length","param",a),new a4(c/8,"int"===b[1],a.name)}if(b=a.type.match(bW)){let c=parseInt(b[1]);return n(0!==c&&c<=32,"invalid bytes length","param",a),new a$(c,a.name)}n(!1,"invalid type","type",a.type)}getDefaultValue(a){return new ba(a.map(a=>this.#o(bL.from(a))),"_").defaultValue()}encode(a,b){o(b.length,a.length,"types/values length mismatch");let c=new ba(a.map(a=>this.#o(bL.from(a))),"_"),d=new Z;return c.encode(d,b),d.data}decode(a,b,c){return new ba(a.map(a=>this.#o(bL.from(a))),"_").decode(new $(b,c,bZ))}static _setDefaultMaxInflation(a){n("number"==typeof a&&Number.isInteger(a),"invalid defaultMaxInflation factor","value",a),bZ=a}static defaultAbiCoder(){return null==bY&&(bY=new b$),bY}static getBuiltinCallException(a,b,c){return function(a,b,c,d){let e="missing revert data",f=null,g=null;if(c){e="execution reverted";let a=s(c);if(c=x(c),0===a.length)e+=" (no data present; likely require(false) occurred",f="require(false)";else if(a.length%32!=4)e+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===x(a.slice(0,4)))try{f=d.decode(["string"],a.slice(4))[0],g={signature:"Error(string)",name:"Error",args:[f]},e+=`: ${JSON.stringify(f)}`}catch(a){e+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===x(a.slice(0,4)))try{let b=Number(d.decode(["uint256"],a.slice(4))[0]);g={signature:"Panic(uint256)",name:"Panic",args:[b]},f=`Panic due to ${bV.get(b)||"UNKNOWN"}(${b})`,e+=`: ${f}`}catch(a){e+=" (could not decode panic code)"}else e+=" (unknown custom error)"}let h={to:b.to?aM(b.to):null,data:b.data||"0x"};return b.from&&(h.from=aM(b.from)),l(e,"CALL_EXCEPTION",{action:a,data:c,reason:f,transaction:h,invocation:null,revert:g})}(a,b,c,b$.defaultAbiCoder())}}function b_(a){return a&&"function"==typeof a.getAddress}function b0(a){try{return aM(a),!0}catch(a){}return!1}async function b1(a,b){let c=await b;return(null==c||"0x0000000000000000000000000000000000000000"===c)&&(m("string"!=typeof a,"unconfigured name","UNCONFIGURED_NAME",{value:a}),n(!1,"invalid AddressLike value; did not resolve to a value address","target",a)),aM(c)}function b2(a,b){return"string"==typeof a?a.match(/^0x[0-9a-f]{40}$/i)?aM(a):(m(null!=b,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),b1(a,b.resolveName(a))):b_(a)?b1(a,a.getAddress()):a&&"function"==typeof a.then?b1(a,a):void n(!1,"unsupported addressable value","target",a)}let b3=new Uint8Array(32);b3.fill(0);let b4=BigInt(-1),b5=BigInt(0),b6=BigInt(1),b7=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),b8=N(b6,32),b9=N(b5,32);function ca(a){return function(b){return n("string"==typeof b,`invalid domain value for ${JSON.stringify(a)}`,`domain.${a}`,b),b}}ca("name"),ca("version");function cb(a,b){return{address:aM(a),storageKeys:b.map((a,b)=>(n(u(a,32),"invalid slot",`storageKeys[${b}]`,a),a.toLowerCase()))}}function cc(a){if(Array.isArray(a))return a.map((b,c)=>Array.isArray(b)?(n(2===b.length,"invalid slot set",`value[${c}]`,b),cb(b[0],b[1])):(n(null!=b&&"object"==typeof b,"invalid address-slot set","value",a),cb(b.address,b.storageKeys)));n(null!=a&&"object"==typeof a,"invalid access list","value",a);let b=Object.keys(a).map(b=>{let c=a[b].reduce((a,b)=>(a[b]=!0,a),{});return cb(b,Object.keys(c).sort())});return b.sort((a,b)=>a.address.localeCompare(b.address)),b}let cd="0x0000000000000000000000000000000000000000000000000000000000000000",ce=BigInt(0),cf=BigInt(1),cg=BigInt(2),ch=BigInt(27),ci=BigInt(28),cj=BigInt(35),ck=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cl=ck/cg,cm=Symbol.for("nodejs.util.inspect.custom"),cn={};function co(a){return C(O(a),32)}class cp{#p;#q;#r;#s;get r(){return this.#p}set r(a){n(32===z(a),"invalid r","value",a),this.#p=x(a)}get s(){return n(8>parseInt(this.#q.substring(0,3)),"non-canonical s; use ._s","s",this.#q),this.#q}set s(a){n(32===z(a),"invalid s","value",a),this.#q=x(a)}get _s(){return this.#q}isValid(){return BigInt(this.#q)<=cl}get v(){return this.#r}set v(a){let b=M(a,"value");n(27===b||28===b,"invalid v","v",a),this.#r=b}get networkV(){return this.#s}get legacyChainId(){let a=this.networkV;return null==a?null:cp.getChainId(a)}get yParity(){return+(27!==this.v)}get yParityAndS(){let a=s(this.s);return this.yParity&&(a[0]|=128),x(a)}get compactSerialized(){return y([this.r,this.yParityAndS])}get serialized(){return y([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(a,b,c,d){q(a,cn,"Signature"),this.#p=b,this.#q=c,this.#r=d,this.#s=null}getCanonical(){if(this.isValid())return this;let a=ck-BigInt(this._s),b=55-this.v,c=new cp(cn,this.r,co(a),b);return this.networkV&&(c.#s=this.networkV),c}clone(){let a=new cp(cn,this.r,this._s,this.v);return this.networkV&&(a.#s=this.networkV),a}toJSON(){let a=this.networkV;return{_type:"signature",networkV:null!=a?a.toString():null,r:this.r,s:this._s,v:this.v}}[cm](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(a){let b=I(a,"v");return b==ch||b==ci?ce:(n(b>=cj,"invalid EIP-155 v","v",a),(b-cj)/cg)}static getChainIdV(a,b){return I(a)*cg+BigInt(35+b-27)}static getNormalizedV(a){let b=I(a);return b===ce||b===ch?27:b===cf||b===ci?28:(n(b>=cj,"invalid v","v",a),b&cf?27:28)}static from(a){function b(b,c){n(b,c,"signature",a)}if(null==a)return new cp(cn,cd,cd,27);if("string"==typeof a){let c=s(a,"signature");if(64===c.length){let a=x(c.slice(0,32)),b=c.slice(32,64),d=128&b[0]?28:27;return b[0]&=127,new cp(cn,a,x(b),d)}if(65===c.length){let a=x(c.slice(0,32)),b=x(c.slice(32,64)),d=cp.getNormalizedV(c[64]);return new cp(cn,a,b,d)}b(!1,"invalid raw signature length")}if(a instanceof cp)return a.clone();let c=a.r;b(null!=c,"missing r");let d=co(c),e=function(a,c){if(null!=a)return co(a);if(null!=c){b(u(c,32),"invalid yParityAndS");let a=s(c);return a[0]&=127,x(a)}b(!1,"missing s")}(a.s,a.yParityAndS),{networkV:f,v:g}=function(a,c,d){if(null!=a){let b=I(a);return{networkV:b>=cj?b:void 0,v:cp.getNormalizedV(b)}}if(null!=c)return b(u(c,32),"invalid yParityAndS"),{v:128&s(c)[0]?28:27};if(null!=d){switch(M(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}b(!1,"invalid yParity")}b(!1,"missing v")}(a.v,a.yParityAndS,a.yParity),h=new cp(cn,d,e,g);return f&&(h.#s=f),b(null==a.yParity||M(a.yParity,"sig.yParity")===h.yParity,"yParity mismatch"),b(null==a.yParityAndS||a.yParityAndS===h.yParityAndS,"yParityAndS mismatch"),h}}function cq(a){return{address:aM(a.address),nonce:I(null!=a.nonce?a.nonce:0),chainId:I(null!=a.chainId?a.chainId:0),signature:cp.from(a.signature)}}let cr=require("http"),cs=require("https"),ct=require("zlib");function cu(a){return async function(b,c){m(null==c||!c.cancelled,"request cancelled before sending","CANCELLED");let d=b.url.split(":")[0].toLowerCase();m("http"===d||"https"===d,`unsupported protocol ${d}`,"UNSUPPORTED_OPERATION",{info:{protocol:d},operation:"request"}),m("https"===d||!b.credentials||b.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let e={method:b.method,headers:Object.assign({},b.headers)};a&&a.agent&&(e.agent=a.agent);let f=null;try{e.abort=(f=new AbortController).signal}catch(a){console.log(a)}let g=("http"===d?cr:cs).request(b.url,e);g.setTimeout(b.timeout);let h=b.body;return h&&g.write(Buffer.from(h)),g.end(),new Promise((a,d)=>{c&&c.addListener(()=>{f&&f.abort(),d(l("request cancelled","CANCELLED"))}),g.on("timeout",()=>{d(l("request timeout","TIMEOUT"))}),g.once("response",e=>{let f=e.statusCode||0,g=e.statusMessage||"",h=Object.keys(e.headers||{}).reduce((a,b)=>{let c=e.headers[b]||"";return Array.isArray(c)&&(c=c.join(", ")),a[b]=c,a},{}),i=null;e.on("data",a=>{if(c)try{c.checkSignal()}catch(a){return d(a)}if(null==i)i=a;else{let b=new Uint8Array(i.length+a.length);b.set(i,0),b.set(a,i.length),i=b}}),e.on("end",()=>{try{"gzip"===h["content-encoding"]&&i&&(i=s((0,ct.gunzipSync)(i))),a({statusCode:f,statusMessage:g,headers:h,body:i})}catch(a){d(l("bad response data","SERVER_ERROR",{request:b,info:{response:e,error:a}}))}}),e.on("error",a=>{a.response={statusCode:f,statusMessage:g,headers:h,body:i},d(a)})}),g.on("error",a=>{d(a)})})}}cu({});let cv=cu(),cw=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),cx=RegExp("^ipfs://(ipfs/)?(.*)$","i"),cy=!1;async function cz(a,b){try{var c,d;let b=a.match(cw);if(!b)throw Error("invalid data");return new cG(200,"OK",{"content-type":b[1]||"text/plain"},b[2]?(c=b[3],t(Buffer.from(c,"base64"))):(d=b[3],a7(d.replace(/%([0-9a-f][0-9a-f])/gi,(a,b)=>String.fromCharCode(parseInt(b,16))))))}catch(b){return new cG(599,"BAD REQUEST (invalid data: URI)",{},null,new cF(a))}}function cA(a){return async function(b,c){try{let c=b.match(cx);if(!c)throw Error("invalid link");return new cF(`${a}${c[2]}`)}catch(a){return new cG(599,"BAD REQUEST (invalid IPFS URI)",{},null,new cF(b))}}}let cB={data:cz,ipfs:cA("https://gateway.ipfs.io/ipfs/")},cC=new WeakMap;class cD{#t;#u;constructor(a){this.#t=[],this.#u=!1,cC.set(a,()=>{if(!this.#u){for(let a of(this.#u=!0,this.#t))setTimeout(()=>{a()},0);this.#t=[]}})}addListener(a){m(!this.#u,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#t.push(a)}get cancelled(){return this.#u}checkSignal(){m(!this.cancelled,"cancelled","CANCELLED",{})}}function cE(a){if(null==a)throw Error("missing signal; should not happen");return a.checkSignal(),a}class cF{#v;#w;#x;#y;#z;#A;#B;#C;#D;#E;#F;#G;#H;#I;#J;get url(){return this.#A}set url(a){this.#A=String(a)}get body(){return null==this.#B?null:new Uint8Array(this.#B)}set body(a){if(null==a)this.#B=void 0,this.#C=void 0;else if("string"==typeof a)this.#B=a7(a),this.#C="text/plain";else if(a instanceof Uint8Array)this.#B=a,this.#C="application/octet-stream";else if("object"==typeof a)this.#B=a7(JSON.stringify(a)),this.#C="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#B}get method(){return this.#y?this.#y:this.hasBody()?"POST":"GET"}set method(a){null==a&&(a=""),this.#y=String(a).toUpperCase()}get headers(){var a;let b=Object.assign({},this.#x);return this.#D&&(b.authorization=`Basic ${a=a7(this.#D),Buffer.from(s(a)).toString("base64")}`),this.allowGzip&&(b["accept-encoding"]="gzip"),null==b["content-type"]&&this.#C&&(b["content-type"]=this.#C),this.body&&(b["content-length"]=String(this.body.length)),b}getHeader(a){return this.headers[a.toLowerCase()]}setHeader(a,b){this.#x[String(a).toLowerCase()]=String(b)}clearHeaders(){this.#x={}}[Symbol.iterator](){let a=this.headers,b=Object.keys(a),c=0;return{next:()=>{if(c<b.length){let d=b[c++];return{value:[d,a[d]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#D||null}setCredentials(a,b){n(!a.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#D=`${a}:${b}`}get allowGzip(){return this.#w}set allowGzip(a){this.#w=!!a}get allowInsecureAuthentication(){return!!this.#v}set allowInsecureAuthentication(a){this.#v=!!a}get timeout(){return this.#z}set timeout(a){n(a>=0,"timeout must be non-zero","timeout",a),this.#z=a}get preflightFunc(){return this.#E||null}set preflightFunc(a){this.#E=a}get processFunc(){return this.#F||null}set processFunc(a){this.#F=a}get retryFunc(){return this.#G||null}set retryFunc(a){this.#G=a}get getUrlFunc(){return this.#J||cv}set getUrlFunc(a){this.#J=a}constructor(a){this.#A=String(a),this.#v=!1,this.#w=!0,this.#x={},this.#y="",this.#z=3e5,this.#I={slotInterval:250,maxAttempts:12},this.#J=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#B?x(this.#B):"null"}>`}setThrottleParams(a){null!=a.slotInterval&&(this.#I.slotInterval=a.slotInterval),null!=a.maxAttempts&&(this.#I.maxAttempts=a.maxAttempts)}async #K(a,b,c,d,e){var f;if(a>=this.#I.maxAttempts)return e.makeServerError("exceeded maximum retry limit");m(cH()<=b,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:d}),c>0&&await (f=c,new Promise(a=>setTimeout(a,f)));let g=this.clone(),h=(g.url.split(":")[0]||"").toLowerCase();if(h in cB){let a=await cB[h](g.url,cE(d.#H));if(a instanceof cG){let b=a;if(this.processFunc){cE(d.#H);try{b=await this.processFunc(g,b)}catch(a){(null==a.throttle||"number"!=typeof a.stall)&&b.makeServerError("error in post-processing function",a).assertOk()}}return b}g=a}this.preflightFunc&&(g=await this.preflightFunc(g));let i=await this.getUrlFunc(g,cE(d.#H)),j=new cG(i.statusCode,i.statusMessage,i.headers,i.body,d);if(301===j.statusCode||302===j.statusCode){try{let c=j.headers.location||"";return g.redirect(c).#K(a+1,b,0,d,j)}catch(a){}return j}if(429===j.statusCode&&(null==this.retryFunc||await this.retryFunc(g,j,a))){let c=j.headers["retry-after"],e=this.#I.slotInterval*Math.trunc(Math.random()*Math.pow(2,a));return"string"==typeof c&&c.match(/^[1-9][0-9]*$/)&&(e=parseInt(c)),g.clone().#K(a+1,b,e,d,j)}if(this.processFunc){cE(d.#H);try{j=await this.processFunc(g,j)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&j.makeServerError("error in post-processing function",e).assertOk();let c=this.#I.slotInterval*Math.trunc(Math.random()*Math.pow(2,a));return e.stall>=0&&(c=e.stall),g.clone().#K(a+1,b,c,d,j)}}return j}send(){return m(null==this.#H,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#H=new cD(this),this.#K(0,cH()+this.timeout,0,this,new cG(0,"",{},null,this))}cancel(){m(null!=this.#H,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let a=cC.get(this);if(!a)throw Error("missing signal; should not happen");a()}redirect(a){let b=this.url.split(":")[0].toLowerCase(),c=a.split(":")[0].toLowerCase();m("GET"===this.method&&("https"!==b||"http"!==c)&&a.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(a)})`});let d=new cF(a);return d.method="GET",d.allowGzip=this.allowGzip,d.timeout=this.timeout,d.#x=Object.assign({},this.#x),this.#B&&(d.#B=new Uint8Array(this.#B)),d.#C=this.#C,d}clone(){let a=new cF(this.url);return a.#y=this.#y,this.#B&&(a.#B=this.#B),a.#C=this.#C,a.#x=Object.assign({},this.#x),a.#D=this.#D,this.allowGzip&&(a.allowGzip=!0),a.timeout=this.timeout,this.allowInsecureAuthentication&&(a.allowInsecureAuthentication=!0),a.#E=this.#E,a.#F=this.#F,a.#G=this.#G,a.#I=Object.assign({},this.#I),a.#J=this.#J,a}static lockConfig(){cy=!0}static getGateway(a){return cB[a.toLowerCase()]||null}static registerGateway(a,b){if("http"===(a=a.toLowerCase())||"https"===a)throw Error(`cannot intercept ${a}; use registerGetUrl`);if(cy)throw Error("gateways locked");cB[a]=b}static registerGetUrl(a){if(cy)throw Error("gateways locked");cv=a}static createGetUrlFunc(a){return cu(a)}static createDataGateway(){return cz}static createIpfsGatewayFunc(a){return cA(a)}}class cG{#L;#M;#x;#B;#N;#O;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#B?x(this.#B):"null"}>`}get statusCode(){return this.#L}get statusMessage(){return this.#M}get headers(){return Object.assign({},this.#x)}get body(){return null==this.#B?null:new Uint8Array(this.#B)}get bodyText(){try{return null==this.#B?"":a8(this.#B)}catch(a){m(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(a){m(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let a=this.headers,b=Object.keys(a),c=0;return{next:()=>{if(c<b.length){let d=b[c++];return{value:[d,a[d]],done:!1}}return{value:void 0,done:!0}}}}constructor(a,b,c,d,e){this.#L=a,this.#M=b,this.#x=Object.keys(c).reduce((a,b)=>(a[b.toLowerCase()]=String(c[b]),a),{}),this.#B=null==d?null:new Uint8Array(d),this.#N=e||null,this.#O={message:""}}makeServerError(a,b){let c;a?c=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${a})`:(a=`${this.statusCode} ${this.statusMessage}`,c=`CLIENT ESCALATED SERVER ERROR (${a})`);let d=new cG(599,c,this.headers,this.body,this.#N||void 0);return d.#O={message:a,error:b},d}throwThrottleError(a,b){null==b?b=-1:n(Number.isInteger(b)&&b>=0,"invalid stall timeout","stall",b);let c=Error(a||"throttling requests");throw h(c,{stall:b,throttle:!0}),c}getHeader(a){return this.headers[a.toLowerCase()]}hasBody(){return null!=this.#B}get request(){return this.#N}ok(){return""===this.#O.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:a,error:b}=this.#O;""===a&&(a=`server response ${this.statusCode} ${this.statusMessage}`);let c=null;this.request&&(c=this.request.url);let d=null;try{this.#B&&(d=a8(this.#B))}catch(a){}m(!1,a,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:b,info:{requestUrl:c,responseBody:d,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function cH(){return new Date().getTime()}let cI="0x0000000000000000000000000000000000000000";class cJ{fragment;name;signature;topic;args;constructor(a,b,c){let d=a.name,e=a.format();h(this,{fragment:a,name:d,signature:e,topic:b,args:c})}}class cK{fragment;name;args;signature;selector;value;constructor(a,b,c,d){let e=a.name,f=a.format();h(this,{fragment:a,name:e,args:c,signature:f,selector:b,value:d})}}class cL{fragment;name;args;signature;selector;constructor(a,b,c){let d=a.name,e=a.format();h(this,{fragment:a,name:d,args:c,signature:e,selector:b})}}class cM{hash;_isIndexed;static isIndexed(a){return!!(a&&a._isIndexed)}constructor(a){h(this,{hash:a,_isIndexed:!0})}}let cN={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},cO={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:a=>`reverted with reason string ${JSON.stringify(a)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:a=>{let b="unknown panic code";return a>=0&&a<=255&&cN[a.toString()]&&(b=cN[a.toString()]),`reverted with panic code 0x${a.toString(16)} (${b})`}}};class cP{fragments;deploy;fallback;receive;#P;#Q;#R;#S;constructor(a){let b=[];b="string"==typeof a?JSON.parse(a):a,this.#R=new Map,this.#P=new Map,this.#Q=new Map;let c=[];for(let a of b)try{c.push(bM.from(a))}catch(b){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,b.message)}h(this,{fragments:Object.freeze(c)});let d=null,e=!1;this.#S=this.getAbiCoder(),this.fragments.forEach((a,b)=>{let c;switch(a.type){case"constructor":if(this.deploy)return void console.log("duplicate definition - constructor");h(this,{deploy:a});return;case"fallback":0===a.inputs.length?e=!0:(n(!d||a.payable!==d.payable,"conflicting fallback fragments",`fragments[${b}]`,a),e=(d=a).payable);return;case"function":c=this.#R;break;case"event":c=this.#Q;break;case"error":c=this.#P;break;default:return}let f=a.format();c.has(f)||c.set(f,a)}),this.deploy||h(this,{deploy:bR.from("constructor()")}),h(this,{fallback:d,receive:e})}format(a){let b=a?"minimal":"full";return this.fragments.map(a=>a.format(b))}formatJson(){return JSON.stringify(this.fragments.map(a=>a.format("json")).map(a=>JSON.parse(a)))}getAbiCoder(){return b$.defaultAbiCoder()}#T(a,b,c){if(u(a)){let b=a.toLowerCase();for(let a of this.#R.values())if(b===a.selector)return a;return null}if(-1===a.indexOf("(")){let d=[];for(let[b,c]of this.#R)b.split("(")[0]===a&&d.push(c);if(b){let a=b.length>0?b[b.length-1]:null,c=b.length,e=!0;aR.isTyped(a)&&"overrides"===a.type&&(e=!1,c--);for(let a=d.length-1;a>=0;a--){let b=d[a].inputs.length;b===c||e&&b===c-1||d.splice(a,1)}for(let a=d.length-1;a>=0;a--){let c=d[a].inputs;for(let e=0;e<b.length;e++)if(aR.isTyped(b[e])){if(e>=c.length){if("overrides"===b[e].type)continue;d.splice(a,1);break}if(b[e].type!==c[e].baseType){d.splice(a,1);break}}}}if(1===d.length&&b&&b.length!==d[0].inputs.length){let a=b[b.length-1];(null==a||Array.isArray(a)||"object"!=typeof a)&&d.splice(0,1)}if(0===d.length)return null;if(d.length>1&&c){let b=d.map(a=>JSON.stringify(a.format())).join(", ");n(!1,`ambiguous function description (i.e. matches ${b})`,"key",a)}return d[0]}let d=this.#R.get(bT.from(a).format());return d||null}getFunctionName(a){let b=this.#T(a,null,!1);return n(b,"no matching function","key",a),b.name}hasFunction(a){return!!this.#T(a,null,!1)}getFunction(a,b){return this.#T(a,b||null,!0)}forEachFunction(a){let b=Array.from(this.#R.keys());b.sort((a,b)=>a.localeCompare(b));for(let c=0;c<b.length;c++){let d=b[c];a(this.#R.get(d),c)}}#U(a,b,c){if(u(a)){let b=a.toLowerCase();for(let a of this.#Q.values())if(b===a.topicHash)return a;return null}if(-1===a.indexOf("(")){let d=[];for(let[b,c]of this.#Q)b.split("(")[0]===a&&d.push(c);if(b){for(let a=d.length-1;a>=0;a--)d[a].inputs.length<b.length&&d.splice(a,1);for(let a=d.length-1;a>=0;a--){let c=d[a].inputs;for(let e=0;e<b.length;e++)if(aR.isTyped(b[e])&&b[e].type!==c[e].baseType){d.splice(a,1);break}}}if(0===d.length)return null;if(d.length>1&&c){let b=d.map(a=>JSON.stringify(a.format())).join(", ");n(!1,`ambiguous event description (i.e. matches ${b})`,"key",a)}return d[0]}let d=this.#Q.get(bQ.from(a).format());return d||null}getEventName(a){let b=this.#U(a,null,!1);return n(b,"no matching event","key",a),b.name}hasEvent(a){return!!this.#U(a,null,!1)}getEvent(a,b){return this.#U(a,b||null,!0)}forEachEvent(a){let b=Array.from(this.#Q.keys());b.sort((a,b)=>a.localeCompare(b));for(let c=0;c<b.length;c++){let d=b[c];a(this.#Q.get(d),c)}}getError(a,b){if(u(a)){let b=a.toLowerCase();if(cO[b])return bP.from(cO[b].signature);for(let a of this.#P.values())if(b===a.selector)return a;return null}if(-1===a.indexOf("(")){let b=[];for(let[c,d]of this.#P)c.split("(")[0]===a&&b.push(d);if(0===b.length)return"Error"===a?bP.from("error Error(string)"):"Panic"===a?bP.from("error Panic(uint256)"):null;if(b.length>1){let c=b.map(a=>JSON.stringify(a.format())).join(", ");n(!1,`ambiguous error description (i.e. ${c})`,"name",a)}return b[0]}if("Error(string)"===(a=bP.from(a).format()))return bP.from("error Error(string)");if("Panic(uint256)"===a)return bP.from("error Panic(uint256)");let c=this.#P.get(a);return c||null}forEachError(a){let b=Array.from(this.#P.keys());b.sort((a,b)=>a.localeCompare(b));for(let c=0;c<b.length;c++){let d=b[c];a(this.#P.get(d),c)}}_decodeParams(a,b){return this.#S.decode(a,b)}_encodeParams(a,b){return this.#S.encode(a,b)}encodeDeploy(a){return this._encodeParams(this.deploy.inputs,a||[])}decodeErrorResult(a,b){if("string"==typeof a){let b=this.getError(a);n(b,"unknown error","fragment",a),a=b}return n(A(b,0,4)===a.selector,`data signature does not match error ${a.name}.`,"data",b),this._decodeParams(a.inputs,A(b,4))}encodeErrorResult(a,b){if("string"==typeof a){let b=this.getError(a);n(b,"unknown error","fragment",a),a=b}return y([a.selector,this._encodeParams(a.inputs,b||[])])}decodeFunctionData(a,b){if("string"==typeof a){let b=this.getFunction(a);n(b,"unknown function","fragment",a),a=b}return n(A(b,0,4)===a.selector,`data signature does not match function ${a.name}.`,"data",b),this._decodeParams(a.inputs,A(b,4))}encodeFunctionData(a,b){if("string"==typeof a){let b=this.getFunction(a);n(b,"unknown function","fragment",a),a=b}return y([a.selector,this._encodeParams(a.inputs,b||[])])}decodeFunctionResult(a,b){if("string"==typeof a){let b=this.getFunction(a);n(b,"unknown function","fragment",a),a=b}let c="invalid length for result data",d=t(b);if(d.length%32==0)try{return this.#S.decode(a.outputs,d)}catch(a){c="could not decode result data"}m(!1,c,"BAD_DATA",{value:x(d),info:{method:a.name,signature:a.format()}})}makeError(a,b){let c=s(a,"data"),d=b$.getBuiltinCallException("call",b,c);if(d.message.startsWith("execution reverted (unknown custom error)")){let a=x(c.slice(0,4)),b=this.getError(a);if(b)try{let a=this.#S.decode(b.inputs,c.slice(4));d.revert={name:b.name,signature:b.format(),args:a},d.reason=d.revert.signature,d.message=`execution reverted: ${d.reason}`}catch(a){d.message="execution reverted (coult not decode custom error)"}}let e=this.parseTransaction(b);return e&&(d.invocation={method:e.name,signature:e.signature,args:e.args}),d}encodeFunctionResult(a,b){if("string"==typeof a){let b=this.getFunction(a);n(b,"unknown function","fragment",a),a=b}return x(this.#S.encode(a.outputs,b||[]))}encodeFilterTopics(a,b){if("string"==typeof a){let b=this.getEvent(a);n(b,"unknown event","eventFragment",a),a=b}m(b.length<=a.inputs.length,`too many arguments for ${a.format()}`,"UNEXPECTED_ARGUMENT",{count:b.length,expectedCount:a.inputs.length});let c=[];a.anonymous||c.push(a.topicHash);let d=(a,b)=>{if("string"===a.type)return bb(b);if("bytes"===a.type)return aG(x(b));if("bool"===a.type&&"boolean"==typeof b)b=b?"0x01":"0x00";else if(a.type.match(/^u?int/))b=N(b);else if(a.type.match(/^bytes/))b=B(b,32,!1);else"address"===a.type&&this.#S.encode(["address"],[b]);return C(x(b),32)};for(b.forEach((b,e)=>{let f=a.inputs[e];if(!f.indexed)return void n(null==b,"cannot filter non-indexed parameters; must be null","contract."+f.name,b);null==b?c.push(null):"array"===f.baseType||"tuple"===f.baseType?n(!1,"filtering with tuples or arrays not supported","contract."+f.name,b):Array.isArray(b)?c.push(b.map(a=>d(f,a))):c.push(d(f,b))});c.length&&null===c[c.length-1];)c.pop();return c}encodeEventLog(a,b){if("string"==typeof a){let b=this.getEvent(a);n(b,"unknown event","eventFragment",a),a=b}let c=[],d=[],e=[];return a.anonymous||c.push(a.topicHash),n(b.length===a.inputs.length,"event arguments/values mismatch","values",b),a.inputs.forEach((a,f)=>{let g=b[f];if(a.indexed)if("string"===a.type)c.push(bb(g));else if("bytes"===a.type)c.push(aG(g));else if("tuple"===a.baseType||"array"===a.baseType)throw Error("not implemented");else c.push(this.#S.encode([a.type],[g]));else d.push(a),e.push(g)}),{data:this.#S.encode(d,e),topics:c}}decodeEventLog(a,b,c){if("string"==typeof a){let b=this.getEvent(a);n(b,"unknown event","eventFragment",a),a=b}if(null!=c&&!a.anonymous){let b=a.topicHash;n(u(c[0],32)&&c[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",c[0]),c=c.slice(1)}let d=[],e=[],f=[];a.inputs.forEach((a,b)=>{a.indexed?"string"===a.type||"bytes"===a.type||"tuple"===a.baseType||"array"===a.baseType?(d.push(bL.from({type:"bytes32",name:a.name})),f.push(!0)):(d.push(a),f.push(!1)):(e.push(a),f.push(!1))});let g=null!=c?this.#S.decode(d,y(c)):null,h=this.#S.decode(e,b,!0),i=[],j=[],k=0,l=0;return a.inputs.forEach((a,b)=>{let c=null;if(a.indexed)if(null==g)c=new cM(null);else if(f[b])c=new cM(g[l++]);else try{c=g[l++]}catch(a){c=a}else try{c=h[k++]}catch(a){c=a}i.push(c),j.push(a.name||null)}),W.fromItems(i,j)}parseTransaction(a){let b=s(a.data,"tx.data"),c=I(null!=a.value?a.value:0,"tx.value"),d=this.getFunction(x(b.slice(0,4)));if(!d)return null;let e=this.#S.decode(d.inputs,b.slice(4));return new cK(d,d.selector,e,c)}parseCallResult(a){throw Error("@TODO")}parseLog(a){let b=this.getEvent(a.topics[0]);return!b||b.anonymous?null:new cJ(b,b.topicHash,this.decodeEventLog(b,a.data,a.topics))}parseError(a){let b=x(a),c=this.getError(A(b,0,4));if(!c)return null;let d=this.#S.decode(c.inputs,A(b,4));return new cL(c,c.selector,d)}static from(a){return a instanceof cP?a:new cP("string"==typeof a?JSON.parse(a):"function"==typeof a.formatJson?a.formatJson():"function"==typeof a.format?a.format("json"):a)}}let cQ=BigInt(0);function cR(a){return null==a?null:a}function cS(a){return null==a?null:a.toString()}function cT(a){let b={};for(let c of(a.to&&(b.to=a.to),a.from&&(b.from=a.from),a.data&&(b.data=x(a.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))c in a&&null!=a[c]&&(b[c]=I(a[c],`request.${c}`));for(let c of"type,nonce".split(/,/))c in a&&null!=a[c]&&(b[c]=M(a[c],`request.${c}`));return a.accessList&&(b.accessList=cc(a.accessList)),a.authorizationList&&(b.authorizationList=a.authorizationList.slice()),"blockTag"in a&&(b.blockTag=a.blockTag),"enableCcipRead"in a&&(b.enableCcipRead=!!a.enableCcipRead),"customData"in a&&(b.customData=a.customData),"blobVersionedHashes"in a&&a.blobVersionedHashes&&(b.blobVersionedHashes=a.blobVersionedHashes.slice()),"kzg"in a&&(b.kzg=a.kzg),"blobWrapperVersion"in a&&(b.blobWrapperVersion=a.blobWrapperVersion),"blobs"in a&&a.blobs&&(b.blobs=a.blobs.map(a=>v(a)?x(a):Object.assign({},a))),b}class cU{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#V;constructor(a,b){this.#V=a.transactions.map(a=>"string"!=typeof a?new cX(a,b):a),h(this,{provider:b,hash:cR(a.hash),number:a.number,timestamp:a.timestamp,parentHash:a.parentHash,parentBeaconBlockRoot:a.parentBeaconBlockRoot,nonce:a.nonce,difficulty:a.difficulty,gasLimit:a.gasLimit,gasUsed:a.gasUsed,blobGasUsed:a.blobGasUsed,excessBlobGas:a.excessBlobGas,miner:a.miner,prevRandao:cR(a.prevRandao),extraData:a.extraData,baseFeePerGas:cR(a.baseFeePerGas),stateRoot:a.stateRoot,receiptsRoot:a.receiptsRoot})}get transactions(){return this.#V.map(a=>"string"==typeof a?a:a.hash)}get prefetchedTransactions(){let a=this.#V.slice();return 0===a.length?[]:(m("object"==typeof a[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),a)}toJSON(){let{baseFeePerGas:a,difficulty:b,extraData:c,gasLimit:d,gasUsed:e,hash:f,miner:g,prevRandao:h,nonce:i,number:j,parentHash:k,parentBeaconBlockRoot:l,stateRoot:m,receiptsRoot:n,timestamp:o,transactions:p}=this;return{_type:"Block",baseFeePerGas:cS(a),difficulty:cS(b),extraData:c,gasLimit:cS(d),gasUsed:cS(e),blobGasUsed:cS(this.blobGasUsed),excessBlobGas:cS(this.excessBlobGas),hash:f,miner:g,prevRandao:h,nonce:i,number:j,parentHash:k,timestamp:o,parentBeaconBlockRoot:l,stateRoot:m,receiptsRoot:n,transactions:p}}[Symbol.iterator](){let a=0,b=this.transactions;return{next:()=>a<this.length?{value:b[a++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#V.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(a){let b;if("number"==typeof a)b=this.#V[a];else{let c=a.toLowerCase();for(let a of this.#V)if("string"==typeof a){if(a!==c)continue;b=a;break}else{if(a.hash!==c)continue;b=a;break}}if(null==b)throw Error("no such tx");return"string"==typeof b?await this.provider.getTransaction(b):b}getPrefetchedTransaction(a){let b=this.prefetchedTransactions;if("number"==typeof a)return b[a];for(let c of(a=a.toLowerCase(),b))if(c.hash===a)return c;n(!1,"no matching transaction","indexOrHash",a)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){var a;if(!this.isMined())throw Error("");return a=this,{orphan:"drop-block",hash:a.hash,number:a.number}}}class cV{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(a,b){this.provider=b;let c=Object.freeze(a.topics.slice());h(this,{transactionHash:a.transactionHash,blockHash:a.blockHash,blockNumber:a.blockNumber,removed:a.removed,address:a.address,data:a.data,topics:c,index:a.index,transactionIndex:a.transactionIndex})}toJSON(){let{address:a,blockHash:b,blockNumber:c,data:d,index:e,removed:f,topics:g,transactionHash:h,transactionIndex:i}=this;return{_type:"log",address:a,blockHash:b,blockNumber:c,data:d,index:e,removed:f,topics:g,transactionHash:h,transactionIndex:i}}async getBlock(){let a=await this.provider.getBlock(this.blockHash);return m(!!a,"failed to find transaction","UNKNOWN_ERROR",{}),a}async getTransaction(){let a=await this.provider.getTransaction(this.transactionHash);return m(!!a,"failed to find transaction","UNKNOWN_ERROR",{}),a}async getTransactionReceipt(){let a=await this.provider.getTransactionReceipt(this.transactionHash);return m(!!a,"failed to find transaction receipt","UNKNOWN_ERROR",{}),a}removedEvent(){var a;return a=this,{orphan:"drop-log",log:{transactionHash:a.transactionHash,blockHash:a.blockHash,blockNumber:a.blockNumber,address:a.address,data:a.data,topics:Object.freeze(a.topics.slice()),index:a.index}}}}class cW{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#W;constructor(a,b){this.#W=Object.freeze(a.logs.map(a=>new cV(a,b)));let c=cQ;null!=a.effectiveGasPrice?c=a.effectiveGasPrice:null!=a.gasPrice&&(c=a.gasPrice),h(this,{provider:b,to:a.to,from:a.from,contractAddress:a.contractAddress,hash:a.hash,index:a.index,blockHash:a.blockHash,blockNumber:a.blockNumber,logsBloom:a.logsBloom,gasUsed:a.gasUsed,cumulativeGasUsed:a.cumulativeGasUsed,blobGasUsed:a.blobGasUsed,gasPrice:c,blobGasPrice:a.blobGasPrice,type:a.type,status:a.status,root:a.root})}get logs(){return this.#W}toJSON(){let{to:a,from:b,contractAddress:c,hash:d,index:e,blockHash:f,blockNumber:g,logsBloom:h,logs:i,status:j,root:k}=this;return{_type:"TransactionReceipt",blockHash:f,blockNumber:g,contractAddress:c,cumulativeGasUsed:cS(this.cumulativeGasUsed),from:b,gasPrice:cS(this.gasPrice),blobGasUsed:cS(this.blobGasUsed),blobGasPrice:cS(this.blobGasPrice),gasUsed:cS(this.gasUsed),hash:d,index:e,logs:i,logsBloom:h,root:k,status:j,to:a}}get length(){return this.logs.length}[Symbol.iterator](){let a=0;return{next:()=>a<this.length?{value:this.logs[a++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let a=await this.provider.getBlock(this.blockHash);if(null==a)throw Error("TODO");return a}async getTransaction(){let a=await this.provider.getTransaction(this.hash);if(null==a)throw Error("TODO");return a}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return cZ(this)}reorderedEvent(a){return m(!a||a.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),cY(this,a)}}class cX{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#X;constructor(a,b){this.provider=b,this.blockNumber=null!=a.blockNumber?a.blockNumber:null,this.blockHash=null!=a.blockHash?a.blockHash:null,this.hash=a.hash,this.index=a.index,this.type=a.type,this.from=a.from,this.to=a.to||null,this.gasLimit=a.gasLimit,this.nonce=a.nonce,this.data=a.data,this.value=a.value,this.gasPrice=a.gasPrice,this.maxPriorityFeePerGas=null!=a.maxPriorityFeePerGas?a.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=a.maxFeePerGas?a.maxFeePerGas:null,this.maxFeePerBlobGas=null!=a.maxFeePerBlobGas?a.maxFeePerBlobGas:null,this.chainId=a.chainId,this.signature=a.signature,this.accessList=null!=a.accessList?a.accessList:null,this.blobVersionedHashes=null!=a.blobVersionedHashes?a.blobVersionedHashes:null,this.authorizationList=null!=a.authorizationList?a.authorizationList:null,this.#X=-1}toJSON(){let{blockNumber:a,blockHash:b,index:c,hash:d,type:e,to:f,from:g,nonce:h,data:i,signature:j,accessList:k,blobVersionedHashes:l}=this;return{_type:"TransactionResponse",accessList:k,blockNumber:a,blockHash:b,blobVersionedHashes:l,chainId:cS(this.chainId),data:i,from:g,gasLimit:cS(this.gasLimit),gasPrice:cS(this.gasPrice),hash:d,maxFeePerGas:cS(this.maxFeePerGas),maxPriorityFeePerGas:cS(this.maxPriorityFeePerGas),maxFeePerBlobGas:cS(this.maxFeePerBlobGas),nonce:h,signature:j,to:f,index:c,type:e,value:cS(this.value)}}async getBlock(){let a=this.blockNumber;if(null==a){let b=await this.getTransaction();b&&(a=b.blockNumber)}if(null==a)return null;let b=this.provider.getBlock(a);if(null==b)throw Error("TODO");return b}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:a,blockNumber:b}=await g({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==a||null==a.blockNumber?0:b-a.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(a,b){let c=null==a?1:a,d=null==b?0:b,e=this.#X,f=-1,h=-1===e,i=async()=>{if(h)return null;let{blockNumber:a,nonce:b}=await g({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){e=a;return}if(h)return null;let d=await this.getTransaction();if(!d||null==d.blockNumber)for(-1===f&&(f=e-3)<this.#X&&(f=this.#X);f<=a;){if(h)return null;let b=await this.provider.getBlock(f,!0);if(null==b)break;for(let a of b)if(a===this.hash)return;for(let d=0;d<b.length;d++){let f=await b.getTransaction(d);if(f.from===this.from&&f.nonce===this.nonce){if(h)return null;let b=await this.provider.getTransactionReceipt(f.hash);if(null==b||a-b.blockNumber+1<c)return;let d="replaced";f.data===this.data&&f.to===this.to&&f.value===this.value?d="repriced":"0x"===f.data&&f.from===f.to&&f.value===cQ&&(d="cancelled"),m(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===d||"cancelled"===d,reason:d,replacement:f.replaceableTransaction(e),hash:f.hash,receipt:b})}}f++}},k=a=>{if(null==a||0!==a.status)return a;m(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:a.to,from:a.from,data:""},receipt:a})},n=await this.provider.getTransactionReceipt(this.hash);if(0===c)return k(n);if(n){if(1===c||await n.confirmations()>=c)return k(n)}else if(await i(),0===c)return null;let o=new Promise((a,b)=>{let f=[],g=()=>{f.forEach(a=>a())};if(f.push(()=>{h=!0}),d>0){let a=setTimeout(()=>{g(),b(l("wait for transaction timeout","TIMEOUT"))},d);f.push(()=>{clearTimeout(a)})}let m=async d=>{if(await d.confirmations()>=c){g();try{a(k(d))}catch(a){b(a)}}};if(f.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),e>=0){let a=async()=>{try{await i()}catch(a){if(j(a,"TRANSACTION_REPLACED")){g(),b(a);return}}h||this.provider.once("block",a)};f.push(()=>{this.provider.off("block",a)}),this.provider.once("block",a)}});return await o}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return m(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cZ(this)}reorderedEvent(a){return m(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),m(!a||a.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cY(this,a)}replaceableTransaction(a){n(Number.isInteger(a)&&a>=0,"invalid startBlock","startBlock",a);let b=new cX(this,this.provider);return b.#X=a,b}}function cY(a,b){return{orphan:"reorder-transaction",tx:a,other:b}}function cZ(a){return{orphan:"drop-transaction",tx:a}}class c${filter;emitter;#Y;constructor(a,b,c){this.#Y=b,h(this,{emitter:a,filter:c})}async removeListener(){null!=this.#Y&&await this.emitter.off(this.filter,this.#Y)}}class c_ extends cV{interface;fragment;args;constructor(a,b,c){super(a,a.provider),h(this,{args:b.decodeEventLog(c,a.data,a.topics),fragment:c,interface:b})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class c0 extends cV{error;constructor(a,b){super(a,a.provider),h(this,{error:b})}}class c1 extends cW{#Z;constructor(a,b,c){super(c,b),this.#Z=a}get logs(){return super.logs.map(a=>{let b=a.topics.length?this.#Z.getEvent(a.topics[0]):null;if(b)try{return new c_(a,this.#Z,b)}catch(b){return new c0(a,b)}return a})}}class c2 extends cX{#Z;constructor(a,b,c){super(c,b),this.#Z=a}async wait(a,b){let c=await super.wait(a,b);return null==c?null:new c1(this.#Z,this.provider,c)}}class c3 extends c${log;constructor(a,b,c,d){super(a,b,c),h(this,{log:d})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class c4 extends c3{constructor(a,b,c,d,e){super(a,b,c,new c_(e,a.interface,d)),h(this,{args:a.interface.decodeEventLog(d,this.log.data,this.log.topics),fragment:d})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}let c5=BigInt(0);function c6(a){return a&&"function"==typeof a.call}function c7(a){return a&&"function"==typeof a.estimateGas}function c8(a){return a&&"function"==typeof a.resolveName}function c9(a){return a&&"function"==typeof a.sendTransaction}function da(a){if(null!=a){if(c8(a))return a;if(a.provider)return a.provider}}class db{#$;fragment;constructor(a,b,c){if(h(this,{fragment:b}),b.inputs.length<c.length)throw Error("too many arguments");let d=dc(a.runner,"resolveName"),e=c8(d)?d:null;this.#$=async function(){let d=await Promise.all(b.inputs.map((a,b)=>null==c[b]?null:a.walkAsync(c[b],(a,b)=>"address"===a?Array.isArray(b)?Promise.all(b.map(a=>b2(a,e))):b2(b,e):b)));return a.interface.encodeFilterTopics(b,d)}()}getTopicFilter(){return this.#$}}function dc(a,b){return null==a?null:"function"==typeof a[b]?a:a.provider&&"function"==typeof a.provider[b]?a.provider:null}function dd(a){return null==a?null:a.provider||null}async function de(a,b){let c=aR.dereference(a,"overrides");n("object"==typeof c,"invalid overrides parameter","overrides",a);let d=cT(c);return n(null==d.to||(b||[]).indexOf("to")>=0,"cannot override to","overrides.to",d.to),n(null==d.data||(b||[]).indexOf("data")>=0,"cannot override data","overrides.data",d.data),d.from&&(d.from=d.from),d}async function df(a,b,c){let d=dc(a,"resolveName"),e=c8(d)?d:null;return await Promise.all(b.map((a,b)=>a.walkAsync(c[b],(a,b)=>(b=aR.dereference(b,a),"address"===a)?b2(b,e):b)))}let dg=Symbol.for("_ethersInternal_contract"),dh=new WeakMap;function di(a){return dh.get(a[dg])}async function dj(a,b){let c,d=null;if(Array.isArray(b)){let d=function(b){if(u(b,32))return b;let c=a.interface.getEvent(b);return n(c,"unknown fragment","name",b),c.topicHash};c=b.map(a=>null==a?null:Array.isArray(a)?a.map(d):d(a))}else if("*"===b)c=[null];else if("string"==typeof b)u(b,32)?c=[b]:(n(d=a.interface.getEvent(b),"unknown fragment","event",b),c=[d.topicHash]);else b&&"object"==typeof b&&"getTopicFilter"in b&&"function"==typeof b.getTopicFilter&&b.fragment?c=await b.getTopicFilter():"fragment"in b?c=[(d=b.fragment).topicHash]:n(!1,"unknown event name","event",b);return{fragment:d,tag:(c=c.map(a=>{if(null==a)return null;if(Array.isArray(a)){let b=Array.from(new Set(a.map(a=>a.toLowerCase())).values());return 1===b.length?b[0]:(b.sort(),b)}return a.toLowerCase()})).map(a=>null==a?"null":Array.isArray(a)?a.join("|"):a).join("&"),topics:c}}async function dk(a,b){let{subs:c}=di(a);return c.get((await dj(a,b)).tag)||null}async function dl(a,b,c){let d=dd(a.runner);m(d,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:b});let{fragment:e,tag:f,topics:g}=await dj(a,c),{addr:h,subs:i}=di(a),j=i.get(f);if(!j){let b={address:h||a,topics:g},k=b=>{let d=e;if(null==d)try{d=a.interface.getEvent(b.topics[0])}catch(a){}if(d){let f=d,g=e?a.interface.decodeEventLog(e,b.data,b.topics):[];dp(a,c,g,d=>new c4(a,d,c,f,b))}else dp(a,c,[],d=>new c3(a,d,c,b))},l=[];j={tag:f,listeners:[],start:()=>{l.length||l.push(d.on(b,k))},stop:async()=>{if(0==l.length)return;let a=l;l=[],await Promise.all(a),d.off(b,k)}},i.set(f,j)}return j}let dm=Promise.resolve();async function dn(a,b,c,d){await dm;let e=await dk(a,b);if(!e)return!1;let f=e.listeners.length;return e.listeners=e.listeners.filter(({listener:b,once:e})=>{let f=Array.from(c);d&&f.push(d(e?null:b));try{b.call(a,...f)}catch(a){}return!e}),0===e.listeners.length&&(e.stop(),di(a).subs.delete(e.tag)),f>0}async function dp(a,b,c,d){try{await dm}catch(a){}let e=dn(a,b,c,d);return dm=e,await e}let dq=["then"];class dr{target;interface;runner;filters;[dg];fallback;constructor(a,b,c,d){var e;let f;n("string"==typeof a||b_(a),"invalid value for Contract target","target",a),null==c&&(c=null);let g=cP.from(b);h(this,{target:a,runner:c,interface:g}),Object.defineProperty(this,dg,{value:{}});let i=null,o=null;if(d){let a=dd(c);o=new c2(this.interface,a,d)}let p=new Map;if("string"==typeof a)if(u(a))i=a,f=Promise.resolve(a);else{let b=dc(c,"resolveName");if(!c8(b))throw l("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});f=b.resolveName(a).then(b=>{if(null==b)throw l("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:a});return di(this).addr=b,b})}else f=a.getAddress().then(a=>{if(null==a)throw Error("TODO");return di(this).addr=a,a});return e={addrPromise:f,addr:i,deployTx:o,subs:p},dh.set(this[dg],e),h(this,{filters:new Proxy({},{get:(a,b,c)=>{if("symbol"==typeof b||dq.indexOf(b)>=0)return Reflect.get(a,b,c);try{return this.getEvent(b)}catch(a){if(!j(a,"INVALID_ARGUMENT")||"key"!==a.argument)throw a}},has:(a,b)=>dq.indexOf(b)>=0?Reflect.has(a,b):Reflect.has(a,b)||this.interface.hasEvent(String(b))})}),h(this,{fallback:g.receive||g.fallback?function(a){let b=async function(b){let c=await de(b,["data"]);c.to=await a.getAddress(),c.from&&(c.from=await b2(c.from,da(a.runner)));let d=a.interface,e=I(c.value||c5,"overrides.value")===c5,f="0x"===(c.data||"0x");return!d.fallback||d.fallback.payable||!d.receive||f||e||n(!1,"cannot send data to receive or send value to non-payable fallback","overrides",b),n(d.fallback||f,"cannot send data to receive-only contract","overrides.data",c.data),n(d.receive||d.fallback&&d.fallback.payable||e,"cannot send value to non-payable fallback","overrides.value",c.value),n(d.fallback||f,"cannot send data to receive-only contract","overrides.data",c.data),c},c=async function(c){let d=dc(a.runner,"call");m(c6(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let e=await b(c);try{return await d.call(e)}catch(b){if(k(b)&&b.data)throw a.interface.makeError(b.data,e);throw b}},d=async function(c){let d=a.runner;m(c9(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let e=await d.sendTransaction(await b(c)),f=dd(a.runner);return new c2(a.interface,f,e)},e=async function(c){let d=dc(a.runner,"estimateGas");return m(c7(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await b(c))},f=async a=>await d(a);return h(f,{_contract:a,estimateGas:e,populateTransaction:b,send:d,staticCall:c}),f}(this):null}),new Proxy(this,{get:(a,b,c)=>{if("symbol"==typeof b||b in a||dq.indexOf(b)>=0)return Reflect.get(a,b,c);try{return a.getFunction(b)}catch(a){if(!j(a,"INVALID_ARGUMENT")||"key"!==a.argument)throw a}},has:(a,b)=>"symbol"==typeof b||b in a||dq.indexOf(b)>=0?Reflect.has(a,b):a.interface.hasFunction(b)})}connect(a){return new dr(this.target,this.interface,a)}attach(a){return new dr(a,this.interface,this.runner)}async getAddress(){return await di(this).addrPromise}async getDeployedCode(){let a=dd(this.runner);m(a,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let b=await a.getCode(await this.getAddress());return"0x"===b?null:b}async waitForDeployment(){let a=this.deploymentTransaction();if(a)return await a.wait(),this;if(null!=await this.getDeployedCode())return this;let b=dd(this.runner);return m(null!=b,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((a,c)=>{let d=async()=>{try{let c=await this.getDeployedCode();if(null!=c)return a(this);b.once("block",d)}catch(a){c(a)}};d()})}deploymentTransaction(){return di(this).deployTx}getFunction(a){return"string"!=typeof a&&(a=a.format()),function(a,b){let c=function(...c){let d=a.interface.getFunction(b,c);return m(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:b,args:c}}),d},d=async function(...b){let d=c(...b),e={};if(d.inputs.length+1===b.length&&(e=await de(b.pop())).from&&(e.from=await b2(e.from,da(a.runner))),d.inputs.length!==b.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let f=await df(a.runner,d.inputs,b);return Object.assign({},e,await g({to:a.getAddress(),data:a.interface.encodeFunctionData(d,f)}))},e=async function(...a){let b=await j(...a);return 1===b.length?b[0]:b},f=async function(...b){let c=a.runner;m(c9(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let e=await c.sendTransaction(await d(...b)),f=dd(a.runner);return new c2(a.interface,f,e)},i=async function(...b){let c=dc(a.runner,"estimateGas");return m(c7(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await d(...b))},j=async function(...b){let e=dc(a.runner,"call");m(c6(e),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let f=await d(...b),g="0x";try{g=await e.call(f)}catch(b){if(k(b)&&b.data)throw a.interface.makeError(b.data,f);throw b}let h=c(...b);return a.interface.decodeFunctionResult(h,g)},l=async(...a)=>c(...a).constant?await e(...a):await f(...a);return h(l,{name:a.interface.getFunctionName(b),_contract:a,_key:b,getFragment:c,estimateGas:i,populateTransaction:d,send:f,staticCall:e,staticCallResult:j}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{let c=a.interface.getFunction(b);return m(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:b}}),c}}),l}(this,a)}getEvent(a){"string"!=typeof a&&(a=a.format());var b=this,c=a;let d=function(...a){let d=b.interface.getEvent(c,a);return m(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:c,args:a}}),d},e=function(...a){return new db(b,d(...a),a)};return h(e,{name:b.interface.getEventName(c),_contract:b,_key:c,getFragment:d}),Object.defineProperty(e,"fragment",{configurable:!1,enumerable:!0,get:()=>{let a=b.interface.getEvent(c);return m(a,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:c}}),a}}),e}async queryTransaction(a){throw Error("@TODO")}async queryFilter(a,b,c){null==b&&(b=0),null==c&&(c="latest");let{addr:d,addrPromise:e}=di(this),f=d||await e,{fragment:g,topics:h}=await dj(this,a),i={address:f,topics:h,fromBlock:b,toBlock:c},j=dd(this.runner);return m(j,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await j.getLogs(i)).map(a=>{let b=g;if(null==b)try{b=this.interface.getEvent(a.topics[0])}catch(a){}if(b)try{return new c_(a,this.interface,b)}catch(b){return new c0(a,b)}return new cV(a,j)})}async on(a,b){let c=await dl(this,"on",a);return c.listeners.push({listener:b,once:!1}),c.start(),this}async once(a,b){let c=await dl(this,"once",a);return c.listeners.push({listener:b,once:!0}),c.start(),this}async emit(a,...b){return await dp(this,a,b,null)}async listenerCount(a){if(a){let b=await dk(this,a);return b?b.listeners.length:0}let{subs:b}=di(this),c=0;for(let{listeners:a}of b.values())c+=a.length;return c}async listeners(a){if(a){let b=await dk(this,a);return b?b.listeners.map(({listener:a})=>a):[]}let{subs:b}=di(this),c=[];for(let{listeners:a}of b.values())c=c.concat(a.map(({listener:a})=>a));return c}async off(a,b){let c=await dk(this,a);if(!c)return this;if(b){let a=c.listeners.map(({listener:a})=>a).indexOf(b);a>=0&&c.listeners.splice(a,1)}return(null==b||0===c.listeners.length)&&(c.stop(),di(this).subs.delete(c.tag)),this}async removeAllListeners(a){if(a){let b=await dk(this,a);if(!b)return this;b.stop(),di(this).subs.delete(b.tag)}else{let{subs:a}=di(this);for(let{tag:b,stop:c}of a.values())c(),a.delete(b)}return this}async addListener(a,b){return await this.on(a,b)}async removeListener(a,b){return await this.off(a,b)}static buildClass(a){class b extends dr{constructor(b,c=null){super(b,a,c)}}return b}static from(a,b,c){return null==c&&(c=null),new this(a,b,c)}}function ds(){return dr}class dt extends ds(){}let du=new Uint8Array(32);du.fill(0);let dv=require("crypto"),dw=function(a){return(0,dv.createHash)("sha256").update(a).digest()},dx=function(a){return(0,dv.createHash)("sha512").update(a).digest()},dy=dw,dz=dx,dA=!1,dB=!1;function dC(a){let b=s(a,"data");return x(dy(b))}function dD(a){let b=s(a,"data");return x(dz(b))}dC._=dw,dC.lock=function(){dA=!0},dC.register=function(a){if(dA)throw Error("sha256 is locked");dy=a},Object.freeze(dC),dD._=dx,dD.lock=function(){dB=!0},dD.register=function(a){if(dB)throw Error("sha512 is locked");dz=a},Object.freeze(dC);class dE extends al{constructor(a,b,c,d){super(),this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=ai(this.buffer)}update(a){ab(this);let{view:b,buffer:c,blockLen:d}=this,e=(a=ak(a)).length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=ai(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){ab(this),ac(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:d,isLE:e}=this,{pos:f}=this;b[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>d-f&&(this.process(c,0),f=0);for(let a=f;a<d;a++)b[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(c,d-8,BigInt(8*this.length),e),this.process(c,0);let g=ai(a),h=this.outputLen;if(h%4)throw Error("_sha2: outputLen should be aligned to 32bit");let i=h/4,j=this.get();if(i>j.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<i;a++)g.setUint32(4*a,j[a],e)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.length=d,a.pos=g,a.finished=e,a.destroyed=f,d%b&&a.buffer.set(c),a}}let dF=(a,b,c)=>a&b^~a&c,dG=(a,b,c)=>a&b^a&c^b&c,dH=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),dI=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),dJ=new Uint32Array(64);class dK extends dE{constructor(){super(64,32,8,!1),this.A=0|dI[0],this.B=0|dI[1],this.C=0|dI[2],this.D=0|dI[3],this.E=0|dI[4],this.F=0|dI[5],this.G=0|dI[6],this.H=0|dI[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)dJ[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=dJ[a-15],c=dJ[a-2],d=aj(b,7)^aj(b,18)^b>>>3,e=aj(c,17)^aj(c,19)^c>>>10;dJ[a]=e+dJ[a-7]+d+dJ[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){let b=j+(aj(g,6)^aj(g,11)^aj(g,25))+dF(g,h,i)+dH[a]+dJ[a]|0,k=(aj(c,2)^aj(c,13)^aj(c,22))+dG(c,d,e)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+k|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){dJ.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let dL=am(()=>new dK);BigInt(0);let dM=BigInt(1),dN=BigInt(2),dO=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function dP(a){if(!(a instanceof Uint8Array))throw Error("Uint8Array expected");let b="";for(let c=0;c<a.length;c++)b+=dO[a[c]];return b}function dQ(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return BigInt(""===a?"0":`0x${a}`)}function dR(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);let b=a.length;if(b%2)throw Error("padded hex string expected, got unpadded hex of length "+b);let c=new Uint8Array(b/2);for(let b=0;b<c.length;b++){let d=2*b,e=Number.parseInt(a.slice(d,d+2),16);if(Number.isNaN(e)||e<0)throw Error("Invalid byte sequence");c[b]=e}return c}function dS(a){return dQ(dP(a))}function dT(a){if(!(a instanceof Uint8Array))throw Error("Uint8Array expected");return dQ(dP(Uint8Array.from(a).reverse()))}function dU(a,b){return dR(a.toString(16).padStart(2*b,"0"))}function dV(a,b){return dU(a,b).reverse()}function dW(a,b,c){let d;if("string"==typeof b)try{d=dR(b)}catch(c){throw Error(`${a} must be valid hex string, got "${b}". Cause: ${c}`)}else if(b instanceof Uint8Array)d=Uint8Array.from(b);else throw Error(`${a} must be hex string or Uint8Array`);let e=d.length;if("number"==typeof c&&e!==c)throw Error(`${a} expected ${c} bytes, got ${e}`);return d}function dX(...a){let b=new Uint8Array(a.reduce((a,b)=>a+b.length,0)),c=0;return a.forEach(a=>{if(!(a instanceof Uint8Array))throw Error("Uint8Array expected");b.set(a,c),c+=a.length}),b}let dY=a=>(dN<<BigInt(a-1))-dM,dZ=a=>new Uint8Array(a),d$=a=>Uint8Array.from(a);function d_(a,b,c){if("number"!=typeof a||a<2)throw Error("hashLen must be a number");if("number"!=typeof b||b<2)throw Error("qByteLen must be a number");if("function"!=typeof c)throw Error("hmacFn must be a function");let d=dZ(a),e=dZ(a),f=0,g=()=>{d.fill(1),e.fill(0),f=0},h=(...a)=>c(e,d,...a),i=(a=dZ())=>{e=h(d$([0]),a),d=h(),0!==a.length&&(e=h(d$([1]),a),d=h())},j=()=>{if(f++>=1e3)throw Error("drbg: tried 1000 values");let a=0,c=[];for(;a<b;){let b=(d=h()).slice();c.push(b),a+=d.length}return dX(...c)};return(a,b)=>{let c;for(g(),i(a);!(c=b(j()));)i();return g(),c}}let d0={bigint:a=>"bigint"==typeof a,function:a=>"function"==typeof a,boolean:a=>"boolean"==typeof a,string:a=>"string"==typeof a,stringOrUint8Array:a=>"string"==typeof a||a instanceof Uint8Array,isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,b)=>b.Fp.isValid(a),hash:a=>"function"==typeof a&&Number.isSafeInteger(a.outputLen)};function d1(a,b,c={}){let d=(b,c,d)=>{let e=d0[c];if("function"!=typeof e)throw Error(`Invalid validator "${c}", expected function`);let f=a[b];if((!d||void 0!==f)&&!e(f,a))throw Error(`Invalid param ${String(b)}=${f} (${typeof f}), expected ${c}`)};for(let[a,c]of Object.entries(b))d(a,c,!1);for(let[a,b]of Object.entries(c))d(a,b,!0);return a}let d2=BigInt(0),d3=BigInt(1),d4=BigInt(2),d5=BigInt(3),d6=BigInt(4),d7=BigInt(5),d8=BigInt(8);function d9(a,b){let c=a%b;return c>=d2?c:b+c}function ea(a,b,c){let d=a;for(;b-- >d2;)d*=d,d%=c;return d}function eb(a,b){if(a===d2||b<=d2)throw Error(`invert: expected positive integers, got n=${a} mod=${b}`);let c=d9(a,b),d=b,e=d2,f=d3,g=d3,h=d2;for(;c!==d2;){let a=d/c,b=d%c,i=e-g*a,j=f-h*a;d=c,c=b,e=g,f=h,g=i,h=j}if(d!==d3)throw Error("invert: does not exist");return d9(e,b)}BigInt(9),BigInt(16);let ec=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ed(a,b){let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function ee(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function ef(a){let b=ee(a);return b+Math.ceil(b/2)}class eg extends al{constructor(a,b){super(),this.finished=!1,this.destroyed=!1,function(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash should be wrapped by utils.wrapConstructor");_(a.outputLen),_(a.blockLen)}(a);let c=ak(b);if(this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let d=this.blockLen,e=new Uint8Array(d);e.set(c.length>d?a.create().update(c).digest():c);for(let a=0;a<e.length;a++)e[a]^=54;this.iHash.update(e),this.oHash=a.create();for(let a=0;a<e.length;a++)e[a]^=106;this.oHash.update(e),e.fill(0)}update(a){return ab(this),this.iHash.update(a),this}digestInto(a){ab(this),aa(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let eh=(a,b,c)=>new eg(a,b).update(c).digest();eh.create=(a,b)=>new eg(a,b);let ei=BigInt(0),ej=BigInt(1);function ek(a){return d1(a.Fp,ec.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),d1(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ed(a.n,a.nBitLength),...a,...{p:a.Fp.ORDER}})}let{Ph:el,aT:em}=d,en={Err:class extends Error{constructor(a=""){super(a)}},_parseInt(a){let{Err:b}=en;if(a.length<2||2!==a[0])throw new b("Invalid signature integer tag");let c=a[1],d=a.subarray(2,c+2);if(!c||d.length!==c)throw new b("Invalid signature integer: wrong length");if(128&d[0])throw new b("Invalid signature integer: negative");if(0===d[0]&&!(128&d[1]))throw new b("Invalid signature integer: unnecessary leading zero");return{d:el(d),l:a.subarray(c+2)}},toSig(a){let{Err:b}=en,c="string"==typeof a?em(a):a;if(!(c instanceof Uint8Array))throw Error("ui8a expected");let d=c.length;if(d<2||48!=c[0])throw new b("Invalid signature tag");if(c[1]!==d-2)throw new b("Invalid signature: incorrect length");let{d:e,l:f}=en._parseInt(c.subarray(2)),{d:g,l:h}=en._parseInt(f);if(h.length)throw new b("Invalid signature: left bytes after parsing");return{r:e,s:g}},hexFromSig(a){let b=a=>8&Number.parseInt(a[0],16)?"00"+a:a,c=a=>{let b=a.toString(16);return 1&b.length?`0${b}`:b},d=b(c(a.s)),e=b(c(a.r)),f=d.length/2,g=e.length/2,h=c(f),i=c(g);return`30${c(g+f+4)}02${i}${e}02${h}${d}`}},eo=BigInt(0),ep=BigInt(1),eq=(BigInt(2),BigInt(3));BigInt(4);let er=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),es=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),et=BigInt(1),eu=BigInt(2),ev=(a,b)=>(a+b/eu)/b,ew=function(a,b,c=!1,d={}){if(a<=d2)throw Error(`Expected Field ORDER > 0, got ${a}`);let{nBitLength:e,nByteLength:f}=ed(a,b);if(f>2048)throw Error("Field lengths over 2048 bytes are not supported");let g=function(a){if(a%d6===d5){let b=(a+d3)/d6;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}if(a%d8===d7){let b=(a-d7)/d8;return function(a,c){let d=a.mul(c,d4),e=a.pow(d,b),f=a.mul(c,e),g=a.mul(a.mul(f,d4),e),h=a.mul(f,a.sub(g,a.ONE));if(!a.eql(a.sqr(h),c))throw Error("Cannot find square root");return h}}return function(a){let b,c,d,e=(a-d3)/d4;for(b=a-d3,c=0;b%d4===d2;b/=d4,c++);for(d=d4;d<a&&function(a,b,c){if(c<=d2||b<d2)throw Error("Expected power/modulo > 0");if(c===d3)return d2;let d=d3;for(;b>d2;)b&d3&&(d=d*a%c),a=a*a%c,b>>=d3;return d}(d,e,a)!==a-d3;d++);if(1===c){let b=(a+d3)/d6;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}let f=(b+d3)/d4;return function(a,g){if(a.pow(g,e)===a.neg(a.ONE))throw Error("Cannot find square root");let h=c,i=a.pow(a.mul(a.ONE,d),b),j=a.pow(g,f),k=a.pow(g,b);for(;!a.eql(k,a.ONE);){if(a.eql(k,a.ZERO))return a.ZERO;let b=1;for(let c=a.sqr(k);b<h&&!a.eql(c,a.ONE);b++)c=a.sqr(c);let c=a.pow(i,d3<<BigInt(h-b-1));i=a.sqr(c),j=a.mul(j,c),k=a.mul(k,i),h=b}return j}}(a)}(a),h=Object.freeze({ORDER:a,BITS:e,BYTES:f,MASK:dY(e),ZERO:d2,ONE:d3,create:b=>d9(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error(`Invalid field element: expected bigint, got ${typeof b}`);return d2<=b&&b<a},is0:a=>a===d2,isOdd:a=>(a&d3)===d3,neg:b=>d9(-b,a),eql:(a,b)=>a===b,sqr:b=>d9(b*b,a),add:(b,c)=>d9(b+c,a),sub:(b,c)=>d9(b-c,a),mul:(b,c)=>d9(b*c,a),pow:(a,b)=>(function(a,b,c){if(c<d2)throw Error("Expected power > 0");if(c===d2)return a.ONE;if(c===d3)return b;let d=a.ONE,e=b;for(;c>d2;)c&d3&&(d=a.mul(d,e)),e=a.sqr(e),c>>=d3;return d})(h,a,b),div:(b,c)=>d9(b*eb(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>eb(b,a),sqrt:d.sqrt||(a=>g(h,a)),invertBatch:a=>(function(a,b){let c=Array(b.length),d=b.reduce((b,d,e)=>a.is0(d)?b:(c[e]=b,a.mul(b,d)),a.ONE),e=a.inv(d);return b.reduceRight((b,d,e)=>a.is0(d)?b:(c[e]=a.mul(b,c[e]),a.mul(b,d)),e),c})(h,a),cmov:(a,b,c)=>c?b:a,toBytes:a=>c?dV(a,f):dU(a,f),fromBytes:a=>{if(a.length!==f)throw Error(`Fp.fromBytes: expected ${f}, got ${a.length}`);return c?dT(a):dS(a)}});return Object.freeze(h)}(er,void 0,void 0,{sqrt:function(a){let b=BigInt(3),c=BigInt(6),d=BigInt(11),e=BigInt(22),f=BigInt(23),g=BigInt(44),h=BigInt(88),i=a*a*a%er,j=i*i*a%er,k=ea(j,b,er)*j%er,l=ea(k,b,er)*j%er,m=ea(l,eu,er)*i%er,n=ea(m,d,er)*m%er,o=ea(n,e,er)*n%er,p=ea(o,g,er)*o%er,q=ea(p,h,er)*p%er,r=ea(q,g,er)*o%er,s=ea(r,b,er)*j%er,t=ea(s,f,er)*n%er,u=ea(t,c,er)*i%er,v=ea(u,eu,er);if(!ew.eql(ew.sqr(v),a))throw Error("Cannot find square root");return v}}),ex=function(a,b){let c=b=>(function(a){let b=function(a){let b=ek(a);return d1(b,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...b})}(a),{Fp:c,n:d}=b,e=c.BYTES+1,f=2*c.BYTES+1;function g(a){return d9(a,d)}let{ProjectivePoint:h,normPrivateKeyToScalar:i,weierstrassEquation:j,isWithinCurveOrder:k}=function(a){let b=function(a){let b=ek(a);d1(b,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:c,Fp:d,a:e}=b;if(c){if(!d.eql(e,d.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof c||"bigint"!=typeof c.beta||"function"!=typeof c.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...b})}(a),{Fp:c}=b,d=b.toBytes||((a,b,d)=>{let e=b.toAffine();return dX(Uint8Array.from([4]),c.toBytes(e.x),c.toBytes(e.y))}),e=b.fromBytes||(a=>{let b=a.subarray(1);return{x:c.fromBytes(b.subarray(0,c.BYTES)),y:c.fromBytes(b.subarray(c.BYTES,2*c.BYTES))}});function f(a){let{a:d,b:e}=b,f=c.sqr(a),g=c.mul(f,a);return c.add(c.add(g,c.mul(a,d)),e)}if(!c.eql(c.sqr(b.Gy),f(b.Gx)))throw Error("bad generator point: equation left != right");function g(a){return"bigint"==typeof a&&eo<a&&a<b.n}function h(a){if(!g(a))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function i(a){let c,{allowedPrivateKeyLengths:d,nByteLength:e,wrapPrivateKey:f,n:g}=b;if(d&&"bigint"!=typeof a){if(a instanceof Uint8Array&&(a=dP(a)),"string"!=typeof a||!d.includes(a.length))throw Error("Invalid key");a=a.padStart(2*e,"0")}try{c="bigint"==typeof a?a:dS(dW("private key",a,e))}catch(b){throw Error(`private key must be ${e} bytes, hex or bigint, not ${typeof a}`)}return f&&(c=d9(c,g)),h(c),c}let j=new Map;function k(a){if(!(a instanceof l))throw Error("ProjectivePoint expected")}class l{constructor(a,b,d){if(this.px=a,this.py=b,this.pz=d,null==a||!c.isValid(a))throw Error("x required");if(null==b||!c.isValid(b))throw Error("y required");if(null==d||!c.isValid(d))throw Error("z required")}static fromAffine(a){let{x:b,y:d}=a||{};if(!a||!c.isValid(b)||!c.isValid(d))throw Error("invalid affine point");if(a instanceof l)throw Error("projective point not allowed");let e=a=>c.eql(a,c.ZERO);return e(b)&&e(d)?l.ZERO:new l(b,d,c.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(a){let b=c.invertBatch(a.map(a=>a.pz));return a.map((a,c)=>a.toAffine(b[c])).map(l.fromAffine)}static fromHex(a){let b=l.fromAffine(e(dW("pointHex",a)));return b.assertValidity(),b}static fromPrivateKey(a){return l.BASE.multiply(i(a))}_setWindowSize(a){this._WINDOW_SIZE=a,j.delete(this)}assertValidity(){if(this.is0()){if(b.allowInfinityPoint&&!c.is0(this.py))return;throw Error("bad point: ZERO")}let{x:a,y:d}=this.toAffine();if(!c.isValid(a)||!c.isValid(d))throw Error("bad point: x or y not FE");let e=c.sqr(d),g=f(a);if(!c.eql(e,g))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:a}=this.toAffine();if(c.isOdd)return!c.isOdd(a);throw Error("Field doesn't support isOdd")}equals(a){k(a);let{px:b,py:d,pz:e}=this,{px:f,py:g,pz:h}=a,i=c.eql(c.mul(b,h),c.mul(f,e)),j=c.eql(c.mul(d,h),c.mul(g,e));return i&&j}negate(){return new l(this.px,c.neg(this.py),this.pz)}double(){let{a,b:d}=b,e=c.mul(d,eq),{px:f,py:g,pz:h}=this,i=c.ZERO,j=c.ZERO,k=c.ZERO,m=c.mul(f,f),n=c.mul(g,g),o=c.mul(h,h),p=c.mul(f,g);return p=c.add(p,p),k=c.mul(f,h),k=c.add(k,k),i=c.mul(a,k),j=c.mul(e,o),j=c.add(i,j),i=c.sub(n,j),j=c.add(n,j),j=c.mul(i,j),i=c.mul(p,i),k=c.mul(e,k),o=c.mul(a,o),p=c.sub(m,o),p=c.mul(a,p),p=c.add(p,k),k=c.add(m,m),m=c.add(k,m),m=c.add(m,o),m=c.mul(m,p),j=c.add(j,m),o=c.mul(g,h),o=c.add(o,o),m=c.mul(o,p),i=c.sub(i,m),k=c.mul(o,n),k=c.add(k,k),new l(i,j,k=c.add(k,k))}add(a){k(a);let{px:d,py:e,pz:f}=this,{px:g,py:h,pz:i}=a,j=c.ZERO,m=c.ZERO,n=c.ZERO,o=b.a,p=c.mul(b.b,eq),q=c.mul(d,g),r=c.mul(e,h),s=c.mul(f,i),t=c.add(d,e),u=c.add(g,h);t=c.mul(t,u),u=c.add(q,r),t=c.sub(t,u),u=c.add(d,f);let v=c.add(g,i);return u=c.mul(u,v),v=c.add(q,s),u=c.sub(u,v),v=c.add(e,f),j=c.add(h,i),v=c.mul(v,j),j=c.add(r,s),v=c.sub(v,j),n=c.mul(o,u),j=c.mul(p,s),n=c.add(j,n),j=c.sub(r,n),n=c.add(r,n),m=c.mul(j,n),r=c.add(q,q),r=c.add(r,q),s=c.mul(o,s),u=c.mul(p,u),r=c.add(r,s),s=c.sub(q,s),s=c.mul(o,s),u=c.add(u,s),q=c.mul(r,u),m=c.add(m,q),q=c.mul(v,u),j=c.mul(t,j),j=c.sub(j,q),q=c.mul(t,r),n=c.mul(v,n),new l(j,m,n=c.add(n,q))}subtract(a){return this.add(a.negate())}is0(){return this.equals(l.ZERO)}wNAF(a){return n.wNAFCached(this,j,a,a=>{let b=c.invertBatch(a.map(a=>a.pz));return a.map((a,c)=>a.toAffine(b[c])).map(l.fromAffine)})}multiplyUnsafe(a){let d=l.ZERO;if(a===eo)return d;if(h(a),a===ep)return this;let{endo:e}=b;if(!e)return n.unsafeLadder(this,a);let{k1neg:f,k1:g,k2neg:i,k2:j}=e.splitScalar(a),k=d,m=d,o=this;for(;g>eo||j>eo;)g&ep&&(k=k.add(o)),j&ep&&(m=m.add(o)),o=o.double(),g>>=ep,j>>=ep;return f&&(k=k.negate()),i&&(m=m.negate()),m=new l(c.mul(m.px,e.beta),m.py,m.pz),k.add(m)}multiply(a){let d,e;h(a);let{endo:f}=b;if(f){let{k1neg:b,k1:g,k2neg:h,k2:i}=f.splitScalar(a),{p:j,f:k}=this.wNAF(g),{p:m,f:o}=this.wNAF(i);j=n.constTimeNegate(b,j),m=n.constTimeNegate(h,m),m=new l(c.mul(m.px,f.beta),m.py,m.pz),d=j.add(m),e=k.add(o)}else{let{p:b,f:c}=this.wNAF(a);d=b,e=c}return l.normalizeZ([d,e])[0]}multiplyAndAddUnsafe(a,b,c){let d=l.BASE,e=(a,b)=>b!==eo&&b!==ep&&a.equals(d)?a.multiply(b):a.multiplyUnsafe(b),f=e(this,b).add(e(a,c));return f.is0()?void 0:f}toAffine(a){let{px:b,py:d,pz:e}=this,f=this.is0();null==a&&(a=f?c.ONE:c.inv(e));let g=c.mul(b,a),h=c.mul(d,a),i=c.mul(e,a);if(f)return{x:c.ZERO,y:c.ZERO};if(!c.eql(i,c.ONE))throw Error("invZ was invalid");return{x:g,y:h}}isTorsionFree(){let{h:a,isTorsionFree:c}=b;if(a===ep)return!0;if(c)return c(l,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:a,clearCofactor:c}=b;return a===ep?this:c?c(l,this):this.multiplyUnsafe(b.h)}toRawBytes(a=!0){return this.assertValidity(),d(l,this,a)}toHex(a=!0){return dP(this.toRawBytes(a))}}l.BASE=new l(b.Gx,b.Gy,c.ONE),l.ZERO=new l(c.ZERO,c.ONE,c.ZERO);let m=b.nBitLength,n=function(a,b){let c=(a,b)=>{let c=b.negate();return a?c:b},d=a=>({windows:Math.ceil(b/a)+1,windowSize:2**(a-1)});return{constTimeNegate:c,unsafeLadder(b,c){let d=a.ZERO,e=b;for(;c>ei;)c&ej&&(d=d.add(e)),e=e.double(),c>>=ej;return d},precomputeWindow(a,b){let{windows:c,windowSize:e}=d(b),f=[],g=a,h=g;for(let a=0;a<c;a++){h=g,f.push(h);for(let a=1;a<e;a++)h=h.add(g),f.push(h);g=h.double()}return f},wNAF(b,e,f){let{windows:g,windowSize:h}=d(b),i=a.ZERO,j=a.BASE,k=BigInt(2**b-1),l=2**b,m=BigInt(b);for(let a=0;a<g;a++){let b=a*h,d=Number(f&k);f>>=m,d>h&&(d-=l,f+=ej);let g=b+Math.abs(d)-1,n=a%2!=0,o=d<0;0===d?j=j.add(c(n,e[b])):i=i.add(c(o,e[g]))}return{p:i,f:j}},wNAFCached(a,b,c,d){let e=a._WINDOW_SIZE||1,f=b.get(a);return f||(f=this.precomputeWindow(a,e),1!==e&&b.set(a,d(f))),this.wNAF(e,f,c)}}}(l,b.endo?Math.ceil(m/2):m);return{CURVE:b,ProjectivePoint:l,normPrivateKeyToScalar:i,weierstrassEquation:f,isWithinCurveOrder:g}}({...b,toBytes(a,b,d){let e=b.toAffine(),f=c.toBytes(e.x),g=dX;return d?g(Uint8Array.from([b.hasEvenY()?2:3]),f):g(Uint8Array.from([4]),f,c.toBytes(e.y))},fromBytes(a){let b=a.length,d=a[0],g=a.subarray(1);if(b===e&&(2===d||3===d)){let a=dS(g);if(!(eo<a&&a<c.ORDER))throw Error("Point is not on curve");let b=j(a),e=c.sqrt(b);return(1&d)==1!=((e&ep)===ep)&&(e=c.neg(e)),{x:a,y:e}}if(b===f&&4===d)return{x:c.fromBytes(g.subarray(0,c.BYTES)),y:c.fromBytes(g.subarray(c.BYTES,2*c.BYTES))};throw Error(`Point of length ${b} was invalid. Expected ${e} compressed bytes or ${f} uncompressed bytes`)}}),l=a=>dP(dU(a,b.nByteLength)),m=(a,b,c)=>dS(a.slice(b,c));class n{constructor(a,b,c){this.r=a,this.s=b,this.recovery=c,this.assertValidity()}static fromCompact(a){let c=b.nByteLength;return new n(m(a=dW("compactSignature",a,2*c),0,c),m(a,c,2*c))}static fromDER(a){let{r:b,s:c}=en.toSig(dW("DER",a));return new n(b,c)}assertValidity(){if(!k(this.r))throw Error("r must be 0 < r < CURVE.n");if(!k(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(a){return new n(this.r,this.s,a)}recoverPublicKey(a){let{r:e,s:f,recovery:i}=this,j=q(dW("msgHash",a));if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");let k=2===i||3===i?e+b.n:e;if(k>=c.ORDER)throw Error("recovery id 2 or 3 invalid");let m=(1&i)==0?"02":"03",n=h.fromHex(m+l(k)),o=eb(k,d),p=g(-j*o),r=g(f*o),s=h.BASE.multiplyAndAddUnsafe(n,p,r);if(!s)throw Error("point at infinify");return s.assertValidity(),s}hasHighS(){return this.s>d>>ep}normalizeS(){return this.hasHighS()?new n(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return dR(this.toDERHex())}toDERHex(){return en.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return dR(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}function o(a){let b=a instanceof Uint8Array,c="string"==typeof a,d=(b||c)&&a.length;return b?d===e||d===f:c?d===2*e||d===2*f:a instanceof h}let p=b.bits2int||function(a){let c=dS(a),d=8*a.length-b.nBitLength;return d>0?c>>BigInt(d):c},q=b.bits2int_modN||function(a){return g(p(a))},r=dY(b.nBitLength);function s(a){if("bigint"!=typeof a)throw Error("bigint expected");if(!(eo<=a&&a<r))throw Error(`bigint expected < 2^${b.nBitLength}`);return dU(a,b.nByteLength)}let t={lowS:b.lowS,prehash:!1},u={lowS:b.lowS,prehash:!1};return h.BASE._setWindowSize(8),{CURVE:b,getPublicKey:function(a,b=!0){return h.fromPrivateKey(a).toRawBytes(b)},getSharedSecret:function(a,b,c=!0){if(o(a))throw Error("first arg must be private key");if(!o(b))throw Error("second arg must be public key");return h.fromHex(b).multiply(i(a)).toRawBytes(c)},sign:function(a,e,f=t){let{seed:j,k2sig:l}=function(a,e,f=t){if(["recovered","canonical"].some(a=>a in f))throw Error("sign() legacy options not supported");let{hash:j,randomBytes:l}=b,{lowS:m,prehash:o,extraEntropy:r}=f;null==m&&(m=!0),a=dW("msgHash",a),o&&(a=dW("prehashed msgHash",j(a)));let u=q(a),v=i(e),w=[s(v),s(u)];if(null!=r){let a=!0===r?l(c.BYTES):r;w.push(dW("extraEntropy",a))}return{seed:dX(...w),k2sig:function(a){var b;let c=p(a);if(!k(c))return;let e=eb(c,d),f=h.BASE.multiply(c).toAffine(),i=g(f.x);if(i===eo)return;let j=g(e*g(u+i*v));if(j===eo)return;let l=2*(f.x!==i)|Number(f.y&ep),o=j;return m&&j>d>>ep&&(o=(b=j)>d>>ep?g(-b):b,l^=1),new n(i,o,l)}}}(a,e,f);return d_(b.hash.outputLen,b.nByteLength,b.hmac)(j,l)},verify:function(a,c,e,f=u){let i,j;if(c=dW("msgHash",c),e=dW("publicKey",e),"strict"in f)throw Error("options.strict was renamed to lowS");let{lowS:k,prehash:l}=f;try{if("string"==typeof a||a instanceof Uint8Array)try{j=n.fromDER(a)}catch(b){if(!(b instanceof en.Err))throw b;j=n.fromCompact(a)}else if("object"==typeof a&&"bigint"==typeof a.r&&"bigint"==typeof a.s){let{r:b,s:c}=a;j=new n(b,c)}else throw Error("PARSE");i=h.fromHex(e)}catch(a){if("PARSE"===a.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&j.hasHighS())return!1;l&&(c=b.hash(c));let{r:m,s:o}=j,p=q(c),r=eb(o,d),s=g(p*r),t=g(m*r),v=h.BASE.multiplyAndAddUnsafe(i,s,t)?.toAffine();return!!v&&g(v.x)===m},ProjectivePoint:h,Signature:n,utils:{isValidPrivateKey(a){try{return i(a),!0}catch(a){return!1}},normPrivateKeyToScalar:i,randomPrivateKey:()=>{let a=ef(b.n);return function(a,b,c=!1){let d=a.length,e=ee(b),f=ef(b);if(d<16||d<f||d>1024)throw Error(`expected ${f}-1024 bytes of input, got ${d}`);let g=d9(c?dS(a):dT(a),b-d3)+d3;return c?dV(g,e):dU(g,e)}(b.randomBytes(a),b.n)},precompute:(a=8,b=h.BASE)=>(b._setWindowSize(a),b.multiply(BigInt(3)),b)}}})({...a,hash:b,hmac:(a,...c)=>eh(b,a,function(...a){let b=new Uint8Array(a.reduce((a,b)=>a+b.length,0)),c=0;return a.forEach(a=>{if(!(a instanceof Uint8Array))throw Error("Uint8Array expected");b.set(a,c),c+=a.length}),b}(...c)),randomBytes:an});return Object.freeze({...c(b),create:c})}({a:BigInt(0),b:BigInt(7),Fp:ew,n:es,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{let b=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),c=-et*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),d=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),e=BigInt("0x100000000000000000000000000000000"),f=ev(b*a,es),g=ev(-c*a,es),h=d9(a-f*b-g*d,es),i=d9(-f*c-g*b,es),j=h>e,k=i>e;if(j&&(h=es-h),k&&(i=es-i),h>e||i>e)throw Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:j,k1:h,k2neg:k,k2:i}}}},dL);BigInt(0),ex.ProjectivePoint;class ey{#_;constructor(a){n(32===z(a),"invalid private key","privateKey","[REDACTED]"),this.#_=x(a)}get privateKey(){return this.#_}get publicKey(){return ey.computePublicKey(this.#_)}get compressedPublicKey(){return ey.computePublicKey(this.#_,!0)}sign(a){n(32===z(a),"invalid digest length","digest",a);let b=ex.sign(t(a),t(this.#_),{lowS:!0});return cp.from({r:N(b.r,32),s:N(b.s,32),v:b.recovery?28:27})}computeSharedSecret(a){let b=ey.computePublicKey(a);return x(ex.getSharedSecret(t(this.#_),s(b),!1))}static computePublicKey(a,b){let c=s(a,"key");if(32===c.length)return x(ex.getPublicKey(c,!!b));if(64===c.length){let a=new Uint8Array(65);a[0]=4,a.set(c,1),c=a}return x(ex.ProjectivePoint.fromHex(c).toRawBytes(b))}static recoverPublicKey(a,b){n(32===z(a),"invalid digest length","digest",a);let c=cp.from(b),d=ex.Signature.fromCompact(t(y([c.r,c.s]))),e=(d=d.addRecoveryBit(c.yParity)).recoverPublicKey(t(a));return n(null!=e,"invalid signature for digest","signature",b),"0x"+e.toHex(!1)}static addPoints(a,b,c){let d=ex.ProjectivePoint.fromHex(ey.computePublicKey(a).substring(2)),e=ex.ProjectivePoint.fromHex(ey.computePublicKey(b).substring(2));return"0x"+d.add(e).toHex(!!c)}}function ez(a,b,c){let d=0;for(let e=0;e<c;e++)d=256*d+a[b+e];return d}function eA(a,b,c,d){let e=[];for(;c<b+1+d;){let f=eB(a,c);e.push(f.result),m((c+=f.consumed)<=b+1+d,"child data too short","BUFFER_OVERRUN",{buffer:a,length:d,offset:b})}return{consumed:1+d,result:e}}function eB(a,b){m(0!==a.length,"data too short","BUFFER_OVERRUN",{buffer:a,length:0,offset:1});let c=b=>{m(b<=a.length,"data short segment too short","BUFFER_OVERRUN",{buffer:a,length:a.length,offset:b})};if(a[b]>=248){let d=a[b]-247;c(b+1+d);let e=ez(a,b+1,d);return c(b+1+d+e),eA(a,b,b+1+d,d+e)}if(a[b]>=192){let d=a[b]-192;return c(b+1+d),eA(a,b,b+1,d)}if(a[b]>=184){let d=a[b]-183;c(b+1+d);let e=ez(a,b+1,d);c(b+1+d+e);let f=x(a.slice(b+1+d,b+1+d+e));return{consumed:1+d+e,result:f}}if(a[b]>=128){let d=a[b]-128;c(b+1+d);let e=x(a.slice(b+1,b+1+d));return{consumed:1+d,result:e}}return{consumed:1,result:function(a){let b=a.toString(16);for(;b.length<2;)b="0"+b;return"0x"+b}(a[b])}}function eC(a){let b=s(a,"data"),c=eB(b,0);return n(c.consumed===b.length,"unexpected junk after rlp payload","data",a),c.result}function eD(a){let b=[];for(;a;)b.unshift(255&a),a>>=8;return b}let eE="0123456789abcdef";function eF(a){let b="0x";for(let c of function a(b){if(Array.isArray(b)){let c=[];if(b.forEach(function(b){c=c.concat(a(b))}),c.length<=55)return c.unshift(192+c.length),c;let d=eD(c.length);return d.unshift(247+d.length),d.concat(c)}let c=Array.prototype.slice.call(s(b,"object"));if(1===c.length&&c[0]<=127)return c;if(c.length<=55)return c.unshift(128+c.length),c;let d=eD(c.length);return d.unshift(183+d.length),d.concat(c)}(a))b+=eE[c>>4],b+=eE[15&c];return b}let eG=BigInt(0),eH=BigInt(2),eI=BigInt(27),eJ=BigInt(28),eK=BigInt(35),eL=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),eM=Symbol.for("nodejs.util.inspect.custom");function eN(a,b){let c=a.toString(16);for(;c.length<2;)c="0"+c;return"0x"+(c+=dC(b).substring(4))}function eO(a){return"0x"===a?null:aM(a)}function eP(a,b){try{return cc(a)}catch(c){n(!1,c.message,b,a)}}function eQ(a,b){return"0x"===a?0:M(a,b)}function eR(a,b){if("0x"===a)return eG;let c=I(a,b);return n(c<=eL,"value exceeds uint size",b,c),c}function eS(a,b){let c=I(a,"value"),d=O(c);return n(d.length<=32,"value too large",`tx.${b}`,c),d}function eT(a){return cc(a).map(a=>[a.address,a.storageKeys])}function eU(a,b){let c;try{if(c=eQ(b[0],"yParity"),0!==c&&1!==c)throw Error("bad yParity")}catch(a){n(!1,"invalid yParity","yParity",b[0])}let d=C(b[1],32),e=C(b[2],32);a.signature=cp.from({r:d,s:e,yParity:c})}class eV{#aa;#ab;#b;#ac;#ad;#ae;#af;#ag;#ah;#ai;#aj;#ak;#al;#am;#an;#ao;#ap;#aq;get type(){return this.#aa}set type(a){switch(a){case null:this.#aa=null;break;case 0:case"legacy":this.#aa=0;break;case 1:case"berlin":case"eip-2930":this.#aa=1;break;case 2:case"london":case"eip-1559":this.#aa=2;break;case 3:case"cancun":case"eip-4844":this.#aa=3;break;case 4:case"pectra":case"eip-7702":this.#aa=4;break;default:n(!1,"unsupported transaction type","type",a)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let a=this.#ab;return null==a&&3===this.type?cI:a}set to(a){this.#ab=null==a?null:aM(a)}get nonce(){return this.#ac}set nonce(a){this.#ac=M(a,"value")}get gasLimit(){return this.#ad}set gasLimit(a){this.#ad=I(a)}get gasPrice(){let a=this.#ae;return null==a&&(0===this.type||1===this.type)?eG:a}set gasPrice(a){this.#ae=null==a?null:I(a,"gasPrice")}get maxPriorityFeePerGas(){let a=this.#af;return null==a?2===this.type||3===this.type?eG:null:a}set maxPriorityFeePerGas(a){this.#af=null==a?null:I(a,"maxPriorityFeePerGas")}get maxFeePerGas(){let a=this.#ag;return null==a?2===this.type||3===this.type?eG:null:a}set maxFeePerGas(a){this.#ag=null==a?null:I(a,"maxFeePerGas")}get data(){return this.#b}set data(a){this.#b=x(a)}get value(){return this.#ah}set value(a){this.#ah=I(a,"value")}get chainId(){return this.#ai}set chainId(a){this.#ai=I(a)}get signature(){return this.#aj||null}set signature(a){this.#aj=null==a?null:cp.from(a)}isValid(){let a=this.signature;if(a&&!a.isValid())return!1;let b=this.authorizationList;if(b){for(let a of b)if(!a.signature.isValid())return!1}return!0}get accessList(){let a=this.#ak||null;return null==a?1===this.type||2===this.type||3===this.type?[]:null:a}set accessList(a){this.#ak=null==a?null:cc(a)}get authorizationList(){let a=this.#ap||null;return null==a&&4===this.type?[]:a}set authorizationList(a){this.#ap=null==a?null:a.map(a=>cq(a))}get maxFeePerBlobGas(){let a=this.#al;return null==a&&3===this.type?eG:a}set maxFeePerBlobGas(a){this.#al=null==a?null:I(a,"maxFeePerBlobGas")}get blobVersionedHashes(){let a=this.#am;return null==a&&3===this.type?[]:a}set blobVersionedHashes(a){if(null!=a){n(Array.isArray(a),"blobVersionedHashes must be an Array","value",a),a=a.slice();for(let b=0;b<a.length;b++)n(u(a[b],32),"invalid blobVersionedHash",`value[${b}]`,a[b])}this.#am=a}get blobs(){return null==this.#ao?null:this.#ao.map(a=>Object.assign({},a))}set blobs(a){if(null==a){this.#ao=null;return}let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d];if(v(e)){m(this.#an,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=s(e);if(n(a.length<=131072,"blob is too large",`blobs[${d}]`,e),131072!==a.length){let b=new Uint8Array(131072);b.set(a),a=b}let f=this.#an.blobToKzgCommitment(a),g=x(this.#an.computeBlobKzgProof(a,f));b.push({data:x(a),commitment:x(f),proof:g}),c.push(eN(1,f))}else{let a=x(e.data),d=x(e.commitment),f=x(e.proof);b.push({data:a,commitment:d,proof:f}),c.push(eN(1,d))}}this.#ao=b,this.#am=c}get kzg(){return this.#an}set kzg(a){if(null==a)this.#an=null;else this.#an={blobToKzgCommitment:b=>{if("computeBlobProof"in a){if("blobToKzgCommitment"in a&&"function"==typeof a.blobToKzgCommitment)return s(a.blobToKzgCommitment(x(b)))}else if("blobToKzgCommitment"in a&&"function"==typeof a.blobToKzgCommitment)return s(a.blobToKzgCommitment(b));if("blobToKZGCommitment"in a&&"function"==typeof a.blobToKZGCommitment)return s(a.blobToKZGCommitment(x(b)));n(!1,"unsupported KZG library","kzg",a)},computeBlobKzgProof:(b,c)=>"computeBlobProof"in a&&"function"==typeof a.computeBlobProof?s(a.computeBlobProof(x(b),x(c))):"computeBlobKzgProof"in a&&"function"==typeof a.computeBlobKzgProof?a.computeBlobKzgProof(b,c):"computeBlobKZGProof"in a&&"function"==typeof a.computeBlobKZGProof?s(a.computeBlobKZGProof(x(b),x(c))):void n(!1,"unsupported KZG library","kzg",a)}}get blobWrapperVersion(){return this.#aq}set blobWrapperVersion(a){this.#aq=a}constructor(){this.#aa=null,this.#ab=null,this.#ac=0,this.#ad=eG,this.#ae=null,this.#af=null,this.#ag=null,this.#b="0x",this.#ah=eG,this.#ai=eG,this.#aj=null,this.#ak=null,this.#al=null,this.#am=null,this.#an=null,this.#ao=null,this.#ap=null,this.#aq=null}get hash(){return null==this.signature?null:aG(this.#ar(!0,!1))}get unsignedHash(){return aG(this.unsignedSerialized)}get from(){var a,b,c;return null==this.signature?null:(a=this.unsignedHash,b=this.signature.getCanonical(),aM(aG("0x"+("string"==typeof(c=ey.recoverPublicKey(a,b))?ey.computePublicKey(c,!1):c.publicKey).substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:ey.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return null!=this.signature}#ar(a,b){m(!a||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let c=a?this.signature:null;switch(this.inferType()){case 0:return function(a,b){let c=[eS(a.nonce,"nonce"),eS(a.gasPrice||0,"gasPrice"),eS(a.gasLimit,"gasLimit"),a.to||"0x",eS(a.value,"value"),a.data],d=eG;if(a.chainId!=eG)d=I(a.chainId,"tx.chainId"),n(!b||null==b.networkV||b.legacyChainId===d,"tx.chainId/sig.v mismatch","sig",b);else if(a.signature){let b=a.signature.legacyChainId;null!=b&&(d=b)}if(!b)return d!==eG&&(c.push(O(d)),c.push("0x"),c.push("0x")),eF(c);let e=BigInt(27+b.yParity);return d!==eG?e=cp.getChainIdV(d,b.v):BigInt(b.v)!==e&&n(!1,"tx.chainId/sig.v mismatch","sig",b),c.push(O(e)),c.push(O(b.r)),c.push(O(b._s)),eF(c)}(this,c);case 1:let d=[eS(this.chainId,"chainId"),eS(this.nonce,"nonce"),eS(this.gasPrice||0,"gasPrice"),eS(this.gasLimit,"gasLimit"),this.to||"0x",eS(this.value,"value"),this.data,eT(this.accessList||[])];return c&&(d.push(eS(c.yParity,"recoveryParam")),d.push(O(c.r)),d.push(O(c.s))),y(["0x01",eF(d)]);case 2:let e=[eS(this.chainId,"chainId"),eS(this.nonce,"nonce"),eS(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),eS(this.maxFeePerGas||0,"maxFeePerGas"),eS(this.gasLimit,"gasLimit"),this.to||"0x",eS(this.value,"value"),this.data,eT(this.accessList||[])];return c&&(e.push(eS(c.yParity,"yParity")),e.push(O(c.r)),e.push(O(c.s))),y(["0x02",eF(e)]);case 3:return function(a,b,c){let d=[eS(a.chainId,"chainId"),eS(a.nonce,"nonce"),eS(a.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),eS(a.maxFeePerGas||0,"maxFeePerGas"),eS(a.gasLimit,"gasLimit"),a.to||cI,eS(a.value,"value"),a.data,eT(a.accessList||[]),eS(a.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(a,b){n(Array.isArray(a),`invalid ${b}`,"value",a);for(let b=0;b<a.length;b++)n(u(a[b],32),"invalid ${ param } hash",`value[${b}]`,a[b]);return a}(a.blobVersionedHashes||[],"blobVersionedHashes")];if(b&&(d.push(eS(b.yParity,"yParity")),d.push(O(b.r)),d.push(O(b.s)),c)){if(null!=a.blobWrapperVersion){let b=O(a.blobWrapperVersion),e=[];for(let{proof:a}of c){let b=s(a),c=b.length/128;for(let a=0;a<b.length;a+=c)e.push(b.subarray(a,a+c))}return y(["0x03",eF([d,b,c.map(a=>a.data),c.map(a=>a.commitment),e])])}return y(["0x03",eF([d,c.map(a=>a.data),c.map(a=>a.commitment),c.map(a=>a.proof)])])}return y(["0x03",eF(d)])}(this,c,b?this.blobs:null);case 4:let f=[eS(this.chainId,"chainId"),eS(this.nonce,"nonce"),eS(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),eS(this.maxFeePerGas||0,"maxFeePerGas"),eS(this.gasLimit,"gasLimit"),this.to||"0x",eS(this.value,"value"),this.data,eT(this.accessList||[]),(this.authorizationList||[]).map(a=>[eS(a.chainId,"chainId"),a.address,eS(a.nonce,"nonce"),eS(a.signature.yParity,"yParity"),O(a.signature.r),O(a.signature._s)])];return c&&(f.push(eS(c.yParity,"yParity")),f.push(O(c.r)),f.push(O(c.s))),y(["0x04",eF(f)])}m(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#ar(!0,!0)}get unsignedSerialized(){return this.#ar(!1,!1)}inferType(){let a=this.inferTypes();return a.indexOf(2)>=0?2:a.pop()}inferTypes(){let a=null!=this.gasPrice,b=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,c=null!=this.accessList,d=null!=this.#al||this.#am;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&m(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),m(!b||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),m(0!==this.type||!c,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let e=[];return null!=this.type?e.push(this.type):this.authorizationList&&this.authorizationList.length?e.push(4):b?e.push(2):a?(e.push(1),c||e.push(0)):c?(e.push(1),e.push(2)):(d&&this.to||(e.push(0),e.push(1),e.push(2)),e.push(3)),e.sort(),e}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return eV.from(this)}toJSON(){let a=a=>null==a?null:a.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:a(this.gasLimit),gasPrice:a(this.gasPrice),maxPriorityFeePerGas:a(this.maxPriorityFeePerGas),maxFeePerGas:a(this.maxFeePerGas),value:a(this.value),chainId:a(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[eM](){return this.toString()}toString(){let a=[],b=b=>{let c=this[b];"string"==typeof c&&(c=JSON.stringify(c)),a.push(`${b}: ${c}`)};this.type&&b("type"),b("to"),b("data"),b("nonce"),b("gasLimit"),b("value"),null!=this.chainId&&b("chainId"),this.signature&&(b("from"),a.push(`signature: ${this.signature.toString()}`));let c=this.authorizationList;if(c){let b=[];for(let a of c){let c=[];c.push(`address: ${JSON.stringify(a.address)}`),null!=a.nonce&&c.push(`nonce: ${a.nonce}`),null!=a.chainId&&c.push(`chainId: ${a.chainId}`),a.signature&&c.push(`signature: ${a.signature.toString()}`),b.push(`Authorization { ${c.join(", ")} }`)}a.push(`authorizations: [ ${b.join(", ")} ]`)}return`Transaction { ${a.join(", ")} }`}static from(a){if(null==a)return new eV;if("string"==typeof a){let b=s(a);if(b[0]>=127)return eV.from(function(a){let b=eC(a);n(Array.isArray(b)&&(9===b.length||6===b.length),"invalid field count for legacy transaction","data",a);let c={type:0,nonce:eQ(b[0],"nonce"),gasPrice:eR(b[1],"gasPrice"),gasLimit:eR(b[2],"gasLimit"),to:eO(b[3]),value:eR(b[4],"value"),data:x(b[5]),chainId:eG};if(6===b.length)return c;let d=eR(b[6],"v"),e=eR(b[7],"r"),f=eR(b[8],"s");if(e===eG&&f===eG)c.chainId=d;else{let a=(d-eK)/eH;a<eG&&(a=eG),c.chainId=a,n(a!==eG||d===eI||d===eJ,"non-canonical legacy v","v",b[6]),c.signature=cp.from({r:C(b[7],32),s:C(b[8],32),v:d})}return c}(b));switch(b[0]){case 1:return eV.from(function(a){let b=eC(s(a).slice(1));n(Array.isArray(b)&&(8===b.length||11===b.length),"invalid field count for transaction type: 1","data",x(a));let c={type:1,chainId:eR(b[0],"chainId"),nonce:eQ(b[1],"nonce"),gasPrice:eR(b[2],"gasPrice"),gasLimit:eR(b[3],"gasLimit"),to:eO(b[4]),value:eR(b[5],"value"),data:x(b[6]),accessList:eP(b[7],"accessList")};return 8===b.length||eU(c,b.slice(8)),c}(b));case 2:return eV.from(function(a){let b=eC(s(a).slice(1));n(Array.isArray(b)&&(9===b.length||12===b.length),"invalid field count for transaction type: 2","data",x(a));let c={type:2,chainId:eR(b[0],"chainId"),nonce:eQ(b[1],"nonce"),maxPriorityFeePerGas:eR(b[2],"maxPriorityFeePerGas"),maxFeePerGas:eR(b[3],"maxFeePerGas"),gasPrice:null,gasLimit:eR(b[4],"gasLimit"),to:eO(b[5]),value:eR(b[6],"value"),data:x(b[7]),accessList:eP(b[8],"accessList")};return 9===b.length||eU(c,b.slice(9)),c}(b));case 3:return eV.from(function(a){let b=eC(s(a).slice(1)),c="3",d=null,e=null;if(4===b.length&&Array.isArray(b[0])){c="3 (network format)";let a=b[1],d=b[2],f=b[3];n(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),n(Array.isArray(d),"invalid network format: commitments not an array","fields[2]",d),n(Array.isArray(f),"invalid network format: proofs not an array","fields[3]",f),n(a.length===d.length,"invalid network format: blobs/commitments length mismatch","fields",b),n(a.length===f.length,"invalid network format: blobs/proofs length mismatch","fields",b),e=[];for(let c=0;c<b[1].length;c++)e.push({data:a[c],commitment:d[c],proof:f[c]});b=b[0]}else if(5===b.length&&Array.isArray(b[0])){c="3 (EIP-7594 network format)",d=M(b[1]);let a=b[2],f=b[3],g=b[4];n(1===d,`unsupported EIP-7594 network format version: ${d}`,"fields[1]",d),n(Array.isArray(a),"invalid EIP-7594 network format: blobs not an array","fields[2]",a),n(Array.isArray(f),"invalid EIP-7594 network format: commitments not an array","fields[3]",f),n(Array.isArray(g),"invalid EIP-7594 network format: proofs not an array","fields[4]",g),n(a.length===f.length,"invalid network format: blobs/commitments length mismatch","fields",b),n(128*a.length===g.length,"invalid network format: blobs/proofs length mismatch","fields",b),e=[];for(let b=0;b<a.length;b++){let c=[];for(let a=0;a<128;a++)c.push(g[128*b+a]);e.push({data:a[b],commitment:f[b],proof:y(c)})}b=b[0]}n(Array.isArray(b)&&(11===b.length||14===b.length),`invalid field count for transaction type: ${c}`,"data",x(a));let f={type:3,chainId:eR(b[0],"chainId"),nonce:eQ(b[1],"nonce"),maxPriorityFeePerGas:eR(b[2],"maxPriorityFeePerGas"),maxFeePerGas:eR(b[3],"maxFeePerGas"),gasPrice:null,gasLimit:eR(b[4],"gasLimit"),to:eO(b[5]),value:eR(b[6],"value"),data:x(b[7]),accessList:eP(b[8],"accessList"),maxFeePerBlobGas:eR(b[9],"maxFeePerBlobGas"),blobVersionedHashes:b[10],blobWrapperVersion:d};e&&(f.blobs=e),n(null!=f.to,`invalid address for transaction type: ${c}`,"data",a),n(Array.isArray(f.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",a);for(let b=0;b<f.blobVersionedHashes.length;b++)n(u(f.blobVersionedHashes[b],32),`invalid blobVersionedHash at index ${b}: must be length 32`,"data",a);return 11===b.length||eU(f,b.slice(11)),f}(b));case 4:return eV.from(function(a){let b=eC(s(a).slice(1));n(Array.isArray(b)&&(10===b.length||13===b.length),"invalid field count for transaction type: 4","data",x(a));let c={type:4,chainId:eR(b[0],"chainId"),nonce:eQ(b[1],"nonce"),maxPriorityFeePerGas:eR(b[2],"maxPriorityFeePerGas"),maxFeePerGas:eR(b[3],"maxFeePerGas"),gasPrice:null,gasLimit:eR(b[4],"gasLimit"),to:eO(b[5]),value:eR(b[6],"value"),data:x(b[7]),accessList:eP(b[8],"accessList"),authorizationList:function(a,b){try{if(!Array.isArray(a))throw Error("authorizationList: invalid array");let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(!Array.isArray(d))throw Error(`authorization[${c}]: invalid array`);if(6!==d.length)throw Error(`authorization[${c}]: wrong length`);if(!d[1])throw Error(`authorization[${c}]: null address`);b.push({address:eO(d[1]),nonce:eR(d[2],"nonce"),chainId:eR(d[0],"chainId"),signature:cp.from({yParity:eQ(d[3],"yParity"),r:C(d[4],32),s:C(d[5],32)})})}return b}catch(c){n(!1,c.message,b,a)}}(b[9],"authorizationList")};return 10===b.length||eU(c,b.slice(10)),c}(b))}m(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let b=new eV;return null!=a.type&&(b.type=a.type),null!=a.to&&(b.to=a.to),null!=a.nonce&&(b.nonce=a.nonce),null!=a.gasLimit&&(b.gasLimit=a.gasLimit),null!=a.gasPrice&&(b.gasPrice=a.gasPrice),null!=a.maxPriorityFeePerGas&&(b.maxPriorityFeePerGas=a.maxPriorityFeePerGas),null!=a.maxFeePerGas&&(b.maxFeePerGas=a.maxFeePerGas),null!=a.maxFeePerBlobGas&&(b.maxFeePerBlobGas=a.maxFeePerBlobGas),null!=a.data&&(b.data=a.data),null!=a.value&&(b.value=a.value),null!=a.chainId&&(b.chainId=a.chainId),null!=a.signature&&(b.signature=cp.from(a.signature)),null!=a.accessList&&(b.accessList=a.accessList),null!=a.authorizationList&&(b.authorizationList=a.authorizationList),null!=a.blobVersionedHashes&&(b.blobVersionedHashes=a.blobVersionedHashes),null!=a.kzg&&(b.kzg=a.kzg),null!=a.blobWrapperVersion&&(b.blobWrapperVersion=a.blobWrapperVersion),null!=a.blobs&&(b.blobs=a.blobs),null!=a.hash&&(n(b.isSigned(),"unsigned transaction cannot define '.hash'","tx",a),n(b.hash===a.hash,"hash mismatch","tx",a)),null!=a.from&&(n(b.isSigned(),"unsigned transaction cannot define '.from'","tx",a),n(b.from.toLowerCase()===(a.from||"").toLowerCase(),"from mismatch","tx",a)),b}}BigInt(0);BigInt(58);let eW=RegExp("^(ipfs)://(.*)$","i"),eX=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),eW,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];BigInt(0);function eY(a,b){return function(c){return null==c?b:a(c)}}function eZ(a,b){return c=>{if(b&&null==c)return null;if(!Array.isArray(c))throw Error("not an array");return c.map(b=>a(b))}}function e$(a,b){return c=>{let d={};for(let e in a){let f=e;if(b&&e in b&&!(f in c)){for(let a of b[e])if(a in c){f=a;break}}try{let b=a[e](c[f]);void 0!==b&&(d[e]=b)}catch(b){let a=b instanceof Error?b.message:"not-an-error";m(!1,`invalid value for value.${e} (${a})`,"BAD_DATA",{value:c})}}return d}}function e_(a){return n(u(a,!0),"invalid data","value",a),a}function e0(a){return n(u(a,32),"invalid hash","value",a),a}let e1=e$({address:aM,blockHash:e0,blockNumber:M,data:e_,index:M,removed:eY(function(a){switch(a){case!0:case"true":return!0;case!1:case"false":return!1}n(!1,`invalid boolean; ${JSON.stringify(a)}`,"value",a)},!1),topics:eZ(e0),transactionHash:e0,transactionIndex:M},{index:["logIndex"]}),e2=e$({hash:eY(e0),parentHash:e0,parentBeaconBlockRoot:eY(e0,null),number:M,timestamp:M,nonce:eY(e_),difficulty:I,gasLimit:I,gasUsed:I,stateRoot:eY(e0,null),receiptsRoot:eY(e0,null),blobGasUsed:eY(I,null),excessBlobGas:eY(I,null),miner:eY(aM),prevRandao:eY(e0,null),extraData:e_,baseFeePerGas:eY(I)},{prevRandao:["mixHash"]}),e3=e$({transactionIndex:M,blockNumber:M,transactionHash:e0,address:aM,topics:eZ(e0),data:e_,index:M,blockHash:e0},{index:["logIndex"]}),e4=e$({to:eY(aM,null),from:eY(aM,null),contractAddress:eY(aM,null),index:M,root:eY(x),gasUsed:I,blobGasUsed:eY(I,null),logsBloom:eY(e_),blockHash:e0,hash:e0,logs:eZ(function(a){return e3(a)}),blockNumber:M,cumulativeGasUsed:I,effectiveGasPrice:eY(I),blobGasPrice:eY(I,null),status:eY(M),type:eY(M,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});BigInt(2);new Uint8Array([]);let e5=["function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)","function balanceOf(address) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint256 value)","event Approval(address indexed owner, address indexed spender, uint256 value)"],e6=["function tokenA() view returns (address)","function tokenB() view returns (address)","function reserveA() view returns (uint256)","function reserveB() view returns (uint256)","function totalLPShares() view returns (uint256)","function lpShares(address) view returns (uint256)","function getPrice() view returns (uint256)","function getReserves() view returns (uint256, uint256)","function getSwapPreview(uint256 amountIn, bool isAtoB) view returns (uint256 amountOut, uint256 priceImpact)","function getLPInfo(address provider) view returns (uint256 shares, uint256 sharePercent, uint256 tokenAValue, uint256 tokenBValue)","function addLiquidity(uint256 amountA, uint256 amountB) returns (uint256 shares)","function removeLiquidity(uint256 shares) returns (uint256 amountA, uint256 amountB)","function swapAforB(uint256 amountAIn, uint256 minAmountBOut) returns (uint256 amountBOut)","function swapBforA(uint256 amountBIn, uint256 minAmountAOut) returns (uint256 amountAOut)"],e7=[.5,1,2,5],e8=BigInt(-1),e9=BigInt(0),fa=BigInt(1),fb=BigInt(5),fc={},fd="0000";for(;fd.length<80;)fd+=fd;function fe(a){let b=fd;for(;b.length<a;)b+=b;return BigInt("1"+b.substring(0,a))}function ff(a,b,c){let d=BigInt(b.width);if(b.signed){let b=fa<<d-fa;m(null==c||a>=-b&&a<b,"overflow","NUMERIC_FAULT",{operation:c,fault:"overflow",value:a}),a=a>e9?F(H(a,d),d):-F(H(-a,d),d)}else{let b=fa<<d;m(null==c||a>=0&&a<b,"overflow","NUMERIC_FAULT",{operation:c,fault:"overflow",value:a}),a=(a%b+b)%b&b-fa}return a}function fg(a){"number"==typeof a&&(a=`fixed128x${a}`);let b=!0,c=128,d=18;if("string"==typeof a)if("fixed"===a);else if("ufixed"===a)b=!1;else{let e=a.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);n(e,"invalid fixed format","format",a),b="u"!==e[1],c=parseInt(e[2]),d=parseInt(e[3])}else if(a){let e=a,f=(a,b,c)=>null==e[a]?c:(n(typeof e[a]===b,"invalid fixed format ("+a+" not "+b+")","format."+a,e[a]),e[a]);b=f("signed","boolean",b),c=f("width","number",c),d=f("decimals","number",d)}n(c%8==0,"invalid FixedNumber width (not byte aligned)","format.width",c),n(d<=80,"invalid FixedNumber decimals (too large)","format.decimals",d);let e=(b?"":"u")+"fixed"+String(c)+"x"+String(d);return{signed:b,width:c,decimals:d,name:e}}class fh{format;#as;#at;#au;_value;constructor(a,b,c){q(a,fc,"FixedNumber"),this.#at=b,this.#as=c;let d=function(a,b){let c="";a<e9&&(c="-",a*=e8);let d=a.toString();if(0===b)return c+d;for(;d.length<=b;)d=fd+d;let e=d.length-b;for(d=d.substring(0,e)+"."+d.substring(e);"0"===d[0]&&"."!==d[1];)d=d.substring(1);for(;"0"===d[d.length-1]&&"."!==d[d.length-2];)d=d.substring(0,d.length-1);return c+d}(b,c.decimals);h(this,{format:c.name,_value:d}),this.#au=fe(c.decimals)}get signed(){return this.#as.signed}get width(){return this.#as.width}get decimals(){return this.#as.decimals}get value(){return this.#at}#av(a){n(this.format===a.format,"incompatible format; use fixedNumber.toFormat","other",a)}#aw(a,b){return new fh(fc,a=ff(a,this.#as,b),this.#as)}#ax(a,b){return this.#av(a),this.#aw(this.#at+a.#at,b)}addUnsafe(a){return this.#ax(a)}add(a){return this.#ax(a,"add")}#ay(a,b){return this.#av(a),this.#aw(this.#at-a.#at,b)}subUnsafe(a){return this.#ay(a)}sub(a){return this.#ay(a,"sub")}#az(a,b){return this.#av(a),this.#aw(this.#at*a.#at/this.#au,b)}mulUnsafe(a){return this.#az(a)}mul(a){return this.#az(a,"mul")}mulSignal(a){this.#av(a);let b=this.#at*a.#at;return m(b%this.#au===e9,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#aw(b/this.#au,"mulSignal")}#aA(a,b){return m(a.#at!==e9,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#av(a),this.#aw(this.#at*this.#au/a.#at,b)}divUnsafe(a){return this.#aA(a)}div(a){return this.#aA(a,"div")}divSignal(a){m(a.#at!==e9,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#av(a);let b=this.#at*this.#au;return m(b%a.#at===e9,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#aw(b/a.#at,"divSignal")}cmp(a){let b=this.value,c=a.value,d=this.decimals-a.decimals;return(d>0?c*=fe(d):d<0&&(b*=fe(-d)),b<c)?-1:+(b>c)}eq(a){return 0===this.cmp(a)}lt(a){return 0>this.cmp(a)}lte(a){return 0>=this.cmp(a)}gt(a){return this.cmp(a)>0}gte(a){return this.cmp(a)>=0}floor(){let a=this.#at;return this.#at<e9&&(a-=this.#au-fa),a=this.#at/this.#au*this.#au,this.#aw(a,"floor")}ceiling(){let a=this.#at;return this.#at>e9&&(a+=this.#au-fa),a=this.#at/this.#au*this.#au,this.#aw(a,"ceiling")}round(a){if(null==a&&(a=0),a>=this.decimals)return this;let b=this.decimals-a,c=fb*fe(b-1),d=this.value+c,e=fe(b);return ff(d=d/e*e,this.#as,"round"),new fh(fc,d,this.#as)}isZero(){return this.#at===e9}isNegative(){return this.#at<e9}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(a){return fh.fromString(this.toString(),a)}static fromValue(a,b,c){let d=null==b?0:M(b),e=fg(c),f=I(a,"value"),g=d-e.decimals;if(g>0){let b=fe(g);m(f%b===e9,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:a}),f/=b}else g<0&&(f*=fe(-g));return ff(f,e,"fromValue"),new fh(fc,f,e)}static fromString(a,b){let c=a.match(/^(-?)([0-9]*)\.?([0-9]*)$/);n(c&&c[2].length+c[3].length>0,"invalid FixedNumber string value","value",a);let d=fg(b),e=c[2]||"0",f=c[3]||"";for(;f.length<d.decimals;)f+=fd;m(f.substring(d.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:a}),f=f.substring(0,d.decimals);let g=BigInt(c[1]+e+f);return ff(g,d,"fromString"),new fh(fc,g,d)}static fromBytes(a,b){let c=L(s(a,"value")),d=fg(b);return d.signed&&(c=F(c,d.width)),ff(c,d,"fromBytes"),new fh(fc,c,d)}}let fi=["wei","kwei","mwei","gwei","szabo","finney","ether"];function fj(a,b){n("string"==typeof a,"value must be a string","value",a);let c=18;if("string"==typeof b){let a=fi.indexOf(b);n(a>=0,"invalid unit","unit",b),c=3*a}else null!=b&&(c=M(b,"unit"));return fh.fromString(a,{decimals:c,width:512}).value}let fk=a=>{let b="string"==typeof a?a:a.toFixed(18),c=b.split(".");return c.length>1&&c[1].length>18?fj(c[0]+"."+c[1].slice(0,18),18):fj(b,18)},fl=a=>parseFloat(function(a,b){let c=18;return c=M(b,"unit"),fh.fromValue(a,c,{decimals:c,width:512}).toString()}(a,18)),fm=(a,b=4)=>0===a?"0":a<1e-4?a.toExponential(2):a.toFixed(b),fn=a=>a?`${a.slice(0,6)}...${a.slice(-4)}`:"",fo=a=>a>5?"text-red-400":a>2?"text-amber-400":"text-emerald-400",fp=(a,b,c)=>{if(!a||!b||!c)return 0;let d=997*a;return d*c/(1e3*b+d)},fq=(a,b,c)=>{let d=fp(a,b,c),e=a*c/b;return e?(e-d)/e*100:0},fr=a=>{try{return aM(a),!0}catch{return!1}},fs=0,ft=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var fu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let fv=(0,f.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:g,iconNode:h,...i},j)=>(0,f.createElement)("svg",{ref:j,...fu,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:ft("lucide",e),...i},[...h.map(([a,b])=>(0,f.createElement)(a,b)),...Array.isArray(g)?g:[g]])),fw=(a,b)=>{let c=(0,f.forwardRef)(({className:c,...d},e)=>(0,f.createElement)(fv,{ref:e,iconNode:b,className:ft(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},fx=fw("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),fy=fw("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function fz(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let fA=(0,f.forwardRef)(({variant:a="primary",size:b="md",loading:c,className:d,children:f,disabled:g,...h},i)=>(0,e.jsx)("button",{ref:i,disabled:g||c,className:fz("font-mono font-bold tracking-widest uppercase transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:transform-none",{"bg-[#00d9ff] text-[#07090f] hover:bg-[#00c4e8] hover:shadow-glow active:scale-[0.98]":"primary"===a,"bg-transparent border border-violet-500 text-violet-400 hover:bg-violet-dim active:scale-[0.98]":"secondary"===a,"bg-transparent border border-red-500 text-red-400 hover:bg-red-500/10 active:scale-[0.98]":"danger"===a,"bg-transparent border border-border text-gray-400 hover:border-[#00d9ff] hover:text-[#00d9ff]":"ghost"===a},{"px-3 py-2 text-[0.65rem]":"sm"===b,"px-5 py-3 text-[0.75rem]":"md"===b,"w-full px-6 py-4 text-[0.8rem]":"lg"===b},d),...h,children:c?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)("span",{className:"inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Processing..."]}):f}));function fB({connected:a,address:b,network:c,blockNumber:d,connecting:f,onConnect:g,onDisconnect:h}){return(0,e.jsxs)("header",{className:"relative z-20 flex justify-between items-center px-6 md:px-10 py-4 border-b border-border bg-bg/80 backdrop-blur-xl",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"w-7 h-7 border border-[#00d9ff]/60 flex items-center justify-center",children:(0,e.jsx)("div",{className:"w-3 h-3 bg-[#00d9ff] animate-pulse2"})}),(0,e.jsxs)("span",{className:"font-display font-extrabold text-lg tracking-tight",children:[(0,e.jsx)("span",{className:"text-[#00d9ff]",children:"Simple"}),(0,e.jsx)("span",{className:"text-white",children:"Swap"})]}),(0,e.jsx)("span",{className:"hidden md:block font-mono text-[0.55rem] tracking-[3px] text-gray-600 uppercase border border-border px-2 py-1",children:"DeFi Lab"})]}),(0,e.jsx)("div",{className:"hidden md:flex items-center gap-6",children:a&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(fx,{size:12,className:"text-emerald-400"}),(0,e.jsx)("span",{className:"font-mono text-[0.65rem] text-gray-500 tracking-widest uppercase",children:c})]}),(0,e.jsxs)("div",{className:"font-mono text-[0.65rem] text-gray-500",children:["Block"," ",(0,e.jsxs)("span",{className:"text-[#00d9ff]",children:["#",d.toLocaleString()]})]})]})}),(0,e.jsx)("div",{className:"flex items-center gap-3",children:a?(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border border-emerald-500/40 bg-emerald-500/5",children:[(0,e.jsx)(fy,{size:12,className:"text-emerald-400"}),(0,e.jsx)("span",{className:"font-mono text-[0.7rem] text-emerald-400 tracking-widest",children:fn(b)})]}),(0,e.jsx)(fA,{variant:"ghost",size:"sm",onClick:h,children:"Disconnect"})]}):(0,e.jsx)(fA,{variant:"primary",size:"sm",loading:f,onClick:g,children:f?"Connecting":"[ Connect Wallet ]"})})]})}function fC({className:a,children:b,glow:c,...d}){return(0,e.jsxs)("div",{className:fz("relative bg-card border border-border overflow-hidden",c&&"shadow-glow-sm",a),...d,children:[(0,e.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#00d9ff]/40 to-transparent"}),b]})}function fD({className:a,children:b,...c}){return(0,e.jsxs)("div",{className:fz("flex items-center gap-3 font-mono text-[0.62rem] tracking-[3px] uppercase text-gray-500 mb-5",a),...c,children:[b,(0,e.jsx)("div",{className:"flex-1 h-px bg-border"})]})}function fE({pool:a,symbolA:b,symbolB:c}){let d=a.reserveA*a.price,f=d+a.reserveB,g=f>0?d/f*100:50,h=100-g;return(0,e.jsxs)(fC,{className:"p-6",children:[(0,e.jsx)(fD,{children:"â¬¡ Pool Status"}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[(0,e.jsxs)("div",{className:"bg-surface border border-border p-4",children:[(0,e.jsxs)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:["Reserve ",b]}),(0,e.jsx)("div",{className:"font-display font-extrabold text-2xl text-[#00d9ff]",children:a.reserveA>0?fm(a.reserveA,2):"â€”"}),(0,e.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-600 mt-1",children:b})]}),(0,e.jsxs)("div",{className:"bg-surface border border-border p-4",children:[(0,e.jsxs)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:["Reserve ",c]}),(0,e.jsx)("div",{className:"font-display font-extrabold text-2xl text-violet-400",children:a.reserveB>0?fm(a.reserveB,2):"â€”"}),(0,e.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-600 mt-1",children:c})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-[#00d9ff]/5 to-violet-500/5 border border-[#00d9ff]/25 px-5 py-4 mb-5",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-1",children:"Current Price"}),(0,e.jsxs)("div",{className:"font-display font-extrabold text-xl text-white",children:["1 ",b," ="," ",(0,e.jsx)("span",{className:"text-[#00d9ff]",children:a.price>0?fm(a.price,4):"â€”"})," ",c]})]}),(0,e.jsxs)("div",{className:"text-right",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-1",children:"K = x\xb7y"}),(0,e.jsx)("div",{className:"font-display font-bold text-lg text-violet-400",children:a.kValue>0?a.kValue.toExponential(3):"â€”"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Pool Composition"}),(0,e.jsxs)("div",{className:"flex h-8 border border-border overflow-hidden",children:[(0,e.jsxs)("div",{className:"flex items-center justify-center text-[0.62rem] font-mono font-bold text-[#00d9ff] bg-[#00d9ff]/10 transition-all duration-700",style:{width:`${g}%`},children:[g.toFixed(0),"%"]}),(0,e.jsxs)("div",{className:"flex items-center justify-center text-[0.62rem] font-mono font-bold text-violet-400 bg-violet-500/10 transition-all duration-700",style:{width:`${h}%`},children:[h.toFixed(0),"%"]})]}),(0,e.jsxs)("div",{className:"flex justify-between mt-1.5",children:[(0,e.jsx)("span",{className:"font-mono text-[0.6rem] text-[#00d9ff]",children:b}),(0,e.jsx)("span",{className:"font-mono text-[0.6rem] text-violet-400",children:c})]})]}),(0,e.jsxs)("div",{className:"mt-5 bg-[#00d9ff]/3 border border-[#00d9ff]/15 p-4",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"AMM Formula"}),(0,e.jsx)("div",{className:"text-center font-mono text-[#00d9ff] text-xl font-bold tracking-wide my-2",children:"x \xb7 y = k"}),(0,e.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-500 leading-relaxed",children:"Price adjusts automatically as tokens flow in/out. 0.3% fee per swap stays in pool for LPs."})]})]})}fA.displayName="Button";let fF=(0,f.forwardRef)(({badge:a,badgeColor:b="accent",balance:c,onMax:d,label:f,className:g,...h},i)=>(0,e.jsxs)("div",{className:"space-y-2",children:[(f||void 0!==c)&&(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("span",{className:"font-mono text-[0.65rem] tracking-widest text-gray-500 uppercase",children:f}),void 0!==c&&(0,e.jsxs)("button",{type:"button",onClick:d,className:"font-mono text-[0.65rem] text-emerald-400 hover:text-emerald-300 tracking-wide transition-colors",children:["BAL: ",c.toFixed(4)]})]}),(0,e.jsxs)("div",{className:fz("flex border border-border bg-surface transition-all duration-200","focus-within:border-[#00d9ff] focus-within:shadow-glow-sm"),children:[(0,e.jsx)("input",{ref:i,type:"number",min:"0",className:fz("flex-1 bg-transparent outline-none px-4 py-3.5","font-mono text-base text-white placeholder-gray-600","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",g),...h}),(0,e.jsx)("div",{className:fz("flex items-center px-4 border-l border-border","font-mono text-[0.75rem] font-bold tracking-widest whitespace-nowrap","accent"===b?"text-[#00d9ff]":"text-violet-400"),children:a})]})]}));fF.displayName="TokenInput";let fG=(0,f.forwardRef)(({label:a,valid:b,...c},d)=>(0,e.jsxs)("div",{className:"space-y-1.5",children:[(0,e.jsx)("label",{className:"block font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase",children:a}),(0,e.jsx)("input",{ref:d,className:fz("w-full bg-surface border px-3.5 py-2.5","font-mono text-[0.72rem] text-white placeholder-gray-600 outline-none","transition-colors duration-200",!0===b?"border-emerald-500":!1===b?"border-red-500":"border-border focus:border-[#00d9ff]"),spellCheck:!1,...c})]}));function fH({network:a,blockNumber:b,connected:c,onLoad:d,savedPairs:g,activePairIndex:h,onSelectPair:i}){let[j,k]=(0,f.useState)({tokenA:"",tokenB:"",swap:""}),[l,m]=(0,f.useState)(!1),[n,o]=(0,f.useState)(null),p=j.tokenA?fr(j.tokenA):void 0,q=j.tokenB?fr(j.tokenB):void 0,r=j.swap?fr(j.swap):void 0,s=p&&q&&r,t=async()=>{if(s){if(!c)return void o({msg:"Please connect wallet first",ok:!1});m(!0),o(null);try{await d(j),localStorage.setItem("defi_last_addrs",JSON.stringify(j)),o({msg:"âœ“ Contracts loaded successfully",ok:!0}),setTimeout(()=>o(null),3e3)}catch(b){let a="Failed to load contracts";b instanceof Error&&(a=b.message.includes("Invalid")?b.message:b.message.includes("network")?"Network error. Check your connection":b.message.slice(0,100)),o({msg:a,ok:!1})}finally{m(!1)}}};return(0,e.jsxs)(fC,{className:"p-6 mb-6",children:[(0,e.jsx)(fD,{children:"âš™ Contract Setup"}),(0,e.jsx)("div",{className:"grid grid-cols-3 gap-px bg-border mb-5",children:[["Network",a||"â€”"],["Block",b>0?`#${b}`:"â€”"],["Fee","0.3%"]].map(([a,b])=>(0,e.jsxs)("div",{className:"bg-surface px-3 py-2.5",children:[(0,e.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-500 uppercase mb-1",children:a}),(0,e.jsx)("div",{className:"font-mono text-[0.75rem] font-bold text-emerald-400",children:b})]},a))}),g.length>0&&(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("div",{className:"font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Quick Load (Saved Pairs)"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map((a,b)=>(0,e.jsxs)("button",{onClick:()=>i(b),className:fz("px-3 py-2 font-mono text-[0.7rem] border transition-all duration-200",h===b?"border-[#00d9ff] text-[#00d9ff] bg-[#00d9ff]/5":"border-border text-gray-400 hover:border-gray-500 hover:text-gray-200"),children:[a.symbolA," / ",a.symbolB]},a.swap))})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(fG,{label:"Token A Address",placeholder:"0x... (MyToken A)",value:j.tokenA,valid:p,onChange:a=>k(b=>({...b,tokenA:a.target.value}))}),(0,e.jsx)(fG,{label:"Token B Address",placeholder:"0x... (MyToken B)",value:j.tokenB,valid:q,onChange:a=>k(b=>({...b,tokenB:a.target.value}))}),(0,e.jsx)(fG,{label:"SimpleSwap Address",placeholder:"0x... (SimpleSwap contract)",value:j.swap,valid:r,onChange:a=>k(b=>({...b,swap:a.target.value}))})]}),(0,e.jsx)(fA,{variant:"primary",size:"lg",loading:l,disabled:!s||!c,onClick:t,className:"mt-4",children:c?"[ Load Contracts ]":"[ Connect Wallet First ]"}),n&&(0,e.jsx)("div",{className:`mt-3 p-3 font-mono text-[0.7rem] border ${n.ok?"border-emerald-500/40 text-emerald-400 bg-emerald-500/5":"border-red-500/40 text-red-400 bg-red-500/5"}`,children:n.msg})]})}function fI(){let[a,b]=(0,f.useState)("1000"),[c,d]=(0,f.useState)("2000"),[g,h]=(0,f.useState)("10"),i=parseFloat(a)||0,j=parseFloat(c)||0,k=parseFloat(g)||0,l=i*j,m=k&&i?j*k/(i+k):0,n=fp(k,i,j),o=fq(k,i,j),p=i+k,q=j-n,r="w-full bg-bg border border-border px-3 py-2 font-mono text-[0.75rem] text-white outline-none focus:border-[#00d9ff] transition-colors placeholder-gray-700";return(0,e.jsxs)(fC,{className:"p-6",children:[(0,e.jsx)(fD,{children:"\uD83D\uDCD0 Live AMM Calculator"}),(0,e.jsxs)("div",{className:"bg-[#00d9ff]/3 border border-[#00d9ff]/15 p-4 mb-5",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"With 0.3% Fee"}),(0,e.jsxs)("div",{className:"font-mono text-[0.68rem] text-gray-400 leading-[2.2] bg-bg/50 p-3",children:["out = (",(0,e.jsx)("span",{className:"text-violet-400",children:"reserveB"})," \xd7"," ",(0,e.jsx)("span",{className:"text-[#00d9ff]",children:"amtIn"})," \xd7 997)",(0,e.jsx)("br",{}),"\xa0\xa0\xa0\xa0 \xf7 (",(0,e.jsx)("span",{className:"text-violet-400",children:"reserveA"})," \xd7 1000"," ","+ ",(0,e.jsx)("span",{className:"text-[#00d9ff]",children:"amtIn"})," \xd7 997)"]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Reserve A"}),(0,e.jsx)("input",{className:r,value:a,onChange:a=>b(a.target.value),placeholder:"1000"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Reserve B"}),(0,e.jsx)("input",{className:r,value:c,onChange:a=>d(a.target.value),placeholder:"2000"})]})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Amount A In"}),(0,e.jsx)("input",{className:r,value:g,onChange:a=>h(a.target.value),placeholder:"10"})]}),k>0&&i>0&&j>0?(0,e.jsxs)("div",{className:"space-y-2 bg-bg border border-border p-4",children:[(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,e.jsxs)("span",{className:"text-gray-500",children:["k = ",i," \xd7 ",j]}),(0,e.jsx)("span",{className:"text-violet-400 font-bold",children:l.toLocaleString()})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Out (no fee)"}),(0,e.jsx)("span",{className:"text-amber-400",children:fm(m,4)})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Out (0.3% fee)"}),(0,e.jsx)("span",{className:"text-[#00d9ff] font-bold",children:fm(n,4)})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Price Impact"}),(0,e.jsxs)("span",{className:fz("font-bold",fo(o)),children:[o.toFixed(2),"%"]})]}),(0,e.jsx)("div",{className:"h-px bg-border"}),(0,e.jsxs)("div",{className:"font-mono text-[0.62rem] text-gray-600",children:["Pool after: ",fm(p,2)," A / ",fm(q,2)," B"]})]}):(0,e.jsx)("div",{className:"bg-bg border border-border p-4 font-mono text-[0.7rem] text-gray-600 text-center",children:"Enter values to calculate"})]})}fG.displayName="AddressInput";let fJ=[{label:"Add Liquidity",code:"approve() â†’ addLiquidity()",color:"text-emerald-400"},{label:"Swap A â†’ B",code:"approve() â†’ swapAforB()",color:"text-[#00d9ff]"},{label:"Swap B â†’ A",code:"approve() â†’ swapBforA()",color:"text-violet-400"},{label:"Preview",code:"getSwapPreview(amtIn, bool)",color:"text-amber-400"},{label:"Remove LP",code:"removeLiquidity(shares)",color:"text-red-400"},{label:"Pool Info",code:"getReserves() / getPrice()",color:"text-gray-400"}];function fK(){return(0,e.jsxs)(fC,{className:"p-6",children:[(0,e.jsx)(fD,{children:"\uD83D\uDCCB Quick Reference"}),(0,e.jsx)("div",{className:"divide-y divide-border",children:fJ.map(({label:a,code:b,color:c})=>(0,e.jsxs)("div",{className:"flex justify-between items-center py-2.5",children:[(0,e.jsx)("span",{className:"font-mono text-[0.68rem] text-gray-500",children:a}),(0,e.jsx)("span",{className:`font-mono text-[0.65rem] font-bold ${c}`,children:b})]},a))})]})}let fL=fw("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),fM=fw("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);function fN({pool:a,user:b,symbolA:c,symbolB:d,tokenAContract:g,tokenBContract:h,swapContract:i,onSuccess:j,onNotify:k}){let[l,m]=(0,f.useState)(""),[n,o]=(0,f.useState)(!0),[p,q]=(0,f.useState)(.5),[r,s]=(0,f.useState)(!1),t=n?a.reserveA:a.reserveB,u=n?a.reserveB:a.reserveA,v=n?b.balanceA:b.balanceB,w=parseFloat(l)||0,x=fp(w,t,u),y=fq(w,t,u),z=.003*w,A=x*(1-p/100),B=w>0&&a.reserveA>0,C=(0,f.useCallback)(async()=>{if(!i||!w)return;let a=n?g:h;if(a){s(!0);try{if(w>v)throw Error("Insufficient balance");if(w<=0)throw Error("Amount must be greater than 0");if(y>15)throw Error("Price impact too high (>15%)");let b=fk(l),e=A.toFixed(18),f=fk(e),g=i.target;k(`Approving ${n?c:d}...`,"info");let h=await a.approve(g,b);await h.wait(),k("Executing swap...","info");let o=n?await i.swapAforB(b,f):await i.swapBforA(b,f),p=await o.wait(),q=`${fm(w)} ${n?c:d} â†’ ${fm(x)} ${n?d:c}`;k(`âœ“ ${q}`,"success"),m(""),j(q,p.hash)}catch(b){let a="Swap failed";b instanceof Error&&(a=b.message.includes("user rejected")?"Transaction rejected by user":b.message.includes("insufficient funds")?"Insufficient funds for gas":b.message.includes("Insufficient balance")||b.message.includes("Price impact")?b.message:b.message.length>80?b.message.slice(0,80)+"...":b.message),k(a,"error")}finally{s(!1)}}},[i,g,h,n,w,A,x,c,d,v,y,k,j]);return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(fF,{label:"You Pay",badge:n?c:d,badgeColor:n?"accent":"violet",balance:v,onMax:()=>m(v.toString()),value:l,onChange:a=>m(a.target.value),placeholder:"0.0"}),(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)("button",{onClick:()=>{o(a=>!a),m("")},className:"w-10 h-10 border border-border bg-surface hover:border-[#00d9ff] hover:text-[#00d9ff] text-gray-500 flex items-center justify-center transition-all duration-200 hover:rotate-180",children:(0,e.jsx)(fM,{size:16})})}),(0,e.jsx)(fF,{label:"You Receive",badge:n?d:c,badgeColor:n?"violet":"accent",value:B?fm(x):"",readOnly:!0,placeholder:"0.0",className:"cursor-default opacity-70"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Slippage Tolerance"}),(0,e.jsx)("div",{className:"flex gap-2",children:e7.map(a=>(0,e.jsxs)("button",{onClick:()=>q(a),className:fz("flex-1 py-2 font-mono text-[0.68rem] border transition-all duration-150",p===a?"border-[#00d9ff] text-[#00d9ff] bg-[#00d9ff]/5":"border-border text-gray-500 hover:border-[#00d9ff]/50 hover:text-gray-300"),children:[a,"%"]},a))})]}),B&&(0,e.jsxs)("div",{className:"bg-surface border border-border p-4 space-y-2 animate-fade-in",children:[(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Amount Out"}),(0,e.jsxs)("span",{className:"text-[#00d9ff] font-bold",children:[fm(x)," ",n?d:c]})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Price Impact"}),(0,e.jsxs)("span",{className:fz("font-bold",fo(y)),children:[y.toFixed(2),"%"]})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Swap Fee (0.3%)"}),(0,e.jsxs)("span",{className:"text-gray-300",children:[fm(z)," ",n?c:d]})]}),(0,e.jsx)("div",{className:"h-px bg-border"}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsxs)("span",{className:"text-gray-500",children:["Min. Received (",p,"% slip)"]}),(0,e.jsxs)("span",{className:"text-gray-300",children:[fm(A)," ",n?d:c]})]})]}),(0,e.jsx)(fA,{variant:"primary",size:"lg",loading:r,disabled:!w||!i||0===a.reserveA,onClick:C,children:"[ Execute Swap ]"})]})}function fO({pool:a,user:b,symbolA:c,symbolB:d,tokenAContract:g,tokenBContract:h,swapContract:i,onSuccess:j,onNotify:k}){var l,m,n;let[o,p]=(0,f.useState)(""),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)(!1),u=parseFloat(o)||0,v=parseFloat(q)||0,w=u>0&&v>0?(l=a.reserveA,m=a.reserveB,0===(n=a.totalLPShares)?Math.sqrt(u*v):Math.min(u/l*n,v/m*n)):0,x=a.totalLPShares+w,y=x>0?w/x*100:0,z=(a.reserveA+u)*(a.reserveB+v),A=b=>{p(b);let c=parseFloat(b);c>0&&a.reserveA>0&&r((c*(a.reserveB/a.reserveA)).toFixed(6))},B=b=>{r(b);let c=parseFloat(b);c>0&&a.reserveB>0&&p((c*(a.reserveA/a.reserveB)).toFixed(6))},C=(0,f.useCallback)(async()=>{if(i&&g&&h&&u&&v){t(!0);try{if(u>b.balanceA)throw Error(`Insufficient ${c} balance`);if(v>b.balanceB)throw Error(`Insufficient ${d} balance`);if(u<=0||v<=0)throw Error("Amounts must be greater than 0");let a=fk(o),e=fk(q),f=i.target;k(`Approving ${c}...`,"info");let l=await g.approve(f,a);await l.wait(),k(`Approving ${d}...`,"info");let m=await h.approve(f,e);await m.wait(),k("Adding liquidity...","info");let n=await i.addLiquidity(a,e),s=await n.wait(),t=`Added ${fm(u)} ${c} + ${fm(v)} ${d}`;k(`âœ“ ${t}`,"success"),p(""),r(""),j(t,s.hash)}catch(b){let a="Failed to add liquidity";b instanceof Error&&(a=b.message.includes("user rejected")?"Transaction rejected by user":b.message.includes("insufficient funds")?"Insufficient funds for gas":b.message.includes("Insufficient")?b.message:b.message.length>80?b.message.slice(0,80)+"...":b.message),k(a,"error")}finally{t(!1)}}},[i,g,h,o,q,u,v,c,d,b.balanceA,b.balanceB,k,j]);return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("p",{className:"font-mono text-[0.7rem] text-gray-500 leading-relaxed",children:["Deposit both tokens to earn ",(0,e.jsx)("span",{className:"text-[#00d9ff]",children:"0.3% fee"})," on every swap. Receive LP shares proportional to your contribution."]}),(0,e.jsx)(fF,{label:`Amount ${c}`,badge:c,badgeColor:"accent",balance:b.balanceA,onMax:()=>A(b.balanceA.toString()),value:o,onChange:a=>A(a.target.value),placeholder:"0.0"}),(0,e.jsx)(fF,{label:`Amount ${d}`,badge:d,badgeColor:"violet",balance:b.balanceB,onMax:()=>B(b.balanceB.toString()),value:q,onChange:a=>B(a.target.value),placeholder:"0.0"}),w>0&&(0,e.jsxs)("div",{className:"bg-surface border border-border p-4 space-y-2 animate-fade-in",children:[(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"LP Shares Minted"}),(0,e.jsx)("span",{className:"text-[#00d9ff] font-bold",children:fm(w,6)})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Your Pool Share"}),(0,e.jsxs)("span",{className:"text-emerald-400 font-bold",children:[y.toFixed(2),"%"]})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"K After Deposit"}),(0,e.jsx)("span",{className:"text-violet-400",children:z.toExponential(3)})]})]}),(0,e.jsx)(fA,{variant:"secondary",size:"lg",loading:s,disabled:!u||!v||!i,onClick:C,children:"[ Add Liquidity ]"}),b.lpShares>0&&(0,e.jsxs)("div",{className:"border border-violet-500/30 p-4 bg-violet-500/3",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-violet-400 uppercase mb-3",children:"Your Position"}),(0,e.jsx)("div",{className:"space-y-2",children:[["LP Shares",fm(b.lpShares,6)],["Pool Share",b.lpSharePct.toFixed(2)+"%"],[`${c} Value`,fm(b.lpTokenAValue,4)],[`${d} Value`,fm(b.lpTokenBValue,4)]].map(([a,b])=>(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem] border-b border-border/50 pb-2 last:border-0 last:pb-0",children:[(0,e.jsx)("span",{className:"text-gray-500",children:a}),(0,e.jsx)("span",{className:"text-white font-bold",children:b})]},a))})]})]})}function fP({pool:a,user:b,symbolA:c,symbolB:d,swapContract:g,onSuccess:h,onNotify:i}){let[j,k]=(0,f.useState)(""),[l,m]=(0,f.useState)(!1),n=parseFloat(j)||0,o=a.totalLPShares>0?n/a.totalLPShares*a.reserveA:0,p=a.totalLPShares>0?n/a.totalLPShares*a.reserveB:0,q=(0,f.useCallback)(async()=>{if(g&&n){m(!0);try{i("Removing liquidity...","info");let a=await g.removeLiquidity(fk(n)),b=await a.wait(),e=`Removed ${fm(o)} ${c} + ${fm(p)} ${d}`;i(`âœ“ ${e}`,"success"),k(""),h(e,b.hash)}catch(b){let a=b instanceof Error?b.message:"Failed";i(a.length>80?a.slice(0,80)+"...":a,"error")}finally{m(!1)}}},[g,n,o,p,c,d,i,h]);return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("p",{className:"font-mono text-[0.7rem] text-gray-500 leading-relaxed",children:["Burn LP shares to reclaim your proportional tokens â€” including any"," ",(0,e.jsx)("span",{className:"text-emerald-400",children:"accumulated fees"}),"."]}),(0,e.jsx)(fF,{label:"LP Shares to Burn",badge:"LP SHARES",badgeColor:"accent",balance:b.lpShares,onMax:()=>k(b.lpShares.toString()),value:j,onChange:a=>k(a.target.value),placeholder:"0.0"}),n>0&&a.totalLPShares>0&&(0,e.jsxs)("div",{className:"bg-surface border border-red-500/20 p-4 space-y-2 animate-fade-in",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-red-400 uppercase mb-2",children:"You Will Receive"}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsxs)("span",{className:"text-gray-500",children:[c," Return"]}),(0,e.jsx)("span",{className:"text-[#00d9ff] font-bold",children:fm(o,6)})]}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsxs)("span",{className:"text-gray-500",children:[d," Return"]}),(0,e.jsx)("span",{className:"text-violet-400 font-bold",children:fm(p,6)})]}),(0,e.jsx)("div",{className:"h-px bg-border"}),(0,e.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,e.jsx)("span",{className:"text-gray-500",children:"Share Burned"}),(0,e.jsxs)("span",{className:"text-red-400",children:[a.totalLPShares>0?(n/a.totalLPShares*100).toFixed(2):0,"%"]})]})]}),(0,e.jsx)(fA,{variant:"danger",size:"lg",loading:l,disabled:!n||!g||0===b.lpShares,onClick:q,children:"[ Remove Liquidity ]"})]})}let fQ=fw("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),fR={SWAP:{label:"SWAP",color:"text-[#00d9ff]"},ADD_LIQ:{label:"ADD LIQ",color:"text-emerald-400"},REMOVE_LIQ:{label:"REMOVE",color:"text-red-400"}};function fS({records:a}){return(0,e.jsxs)("div",{className:"mt-6 pt-5 border-t border-border",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,e.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[3px] text-gray-600 uppercase",children:"TX History"}),a.length>0&&(0,e.jsx)("button",{onClick:()=>{localStorage.removeItem("defi_tx_history"),window.location.reload()},className:"font-mono text-[0.55rem] text-gray-700 hover:text-red-400 transition-colors uppercase tracking-widest",children:"[ Clear ]"})]}),0===a.length?(0,e.jsx)("div",{className:"font-mono text-[0.68rem] text-gray-600 text-center py-5",children:"No transactions yet"}):(0,e.jsx)("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-thin",children:a.map(a=>{let b=fR[a.type];return(0,e.jsxs)("div",{className:"group flex justify-between items-start py-2.5 border-b border-border/40 animate-slide-up",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,e.jsx)("span",{className:fz("font-mono text-[0.62rem] font-bold tracking-wider",b.color),children:b.label}),(0,e.jsx)("div",{className:"font-mono text-[0.55rem] text-gray-600",children:a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,e.jsxs)("div",{className:"text-right flex flex-col items-end gap-1",children:[(0,e.jsx)("div",{className:"font-mono text-[0.7rem] text-gray-300 leading-tight",children:a.description}),a.hash&&(0,e.jsxs)("a",{href:`https://sepolia.etherscan.io/tx/${a.hash}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 font-mono text-[0.55rem] text-[#00d9ff]/60 hover:text-[#00d9ff] transition-colors",children:["View on Explorer ",(0,e.jsx)(fQ,{size:10})]})]})]},a.id)})})]})}let fT=["SWAP","ADD LIQ.","REMOVE"];function fU(a){let[b,c]=(0,f.useState)("SWAP"),[d,g]=(0,f.useState)([]),[h,i]=(0,f.useState)(!1),j=(b,c,d)=>{let e={id:Date.now(),type:b,description:c,timestamp:new Date,hash:d};g(a=>{let b=[e,...a].slice(0,20);return localStorage.setItem("defi_tx_history",JSON.stringify(b)),b}),a.onSuccess()};return(0,e.jsxs)(fC,{className:"p-6 relative",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,e.jsx)(fD,{className:"mb-0",children:"âŸ· Trade"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsxs)("button",{onClick:()=>i(!h),className:"flex items-center gap-2 px-3 py-1.5 font-mono text-[0.68rem] bg-slate-900 border border-border hover:border-[#00d9ff] transition-all",children:[(0,e.jsxs)("span",{className:"text-[#00d9ff] font-bold",children:[a.symbolA,"/",a.symbolB]}),(0,e.jsx)(fL,{size:14,className:fz("transition-transform",h&&"rotate-180")})]}),h&&(0,e.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-surface border border-border shadow-glow-sm z-50 py-1",children:0===a.savedPairs.length?(0,e.jsx)("div",{className:"px-3 py-2 text-[0.65rem] text-gray-500 font-mono",children:"No saved pairs"}):a.savedPairs.map((b,c)=>(0,e.jsxs)("button",{onClick:()=>{a.onSelectPair(c),i(!1)},className:fz("w-full text-left px-3 py-2 font-mono text-[0.68rem] hover:bg-[#00d9ff]/10 hover:text-white transition-colors",a.activePairIndex===c?"text-[#00d9ff]":"text-gray-400"),children:[b.symbolA," / ",b.symbolB]},b.swap))})]})]}),(0,e.jsx)("div",{className:"flex border-b border-border mb-6",children:fT.map(a=>(0,e.jsx)("button",{onClick:()=>c(a),className:fz("px-4 pb-3 font-mono text-[0.68rem] tracking-widest border-b-2 -mb-px transition-all duration-200",b===a?"border-[#00d9ff] text-[#00d9ff]":"border-transparent text-gray-500 hover:text-gray-300"),children:a},a))}),(0,e.jsxs)("div",{className:"min-h-[360px]",children:["SWAP"===b&&(0,e.jsx)(fN,{...a,onSuccess:(a,b)=>j("SWAP",a,b)}),"ADD LIQ."===b&&(0,e.jsx)(fO,{...a,onSuccess:(a,b)=>j("ADD_LIQ",a,b)}),"REMOVE"===b&&(0,e.jsx)(fP,{...a,onSuccess:(a,b)=>j("REMOVE_LIQ",a,b)})]}),(0,e.jsx)(fS,{records:d})]})}let fV=fw("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fW({notifications:a,onDismiss:b}){return(0,e.jsx)("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2 max-w-sm w-full",children:a.map(a=>(0,e.jsxs)("div",{className:fz("flex items-start gap-3 p-4 border-l-4 bg-card border-t border-r border-b border-border","animate-slide-up font-mono text-[0.75rem]",{"border-l-emerald-500":"success"===a.type,"border-l-red-500":"error"===a.type,"border-l-amber-400":"warn"===a.type,"border-l-[#00d9ff]":"info"===a.type}),children:[(0,e.jsx)("span",{className:fz("flex-1 leading-relaxed",{"text-emerald-400":"success"===a.type,"text-red-400":"error"===a.type,"text-amber-400":"warn"===a.type,"text-[#00d9ff]":"info"===a.type}),children:a.message}),(0,e.jsx)("button",{onClick:()=>b(a.id),className:"text-gray-600 hover:text-gray-300 transition-colors mt-0.5 shrink-0",children:(0,e.jsx)(fV,{size:14})})]},a.id))})}function fX(){let{wallet:a,connecting:b,connect:c,disconnect:d,shortAddress:g,error:h}=function(){let[a,b]=(0,f.useState)({provider:null,signer:null,address:"",network:"",chainId:0,blockNumber:0,connected:!1}),[c,d]=(0,f.useState)(!1),[e,g]=(0,f.useState)(""),h=(0,f.useCallback)(()=>{b({provider:null,signer:null,address:"",network:"",chainId:0,blockNumber:0,connected:!1}),localStorage.removeItem("defi_wallet_connected")},[]);return{wallet:a,connecting:c,error:e,connect:(0,f.useCallback)(async(a=!1)=>{try{return!1}catch(b){if(!a){let a="Connection failed";b instanceof Error&&(a=b.message.includes("user rejected")?"Connection rejected by user":b.message.includes("already pending")?"Connection request already pending":b.message),g(a)}return!1}finally{d(!1)}},[]),disconnect:h,shortAddress:fn(a.address)}}(),{contracts:i,pool:j,userInfo:k,loadContracts:l,refreshPool:m}=function(a){let[b,c]=(0,f.useState)({tokenA:null,tokenB:null,swap:null,symbolA:"TKA",symbolB:"TKB",loaded:!1}),[d,e]=(0,f.useState)({reserveA:0,reserveB:0,totalLPShares:0,price:0,kValue:0}),[g,h]=(0,f.useState)({address:"",balanceA:0,balanceB:0,lpShares:0,lpSharePct:0,lpTokenAValue:0,lpTokenBValue:0}),[i,j]=(0,f.useState)(!1);return{contracts:b,pool:d,userInfo:g,loading:i,loadContracts:(0,f.useCallback)(async b=>{if(!a)throw Error("Wallet not connected");j(!0);try{if(!b0(b.tokenA))throw Error("Invalid Token A address");if(!b0(b.tokenB))throw Error("Invalid Token B address");if(!b0(b.swap))throw Error("Invalid Swap contract address");let d=new dt(b.tokenA,e5,a),e=new dt(b.tokenB,e5,a),f=new dt(b.swap,e6,a),[g,h]=await Promise.all([d.symbol().catch(()=>"UNKNOWN"),e.symbol().catch(()=>"UNKNOWN")]);return c({tokenA:d,tokenB:e,swap:f,symbolA:g,symbolB:h,loaded:!0}),{tokenA:d,tokenB:e,swap:f}}catch(a){throw Error(a instanceof Error?a.message:"Failed to load contracts")}finally{j(!1)}},[a]),refreshPool:(0,f.useCallback)(async(a,b,c,d)=>{try{let[[f,g],i,j]=await Promise.all([c.getReserves(),c.totalLPShares(),c.getPrice()]),k=fl(f),l=fl(g),m=fl(i);if(e({reserveA:k,reserveB:l,totalLPShares:m,price:k>0?l/k:0,kValue:k*l}),d){let[e,f,g]=await Promise.all([a.balanceOf(d),b.balanceOf(d),c.getLPInfo(d)]);h({address:d,balanceA:fl(e),balanceB:fl(f),lpShares:fl(g[0]),lpSharePct:Number(g[1])/100,lpTokenAValue:fl(g[2]),lpTokenBValue:fl(g[3])})}}catch(a){throw console.error("Failed to refresh pool:",a),Error("Failed to fetch pool data")}},[])}}(a.signer),{notifications:n,notify:o,dismiss:p}=function(){let[a,b]=(0,f.useState)([]);return{notifications:a,notify:(0,f.useCallback)((a,c="success",d=4e3)=>{let e=++fs;b(b=>[...b,{id:e,message:a,type:c}]),setTimeout(()=>{b(a=>a.filter(a=>a.id!==e))},d)},[]),dismiss:(0,f.useCallback)(a=>{b(b=>b.filter(b=>b.id!==a))},[])}}(),[q,r]=(0,f.useState)([]),[s,t]=(0,f.useState)(null),u=(0,f.useRef)(i);u.current=i;let v=(0,f.useCallback)(async()=>{!await c()&&h&&o(h,"error")},[c,h,o]),w=(0,f.useCallback)(async b=>{let{tokenA:c,tokenB:d,swap:e}=await l(b),f=await c.symbol(),g=await d.symbol();await m(c,d,e,a.address),r(a=>{let c,d=a.findIndex(a=>a.swap.toLowerCase()===b.swap.toLowerCase());return d>=0?((c=[...a])[d]={...b,symbolA:f,symbolB:g},t(d)):t((c=[...a,{...b,symbolA:f,symbolB:g}]).length-1),localStorage.setItem("defi_simpleswap_pairs",JSON.stringify(c)),c})},[l,m,a.address]),x=(0,f.useCallback)(async a=>{let b=q[a];b&&(t(a),await w({tokenA:b.tokenA,tokenB:b.tokenB,swap:b.swap}))},[q,w]),y=(0,f.useCallback)(async()=>{let{tokenA:b,tokenB:c,swap:d}=u.current;b&&c&&d&&await m(b,c,d,a.address)},[m,a.address]);return(0,e.jsxs)("div",{className:"relative min-h-screen",children:[(0,e.jsx)("div",{className:"fixed top-0 right-0 w-[500px] h-[500px] rounded-full pointer-events-none z-0",style:{background:"radial-gradient(circle, rgba(0,217,255,0.06) 0%, transparent 70%)",filter:"blur(60px)"}}),(0,e.jsx)("div",{className:"fixed bottom-0 left-0 w-[400px] h-[400px] rounded-full pointer-events-none z-0",style:{background:"radial-gradient(circle, rgba(139,92,246,0.07) 0%, transparent 70%)",filter:"blur(60px)"}}),(0,e.jsx)(fB,{connected:a.connected,address:a.address,network:a.network,blockNumber:a.blockNumber,connecting:b,onConnect:v,onDisconnect:d}),(0,e.jsx)(fW,{notifications:n,onDismiss:p}),(0,e.jsxs)("main",{className:"relative z-10 max-w-[1120px] mx-auto px-4 py-8",children:[(0,e.jsxs)("div",{className:"mb-8 animate-slide-up",children:[(0,e.jsxs)("h1",{className:"font-display font-extrabold text-3xl md:text-4xl tracking-tight",children:[(0,e.jsx)("span",{className:"text-[#00d9ff]",children:"Decentralized"})," ",(0,e.jsx)("span",{className:"text-white",children:"Exchange"})]}),(0,e.jsx)("p",{className:"font-mono text-[0.72rem] text-gray-500 mt-2 tracking-wide",children:"AMM-powered token swaps \xb7 Constant product formula \xb7 0.3% LP fees"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_380px] gap-6",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,e.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.05s"},children:(0,e.jsx)(fE,{pool:j,symbolA:i.symbolA,symbolB:i.symbolB})}),(0,e.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:(0,e.jsx)(fU,{pool:j,user:k,symbolA:i.symbolA,symbolB:i.symbolB,tokenAContract:i.tokenA,tokenBContract:i.tokenB,swapContract:i.swap,onSuccess:y,onNotify:o,savedPairs:q,activePairIndex:s,onSelectPair:x})})]}),(0,e.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,e.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.15s"},children:(0,e.jsx)(fH,{network:a.network,blockNumber:a.blockNumber,connected:a.connected,onLoad:w,savedPairs:q,activePairIndex:s,onSelectPair:x})}),(0,e.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:(0,e.jsx)(fI,{})}),(0,e.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.25s"},children:(0,e.jsx)(fK,{})})]})]}),(0,e.jsx)("div",{className:"mt-12 pt-6 border-t border-border text-center font-mono text-[0.62rem] text-gray-700 tracking-widest",children:"SIMPLESWAP DEX \xb7 DEFI LEARNING LAB \xb7 x\xb7y=k AMM"})]})]})}},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9567:(a,b,c)=>{Promise.resolve().then(c.bind(c,7742))},9590:()=>{},9743:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(9754),e=c(9117),f=c(6595),g=c(2324),h=c(9326),i=c(8928),j=c(175),k=c(12),l=c(4290),m=c(2696),n=c(2802),o=c(7533),p=c(5229),q=c(2822),r=c(261),s=c(6453),t=c(2474),u=c(6713),v=c(1356),w=c(2685),x=c(6225),y=c(3446),z=c(2762),A=c(5742),B=c(6439),C=c(1170),D=c.n(C),E=c(2506),F=c(1203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,7742)),"d:\\Netixsol Intern-Projects\\Week-12\\Day3-4\\defi-nextjs\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,6953)),"d:\\Netixsol Intern-Projects\\Week-12\\Day3-4\\defi-nextjs\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,1170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,7028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,2768,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["d:\\Netixsol Intern-Projects\\Week-12\\Day3-4\\defi-nextjs\\app\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(9902).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},9902:a=>{"use strict";a.exports=require("path")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[778],()=>b(b.s=9743));module.exports=c})();