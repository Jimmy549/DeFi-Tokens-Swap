(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2689:(e,t,a)=>{Promise.resolve().then(a.bind(a,8215))},8215:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var r=a(5155),s=a(2115),n=a(5242);let l=["function name() view returns (string)","function symbol() view returns (string)","function totalSupply() view returns (uint256)","function balanceOf(address) view returns (uint256)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function transfer(address to, uint256 amount) returns (bool)","event Transfer(address indexed from, address indexed to, uint256 value)","event Approval(address indexed owner, address indexed spender, uint256 value)"],o=["function tokenA() view returns (address)","function tokenB() view returns (address)","function reserveA() view returns (uint256)","function reserveB() view returns (uint256)","function totalLPShares() view returns (uint256)","function lpShares(address) view returns (uint256)","function getPrice() view returns (uint256)","function getReserves() view returns (uint256, uint256)","function getSwapPreview(uint256 amountIn, bool isAtoB) view returns (uint256 amountOut, uint256 priceImpact)","function getLPInfo(address provider) view returns (uint256 shares, uint256 sharePercent, uint256 tokenAValue, uint256 tokenBValue)","function addLiquidity(uint256 amountA, uint256 amountB) returns (uint256 shares)","function removeLiquidity(uint256 shares) returns (uint256 amountA, uint256 amountB)","function swapAforB(uint256 amountAIn, uint256 minAmountBOut) returns (uint256 amountBOut)","function swapBforA(uint256 amountBIn, uint256 minAmountAOut) returns (uint256 amountAOut)"],i=[.5,1,2,5],c={1:"Ethereum",0xaa36a7:"Sepolia",137:"Polygon",80001:"Mumbai",31337:"Hardhat",1337:"Local"};var d=a(9794),m=a(9550);let x=e=>{let t="string"==typeof e?e:e.toFixed(18),a=t.split(".");return a.length>1&&a[1].length>18?d.XS(a[0]+"."+a[1].slice(0,18),18):d.XS(t,18)},f=e=>parseFloat(d.Js(e,18)),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return 0===e?"0":e<1e-4?e.toExponential(2):e.toFixed(t)},p=e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"",b=e=>e>5?"text-red-400":e>2?"text-amber-400":"text-emerald-400",h=(e,t,a)=>{if(!e||!t||!a)return 0;let r=997*e;return r*a/(1e3*t+r)},g=(e,t,a)=>{let r=h(e,t,a),s=e*a/t;return s?(s-r)/s*100:0},v=e=>{try{return m.b(e),!0}catch(e){return!1}};var j=a(4827),y=a(8678);let N=0;var w=a(906),k=a(3166),A=a(2821);let S=(0,s.forwardRef)((e,t)=>{let{variant:a="primary",size:s="md",loading:n,className:l,children:o,disabled:i,...c}=e;return(0,r.jsx)("button",{ref:t,disabled:i||n,className:(0,A.$)("font-mono font-bold tracking-widest uppercase transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:transform-none",{"bg-[#00d9ff] text-[#07090f] hover:bg-[#00c4e8] hover:shadow-glow active:scale-[0.98]":"primary"===a,"bg-transparent border border-violet-500 text-violet-400 hover:bg-violet-dim active:scale-[0.98]":"secondary"===a,"bg-transparent border border-red-500 text-red-400 hover:bg-red-500/10 active:scale-[0.98]":"danger"===a,"bg-transparent border border-border text-gray-400 hover:border-[#00d9ff] hover:text-[#00d9ff]":"ghost"===a},{"px-3 py-2 text-[0.65rem]":"sm"===s,"px-5 py-3 text-[0.75rem]":"md"===s,"w-full px-6 py-4 text-[0.8rem]":"lg"===s},l),...c,children:n?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Processing..."]}):o})});function B(e){let{connected:t,address:a,network:s,blockNumber:n,connecting:l,onConnect:o,onDisconnect:i}=e;return(0,r.jsxs)("header",{className:"relative z-20 flex justify-between items-center px-6 md:px-10 py-4 border-b border-border bg-bg/80 backdrop-blur-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-7 h-7 border border-[#00d9ff]/60 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-3 h-3 bg-[#00d9ff] animate-pulse2"})}),(0,r.jsxs)("span",{className:"font-display font-extrabold text-lg tracking-tight",children:[(0,r.jsx)("span",{className:"text-[#00d9ff]",children:"Simple"}),(0,r.jsx)("span",{className:"text-white",children:"Swap"})]}),(0,r.jsx)("span",{className:"hidden md:block font-mono text-[0.55rem] tracking-[3px] text-gray-600 uppercase border border-border px-2 py-1",children:"DeFi Lab"})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center gap-6",children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{size:12,className:"text-emerald-400"}),(0,r.jsx)("span",{className:"font-mono text-[0.65rem] text-gray-500 tracking-widest uppercase",children:s})]}),(0,r.jsxs)("div",{className:"font-mono text-[0.65rem] text-gray-500",children:["Block"," ",(0,r.jsxs)("span",{className:"text-[#00d9ff]",children:["#",n.toLocaleString()]})]})]})}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:t?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border border-emerald-500/40 bg-emerald-500/5",children:[(0,r.jsx)(k.A,{size:12,className:"text-emerald-400"}),(0,r.jsx)("span",{className:"font-mono text-[0.7rem] text-emerald-400 tracking-widest",children:p(a)})]}),(0,r.jsx)(S,{variant:"ghost",size:"sm",onClick:i,children:"Disconnect"})]}):(0,r.jsx)(S,{variant:"primary",size:"sm",loading:l,onClick:o,children:l?"Connecting":"[ Connect Wallet ]"})})]})}function P(e){let{className:t,children:a,glow:s,...n}=e;return(0,r.jsxs)("div",{className:(0,A.$)("relative bg-card border border-border overflow-hidden",s&&"shadow-glow-sm",t),...n,children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#00d9ff]/40 to-transparent"}),a]})}function C(e){let{className:t,children:a,...s}=e;return(0,r.jsxs)("div",{className:(0,A.$)("flex items-center gap-3 font-mono text-[0.62rem] tracking-[3px] uppercase text-gray-500 mb-5",t),...s,children:[a,(0,r.jsx)("div",{className:"flex-1 h-px bg-border"})]})}function I(e){let{pool:t,symbolA:a,symbolB:s}=e,n=t.reserveA*t.price,l=n+t.reserveB,o=l>0?n/l*100:50,i=100-o;return(0,r.jsxs)(P,{className:"p-6",children:[(0,r.jsx)(C,{children:"⬡ Pool Status"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[(0,r.jsxs)("div",{className:"bg-surface border border-border p-4",children:[(0,r.jsxs)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:["Reserve ",a]}),(0,r.jsx)("div",{className:"font-display font-extrabold text-2xl text-[#00d9ff]",children:t.reserveA>0?u(t.reserveA,2):"—"}),(0,r.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-600 mt-1",children:a})]}),(0,r.jsxs)("div",{className:"bg-surface border border-border p-4",children:[(0,r.jsxs)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:["Reserve ",s]}),(0,r.jsx)("div",{className:"font-display font-extrabold text-2xl text-violet-400",children:t.reserveB>0?u(t.reserveB,2):"—"}),(0,r.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-600 mt-1",children:s})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-[#00d9ff]/5 to-violet-500/5 border border-[#00d9ff]/25 px-5 py-4 mb-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-1",children:"Current Price"}),(0,r.jsxs)("div",{className:"font-display font-extrabold text-xl text-white",children:["1 ",a," ="," ",(0,r.jsx)("span",{className:"text-[#00d9ff]",children:t.price>0?u(t.price,4):"—"})," ",s]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-1",children:"K = x\xb7y"}),(0,r.jsx)("div",{className:"font-display font-bold text-lg text-violet-400",children:t.kValue>0?t.kValue.toExponential(3):"—"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Pool Composition"}),(0,r.jsxs)("div",{className:"flex h-8 border border-border overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center text-[0.62rem] font-mono font-bold text-[#00d9ff] bg-[#00d9ff]/10 transition-all duration-700",style:{width:"".concat(o,"%")},children:[o.toFixed(0),"%"]}),(0,r.jsxs)("div",{className:"flex items-center justify-center text-[0.62rem] font-mono font-bold text-violet-400 bg-violet-500/10 transition-all duration-700",style:{width:"".concat(i,"%")},children:[i.toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-1.5",children:[(0,r.jsx)("span",{className:"font-mono text-[0.6rem] text-[#00d9ff]",children:a}),(0,r.jsx)("span",{className:"font-mono text-[0.6rem] text-violet-400",children:s})]})]}),(0,r.jsxs)("div",{className:"mt-5 bg-[#00d9ff]/3 border border-[#00d9ff]/15 p-4",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"AMM Formula"}),(0,r.jsx)("div",{className:"text-center font-mono text-[#00d9ff] text-xl font-bold tracking-wide my-2",children:"x \xb7 y = k"}),(0,r.jsx)("div",{className:"font-mono text-[0.65rem] text-gray-500 leading-relaxed",children:"Price adjusts automatically as tokens flow in/out. 0.3% fee per swap stays in pool for LPs."})]})]})}S.displayName="Button";let L=(0,s.forwardRef)((e,t)=>{let{badge:a,badgeColor:s="accent",balance:n,onMax:l,label:o,className:i,...c}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(o||void 0!==n)&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-mono text-[0.65rem] tracking-widest text-gray-500 uppercase",children:o}),void 0!==n&&(0,r.jsxs)("button",{type:"button",onClick:l,className:"font-mono text-[0.65rem] text-emerald-400 hover:text-emerald-300 tracking-wide transition-colors",children:["BAL: ",n.toFixed(4)]})]}),(0,r.jsxs)("div",{className:(0,A.$)("flex border border-border bg-surface transition-all duration-200","focus-within:border-[#00d9ff] focus-within:shadow-glow-sm"),children:[(0,r.jsx)("input",{ref:t,type:"number",min:"0",className:(0,A.$)("flex-1 bg-transparent outline-none px-4 py-3.5","font-mono text-base text-white placeholder-gray-600","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",i),...c}),(0,r.jsx)("div",{className:(0,A.$)("flex items-center px-4 border-l border-border","font-mono text-[0.75rem] font-bold tracking-widest whitespace-nowrap","accent"===s?"text-[#00d9ff]":"text-violet-400"),children:a})]})]})});L.displayName="TokenInput";let E=(0,s.forwardRef)((e,t)=>{let{label:a,valid:s,...n}=e;return(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{className:"block font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase",children:a}),(0,r.jsx)("input",{ref:t,className:(0,A.$)("w-full bg-surface border px-3.5 py-2.5","font-mono text-[0.72rem] text-white placeholder-gray-600 outline-none","transition-colors duration-200",!0===s?"border-emerald-500":!1===s?"border-red-500":"border-border focus:border-[#00d9ff]"),spellCheck:!1,...n})]})});function F(e){let{network:t,blockNumber:a,connected:n,onLoad:l,savedPairs:o,activePairIndex:i,onSelectPair:c}=e,[d,m]=(0,s.useState)({tokenA:"",tokenB:"",swap:""}),[x,f]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(null!==i&&o[i]){let e=o[i];m({tokenA:e.tokenA,tokenB:e.tokenB,swap:e.swap})}},[i,o]),(0,s.useEffect)(()=>{let e=localStorage.getItem("defi_last_addrs");if(e&&null===i)try{m(JSON.parse(e))}catch(e){}},[i]);let b=d.tokenA?v(d.tokenA):void 0,h=d.tokenB?v(d.tokenB):void 0,g=d.swap?v(d.swap):void 0,j=b&&h&&g,y=async()=>{if(j){if(!n)return void p({msg:"Please connect wallet first",ok:!1});f(!0),p(null);try{await l(d),localStorage.setItem("defi_last_addrs",JSON.stringify(d)),p({msg:"✓ Contracts loaded successfully",ok:!0}),setTimeout(()=>p(null),3e3)}catch(t){let e="Failed to load contracts";t instanceof Error&&(e=t.message.includes("Invalid")?t.message:t.message.includes("network")?"Network error. Check your connection":t.message.slice(0,100)),p({msg:e,ok:!1})}finally{f(!1)}}};return(0,r.jsxs)(P,{className:"p-6 mb-6",children:[(0,r.jsx)(C,{children:"⚙ Contract Setup"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-px bg-border mb-5",children:[["Network",t||"—"],["Block",a>0?"#".concat(a):"—"],["Fee","0.3%"]].map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"bg-surface px-3 py-2.5",children:[(0,r.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-500 uppercase mb-1",children:t}),(0,r.jsx)("div",{className:"font-mono text-[0.75rem] font-bold text-emerald-400",children:a})]},t)})}),o.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Quick Load (Saved Pairs)"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,r.jsxs)("button",{onClick:()=>c(t),className:(0,A.$)("px-3 py-2 font-mono text-[0.7rem] border transition-all duration-200",i===t?"border-[#00d9ff] text-[#00d9ff] bg-[#00d9ff]/5":"border-border text-gray-400 hover:border-gray-500 hover:text-gray-200"),children:[e.symbolA," / ",e.symbolB]},e.swap))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(E,{label:"Token A Address",placeholder:"0x... (MyToken A)",value:d.tokenA,valid:b,onChange:e=>m(t=>({...t,tokenA:e.target.value}))}),(0,r.jsx)(E,{label:"Token B Address",placeholder:"0x... (MyToken B)",value:d.tokenB,valid:h,onChange:e=>m(t=>({...t,tokenB:e.target.value}))}),(0,r.jsx)(E,{label:"SimpleSwap Address",placeholder:"0x... (SimpleSwap contract)",value:d.swap,valid:g,onChange:e=>m(t=>({...t,swap:e.target.value}))})]}),(0,r.jsx)(S,{variant:"primary",size:"lg",loading:x,disabled:!j||!n,onClick:y,className:"mt-4",children:n?"[ Load Contracts ]":"[ Connect Wallet First ]"}),u&&(0,r.jsx)("div",{className:"mt-3 p-3 font-mono text-[0.7rem] border ".concat(u.ok?"border-emerald-500/40 text-emerald-400 bg-emerald-500/5":"border-red-500/40 text-red-400 bg-red-500/5"),children:u.msg})]})}function _(){let[e,t]=(0,s.useState)("1000"),[a,n]=(0,s.useState)("2000"),[l,o]=(0,s.useState)("10"),i=parseFloat(e)||0,c=parseFloat(a)||0,d=parseFloat(l)||0,m=i*c,x=d&&i?c*d/(i+d):0,f=h(d,i,c),p=g(d,i,c),v=i+d,j=c-f,y="w-full bg-bg border border-border px-3 py-2 font-mono text-[0.75rem] text-white outline-none focus:border-[#00d9ff] transition-colors placeholder-gray-700";return(0,r.jsxs)(P,{className:"p-6",children:[(0,r.jsx)(C,{children:"\uD83D\uDCD0 Live AMM Calculator"}),(0,r.jsxs)("div",{className:"bg-[#00d9ff]/3 border border-[#00d9ff]/15 p-4 mb-5",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"With 0.3% Fee"}),(0,r.jsxs)("div",{className:"font-mono text-[0.68rem] text-gray-400 leading-[2.2] bg-bg/50 p-3",children:["out = (",(0,r.jsx)("span",{className:"text-violet-400",children:"reserveB"})," \xd7"," ",(0,r.jsx)("span",{className:"text-[#00d9ff]",children:"amtIn"})," \xd7 997)",(0,r.jsx)("br",{}),"\xa0\xa0\xa0\xa0 \xf7 (",(0,r.jsx)("span",{className:"text-violet-400",children:"reserveA"})," \xd7 1000"," ","+ ",(0,r.jsx)("span",{className:"text-[#00d9ff]",children:"amtIn"})," \xd7 997)"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Reserve A"}),(0,r.jsx)("input",{className:y,value:e,onChange:e=>t(e.target.value),placeholder:"1000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Reserve B"}),(0,r.jsx)("input",{className:y,value:a,onChange:e=>n(e.target.value),placeholder:"2000"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"font-mono text-[0.58rem] tracking-widest text-gray-600 uppercase mb-1.5",children:"Amount A In"}),(0,r.jsx)("input",{className:y,value:l,onChange:e=>o(e.target.value),placeholder:"10"})]}),d>0&&i>0&&c>0?(0,r.jsxs)("div",{className:"space-y-2 bg-bg border border-border p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["k = ",i," \xd7 ",c]}),(0,r.jsx)("span",{className:"text-violet-400 font-bold",children:m.toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Out (no fee)"}),(0,r.jsx)("span",{className:"text-amber-400",children:u(x,4)})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Out (0.3% fee)"}),(0,r.jsx)("span",{className:"text-[#00d9ff] font-bold",children:u(f,4)})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.7rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Price Impact"}),(0,r.jsxs)("span",{className:(0,A.$)("font-bold",b(p)),children:[p.toFixed(2),"%"]})]}),(0,r.jsx)("div",{className:"h-px bg-border"}),(0,r.jsxs)("div",{className:"font-mono text-[0.62rem] text-gray-600",children:["Pool after: ",u(v,2)," A / ",u(j,2)," B"]})]}):(0,r.jsx)("div",{className:"bg-bg border border-border p-4 font-mono text-[0.7rem] text-gray-600 text-center",children:"Enter values to calculate"})]})}E.displayName="AddressInput";let D=[{label:"Add Liquidity",code:"approve() → addLiquidity()",color:"text-emerald-400"},{label:"Swap A → B",code:"approve() → swapAforB()",color:"text-[#00d9ff]"},{label:"Swap B → A",code:"approve() → swapBforA()",color:"text-violet-400"},{label:"Preview",code:"getSwapPreview(amtIn, bool)",color:"text-amber-400"},{label:"Remove LP",code:"removeLiquidity(shares)",color:"text-red-400"},{label:"Pool Info",code:"getReserves() / getPrice()",color:"text-gray-400"}];function M(){return(0,r.jsxs)(P,{className:"p-6",children:[(0,r.jsx)(C,{children:"\uD83D\uDCCB Quick Reference"}),(0,r.jsx)("div",{className:"divide-y divide-border",children:D.map(e=>{let{label:t,code:a,color:s}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center py-2.5",children:[(0,r.jsx)("span",{className:"font-mono text-[0.68rem] text-gray-500",children:t}),(0,r.jsx)("span",{className:"font-mono text-[0.65rem] font-bold ".concat(s),children:a})]},t)})})]})}var R=a(4033),O=a(3341);function T(e){let{pool:t,user:a,symbolA:n,symbolB:l,tokenAContract:o,tokenBContract:c,swapContract:d,onSuccess:m,onNotify:f}=e,[p,v]=(0,s.useState)(""),[j,y]=(0,s.useState)(!0),[N,w]=(0,s.useState)(.5),[k,B]=(0,s.useState)(!1),P=j?t.reserveA:t.reserveB,C=j?t.reserveB:t.reserveA,I=j?a.balanceA:a.balanceB,E=parseFloat(p)||0,F=h(E,P,C),_=g(E,P,C),D=.003*E,M=F*(1-N/100),R=E>0&&t.reserveA>0,T=(0,s.useCallback)(async()=>{if(!d||!E)return;let e=j?o:c;if(e){B(!0);try{if(E>I)throw Error("Insufficient balance");if(E<=0)throw Error("Amount must be greater than 0");if(_>15)throw Error("Price impact too high (>15%)");let t=x(p),a=M.toFixed(18),r=x(a),s=d.target;f("Approving ".concat(j?n:l,"..."),"info");let o=await e.approve(s,t);await o.wait(),f("Executing swap...","info");let i=j?await d.swapAforB(t,r):await d.swapBforA(t,r),c=await i.wait(),b="".concat(u(E)," ").concat(j?n:l," → ").concat(u(F)," ").concat(j?l:n);f("✓ ".concat(b),"success"),v(""),m(b,c.hash)}catch(t){let e="Swap failed";t instanceof Error&&(e=t.message.includes("user rejected")?"Transaction rejected by user":t.message.includes("insufficient funds")?"Insufficient funds for gas":t.message.includes("Insufficient balance")||t.message.includes("Price impact")?t.message:t.message.length>80?t.message.slice(0,80)+"...":t.message),f(e,"error")}finally{B(!1)}}},[d,o,c,j,E,M,F,n,l,I,_,f,m]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(L,{label:"You Pay",badge:j?n:l,badgeColor:j?"accent":"violet",balance:I,onMax:()=>v(I.toString()),value:p,onChange:e=>v(e.target.value),placeholder:"0.0"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("button",{onClick:()=>{y(e=>!e),v("")},className:"w-10 h-10 border border-border bg-surface hover:border-[#00d9ff] hover:text-[#00d9ff] text-gray-500 flex items-center justify-center transition-all duration-200 hover:rotate-180",children:(0,r.jsx)(O.A,{size:16})})}),(0,r.jsx)(L,{label:"You Receive",badge:j?l:n,badgeColor:j?"violet":"accent",value:R?u(F):"",readOnly:!0,placeholder:"0.0",className:"cursor-default opacity-70"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-[0.62rem] tracking-[2px] text-gray-500 uppercase mb-2",children:"Slippage Tolerance"}),(0,r.jsx)("div",{className:"flex gap-2",children:i.map(e=>(0,r.jsxs)("button",{onClick:()=>w(e),className:(0,A.$)("flex-1 py-2 font-mono text-[0.68rem] border transition-all duration-150",N===e?"border-[#00d9ff] text-[#00d9ff] bg-[#00d9ff]/5":"border-border text-gray-500 hover:border-[#00d9ff]/50 hover:text-gray-300"),children:[e,"%"]},e))})]}),R&&(0,r.jsxs)("div",{className:"bg-surface border border-border p-4 space-y-2 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Amount Out"}),(0,r.jsxs)("span",{className:"text-[#00d9ff] font-bold",children:[u(F)," ",j?l:n]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Price Impact"}),(0,r.jsxs)("span",{className:(0,A.$)("font-bold",b(_)),children:[_.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Swap Fee (0.3%)"}),(0,r.jsxs)("span",{className:"text-gray-300",children:[u(D)," ",j?n:l]})]}),(0,r.jsx)("div",{className:"h-px bg-border"}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["Min. Received (",N,"% slip)"]}),(0,r.jsxs)("span",{className:"text-gray-300",children:[u(M)," ",j?l:n]})]})]}),(0,r.jsx)(S,{variant:"primary",size:"lg",loading:k,disabled:!E||!d||0===t.reserveA,onClick:T,children:"[ Execute Swap ]"})]})}function V(e){var t,a,n;let{pool:l,user:o,symbolA:i,symbolB:c,tokenAContract:d,tokenBContract:m,swapContract:f,onSuccess:p,onNotify:b}=e,[h,g]=(0,s.useState)(""),[v,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(!1),w=parseFloat(h)||0,k=parseFloat(v)||0,A=w>0&&k>0?(t=l.reserveA,a=l.reserveB,0===(n=l.totalLPShares)?Math.sqrt(w*k):Math.min(w/t*n,k/a*n)):0,B=l.totalLPShares+A,P=B>0?A/B*100:0,C=(l.reserveA+w)*(l.reserveB+k),I=e=>{g(e);let t=parseFloat(e);t>0&&l.reserveA>0&&j((t*(l.reserveB/l.reserveA)).toFixed(6))},E=e=>{j(e);let t=parseFloat(e);t>0&&l.reserveB>0&&g((t*(l.reserveA/l.reserveB)).toFixed(6))},F=(0,s.useCallback)(async()=>{if(f&&d&&m&&w&&k){N(!0);try{if(w>o.balanceA)throw Error("Insufficient ".concat(i," balance"));if(k>o.balanceB)throw Error("Insufficient ".concat(c," balance"));if(w<=0||k<=0)throw Error("Amounts must be greater than 0");let e=x(h),t=x(v),a=f.target;b("Approving ".concat(i,"..."),"info");let r=await d.approve(a,e);await r.wait(),b("Approving ".concat(c,"..."),"info");let s=await m.approve(a,t);await s.wait(),b("Adding liquidity...","info");let n=await f.addLiquidity(e,t),l=await n.wait(),y="Added ".concat(u(w)," ").concat(i," + ").concat(u(k)," ").concat(c);b("✓ ".concat(y),"success"),g(""),j(""),p(y,l.hash)}catch(t){let e="Failed to add liquidity";t instanceof Error&&(e=t.message.includes("user rejected")?"Transaction rejected by user":t.message.includes("insufficient funds")?"Insufficient funds for gas":t.message.includes("Insufficient")?t.message:t.message.length>80?t.message.slice(0,80)+"...":t.message),b(e,"error")}finally{N(!1)}}},[f,d,m,h,v,w,k,i,c,o.balanceA,o.balanceB,b,p]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"font-mono text-[0.7rem] text-gray-500 leading-relaxed",children:["Deposit both tokens to earn ",(0,r.jsx)("span",{className:"text-[#00d9ff]",children:"0.3% fee"})," on every swap. Receive LP shares proportional to your contribution."]}),(0,r.jsx)(L,{label:"Amount ".concat(i),badge:i,badgeColor:"accent",balance:o.balanceA,onMax:()=>I(o.balanceA.toString()),value:h,onChange:e=>I(e.target.value),placeholder:"0.0"}),(0,r.jsx)(L,{label:"Amount ".concat(c),badge:c,badgeColor:"violet",balance:o.balanceB,onMax:()=>E(o.balanceB.toString()),value:v,onChange:e=>E(e.target.value),placeholder:"0.0"}),A>0&&(0,r.jsxs)("div",{className:"bg-surface border border-border p-4 space-y-2 animate-fade-in",children:[(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"LP Shares Minted"}),(0,r.jsx)("span",{className:"text-[#00d9ff] font-bold",children:u(A,6)})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Your Pool Share"}),(0,r.jsxs)("span",{className:"text-emerald-400 font-bold",children:[P.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"K After Deposit"}),(0,r.jsx)("span",{className:"text-violet-400",children:C.toExponential(3)})]})]}),(0,r.jsx)(S,{variant:"secondary",size:"lg",loading:y,disabled:!w||!k||!f,onClick:F,children:"[ Add Liquidity ]"}),o.lpShares>0&&(0,r.jsxs)("div",{className:"border border-violet-500/30 p-4 bg-violet-500/3",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-violet-400 uppercase mb-3",children:"Your Position"}),(0,r.jsx)("div",{className:"space-y-2",children:[["LP Shares",u(o.lpShares,6)],["Pool Share",o.lpSharePct.toFixed(2)+"%"],["".concat(i," Value"),u(o.lpTokenAValue,4)],["".concat(c," Value"),u(o.lpTokenBValue,4)]].map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem] border-b border-border/50 pb-2 last:border-0 last:pb-0",children:[(0,r.jsx)("span",{className:"text-gray-500",children:t}),(0,r.jsx)("span",{className:"text-white font-bold",children:a})]},t)})})]})]})}function z(e){let{pool:t,user:a,symbolA:n,symbolB:l,swapContract:o,onSuccess:i,onNotify:c}=e,[d,m]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),b=parseFloat(d)||0,h=t.totalLPShares>0?b/t.totalLPShares*t.reserveA:0,g=t.totalLPShares>0?b/t.totalLPShares*t.reserveB:0,v=(0,s.useCallback)(async()=>{if(o&&b){p(!0);try{c("Removing liquidity...","info");let e=await o.removeLiquidity(x(b)),t=await e.wait(),a="Removed ".concat(u(h)," ").concat(n," + ").concat(u(g)," ").concat(l);c("✓ ".concat(a),"success"),m(""),i(a,t.hash)}catch(t){let e=t instanceof Error?t.message:"Failed";c(e.length>80?e.slice(0,80)+"...":e,"error")}finally{p(!1)}}},[o,b,h,g,n,l,c,i]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"font-mono text-[0.7rem] text-gray-500 leading-relaxed",children:["Burn LP shares to reclaim your proportional tokens — including any"," ",(0,r.jsx)("span",{className:"text-emerald-400",children:"accumulated fees"}),"."]}),(0,r.jsx)(L,{label:"LP Shares to Burn",badge:"LP SHARES",badgeColor:"accent",balance:a.lpShares,onMax:()=>m(a.lpShares.toString()),value:d,onChange:e=>m(e.target.value),placeholder:"0.0"}),b>0&&t.totalLPShares>0&&(0,r.jsxs)("div",{className:"bg-surface border border-red-500/20 p-4 space-y-2 animate-fade-in",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[2px] text-red-400 uppercase mb-2",children:"You Will Receive"}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:[n," Return"]}),(0,r.jsx)("span",{className:"text-[#00d9ff] font-bold",children:u(h,6)})]}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:[l," Return"]}),(0,r.jsx)("span",{className:"text-violet-400 font-bold",children:u(g,6)})]}),(0,r.jsx)("div",{className:"h-px bg-border"}),(0,r.jsxs)("div",{className:"flex justify-between font-mono text-[0.72rem]",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Share Burned"}),(0,r.jsxs)("span",{className:"text-red-400",children:[t.totalLPShares>0?(b/t.totalLPShares*100).toFixed(2):0,"%"]})]})]}),(0,r.jsx)(S,{variant:"danger",size:"lg",loading:f,disabled:!b||!o||0===a.lpShares,onClick:v,children:"[ Remove Liquidity ]"})]})}var W=a(5880);let $={SWAP:{label:"SWAP",color:"text-[#00d9ff]"},ADD_LIQ:{label:"ADD LIQ",color:"text-emerald-400"},REMOVE_LIQ:{label:"REMOVE",color:"text-red-400"}};function q(e){let{records:t}=e;return(0,r.jsxs)("div",{className:"mt-6 pt-5 border-t border-border",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("div",{className:"font-mono text-[0.6rem] tracking-[3px] text-gray-600 uppercase",children:"TX History"}),t.length>0&&(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("defi_tx_history"),window.location.reload()},className:"font-mono text-[0.55rem] text-gray-700 hover:text-red-400 transition-colors uppercase tracking-widest",children:"[ Clear ]"})]}),0===t.length?(0,r.jsx)("div",{className:"font-mono text-[0.68rem] text-gray-600 text-center py-5",children:"No transactions yet"}):(0,r.jsx)("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 scrollbar-thin",children:t.map(e=>{let t=$[e.type];return(0,r.jsxs)("div",{className:"group flex justify-between items-start py-2.5 border-b border-border/40 animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("span",{className:(0,A.$)("font-mono text-[0.62rem] font-bold tracking-wider",t.color),children:t.label}),(0,r.jsx)("div",{className:"font-mono text-[0.55rem] text-gray-600",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsxs)("div",{className:"text-right flex flex-col items-end gap-1",children:[(0,r.jsx)("div",{className:"font-mono text-[0.7rem] text-gray-300 leading-tight",children:e.description}),e.hash&&(0,r.jsxs)("a",{href:"https://sepolia.etherscan.io/tx/".concat(e.hash),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 font-mono text-[0.55rem] text-[#00d9ff]/60 hover:text-[#00d9ff] transition-colors",children:["View on Explorer ",(0,r.jsx)(W.A,{size:10})]})]})]},e.id)})})]})}let Q=["SWAP","ADD LIQ.","REMOVE"];function J(e){let[t,a]=(0,s.useState)("SWAP"),[n,l]=(0,s.useState)([]),[o,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("defi_tx_history");if(e)try{let t=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));l(t)}catch(e){}},[]);let c=(t,a,r)=>{let s={id:Date.now(),type:t,description:a,timestamp:new Date,hash:r};l(e=>{let t=[s,...e].slice(0,20);return localStorage.setItem("defi_tx_history",JSON.stringify(t)),t}),e.onSuccess()};return(0,r.jsxs)(P,{className:"p-6 relative",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)(C,{className:"mb-0",children:"⟷ Trade"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>i(!o),className:"flex items-center gap-2 px-3 py-1.5 font-mono text-[0.68rem] bg-slate-900 border border-border hover:border-[#00d9ff] transition-all",children:[(0,r.jsxs)("span",{className:"text-[#00d9ff] font-bold",children:[e.symbolA,"/",e.symbolB]}),(0,r.jsx)(R.A,{size:14,className:(0,A.$)("transition-transform",o&&"rotate-180")})]}),o&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-surface border border-border shadow-glow-sm z-50 py-1",children:0===e.savedPairs.length?(0,r.jsx)("div",{className:"px-3 py-2 text-[0.65rem] text-gray-500 font-mono",children:"No saved pairs"}):e.savedPairs.map((t,a)=>(0,r.jsxs)("button",{onClick:()=>{e.onSelectPair(a),i(!1)},className:(0,A.$)("w-full text-left px-3 py-2 font-mono text-[0.68rem] hover:bg-[#00d9ff]/10 hover:text-white transition-colors",e.activePairIndex===a?"text-[#00d9ff]":"text-gray-400"),children:[t.symbolA," / ",t.symbolB]},t.swap))})]})]}),(0,r.jsx)("div",{className:"flex border-b border-border mb-6",children:Q.map(e=>(0,r.jsx)("button",{onClick:()=>a(e),className:(0,A.$)("px-4 pb-3 font-mono text-[0.68rem] tracking-widest border-b-2 -mb-px transition-all duration-200",t===e?"border-[#00d9ff] text-[#00d9ff]":"border-transparent text-gray-500 hover:text-gray-300"),children:e},e))}),(0,r.jsxs)("div",{className:"min-h-[360px]",children:["SWAP"===t&&(0,r.jsx)(T,{...e,onSuccess:(e,t)=>c("SWAP",e,t)}),"ADD LIQ."===t&&(0,r.jsx)(V,{...e,onSuccess:(e,t)=>c("ADD_LIQ",e,t)}),"REMOVE"===t&&(0,r.jsx)(z,{...e,onSuccess:(e,t)=>c("REMOVE_LIQ",e,t)})]}),(0,r.jsx)(q,{records:n})]})}var K=a(5229);function Y(e){let{notifications:t,onDismiss:a}=e;return(0,r.jsx)("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-2 max-w-sm w-full",children:t.map(e=>(0,r.jsxs)("div",{className:(0,A.$)("flex items-start gap-3 p-4 border-l-4 bg-card border-t border-r border-b border-border","animate-slide-up font-mono text-[0.75rem]",{"border-l-emerald-500":"success"===e.type,"border-l-red-500":"error"===e.type,"border-l-amber-400":"warn"===e.type,"border-l-[#00d9ff]":"info"===e.type}),children:[(0,r.jsx)("span",{className:(0,A.$)("flex-1 leading-relaxed",{"text-emerald-400":"success"===e.type,"text-red-400":"error"===e.type,"text-amber-400":"warn"===e.type,"text-[#00d9ff]":"info"===e.type}),children:e.message}),(0,r.jsx)("button",{onClick:()=>a(e.id),className:"text-gray-600 hover:text-gray-300 transition-colors mt-0.5 shrink-0",children:(0,r.jsx)(K.A,{size:14})})]},e.id))})}function X(){let{wallet:e,connecting:t,connect:a,disconnect:i,shortAddress:d}=function(){let[e,t]=(0,s.useState)({provider:null,signer:null,address:"",network:"",chainId:0,blockNumber:0,connected:!1}),[a,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)(""),i=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var a;if(!window.ethereum)return e||o("MetaMask not installed. Please install MetaMask extension."),!1;e||r(!0),o("");let s=new n.k(window.ethereum);if(e){let e=await s.listAccounts();if(0===e.length)return!1}else await s.send("eth_requestAccounts",[]);let l=await s.getSigner(),i=await l.getAddress(),d=await s.getNetwork(),m=await s.getBlockNumber();return t({provider:s,signer:l,address:i,network:null!=(a=c[Number(d.chainId)])?a:"Chain ".concat(d.chainId),chainId:Number(d.chainId),blockNumber:m,connected:!0}),localStorage.setItem("defi_wallet_connected","true"),!0}catch(t){if(!e){let e="Connection failed";t instanceof Error&&(e=t.message.includes("user rejected")?"Connection rejected by user":t.message.includes("already pending")?"Connection request already pending":t.message),o(e)}return!1}finally{r(!1)}},[]),d=(0,s.useCallback)(()=>{t({provider:null,signer:null,address:"",network:"",chainId:0,blockNumber:0,connected:!1}),localStorage.removeItem("defi_wallet_connected")},[]);return(0,s.useEffect)(()=>{if("true"===localStorage.getItem("defi_wallet_connected")){let e=setTimeout(()=>{i(!0)},100);return()=>clearTimeout(e)}},[]),(0,s.useEffect)(()=>{if(!e.provider||!e.connected)return;let a=e.provider,r=e=>{t(t=>({...t,blockNumber:e}))};return a.on("block",r),()=>{a.off("block",r)}},[e.provider,e.connected]),(0,s.useEffect)(()=>{let e=window.ethereum;if(!e)return;let t=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];0===t[0].length?d():i(!0)},a=()=>{window.location.reload()};return e.on("accountsChanged",t),e.on("chainChanged",a),()=>{e.removeListener("accountsChanged",t),e.removeListener("chainChanged",a)}},[d,i]),{wallet:e,connecting:a,error:l,connect:i,disconnect:d,shortAddress:p(e.address)}}(),{contracts:m,pool:x,userInfo:u,loadContracts:b,refreshPool:h}=function(e){let[t,a]=(0,s.useState)({tokenA:null,tokenB:null,swap:null,symbolA:"TKA",symbolB:"TKB",loaded:!1}),[r,n]=(0,s.useState)({reserveA:0,reserveB:0,totalLPShares:0,price:0,kValue:0}),[i,c]=(0,s.useState)({address:"",balanceA:0,balanceB:0,lpShares:0,lpSharePct:0,lpTokenAValue:0,lpTokenBValue:0}),[d,m]=(0,s.useState)(!1);return{contracts:t,pool:r,userInfo:i,loading:d,loadContracts:(0,s.useCallback)(async t=>{if(!e)throw Error("Wallet not connected");m(!0);try{if(!j.PW(t.tokenA))throw Error("Invalid Token A address");if(!j.PW(t.tokenB))throw Error("Invalid Token B address");if(!j.PW(t.swap))throw Error("Invalid Swap contract address");let r=new y.NZ(t.tokenA,l,e),s=new y.NZ(t.tokenB,l,e),n=new y.NZ(t.swap,o,e),[i,c]=await Promise.all([r.symbol().catch(()=>"UNKNOWN"),s.symbol().catch(()=>"UNKNOWN")]);return a({tokenA:r,tokenB:s,swap:n,symbolA:i,symbolB:c,loaded:!0}),{tokenA:r,tokenB:s,swap:n}}catch(e){throw Error(e instanceof Error?e.message:"Failed to load contracts")}finally{m(!1)}},[e]),refreshPool:(0,s.useCallback)(async(e,t,a,r)=>{try{let[[s,l],o,i]=await Promise.all([a.getReserves(),a.totalLPShares(),a.getPrice()]),d=f(s),m=f(l),x=f(o);if(n({reserveA:d,reserveB:m,totalLPShares:x,price:d>0?m/d:0,kValue:d*m}),r){let[s,n,l]=await Promise.all([e.balanceOf(r),t.balanceOf(r),a.getLPInfo(r)]);c({address:r,balanceA:f(s),balanceB:f(n),lpShares:f(l[0]),lpSharePct:Number(l[1])/100,lpTokenAValue:f(l[2]),lpTokenBValue:f(l[3])})}}catch(e){throw console.error("Failed to refresh pool:",e),Error("Failed to fetch pool data")}},[])}}(e.signer),{notifications:g,notify:v,dismiss:w}=function(){let[e,t]=(0,s.useState)([]);return{notifications:e,notify:(0,s.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,s=++N;t(t=>[...t,{id:s,message:e,type:a}]),setTimeout(()=>{t(e=>e.filter(e=>e.id!==s))},r)},[]),dismiss:(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[])}}(),[k,A]=(0,s.useState)([]),[S,P]=(0,s.useState)(null),C=(0,s.useRef)(m);C.current=m,(0,s.useEffect)(()=>{let e=localStorage.getItem("defi_simpleswap_pairs");if(e)try{let t=JSON.parse(e);A(t)}catch(e){console.error("Failed to parse saved pairs",e)}},[]);let L=(0,s.useCallback)(async t=>{let{tokenA:a,tokenB:r,swap:s}=await b(t),n=await a.symbol(),l=await r.symbol();await h(a,r,s,e.address),A(e=>{let a,r=e.findIndex(e=>e.swap.toLowerCase()===t.swap.toLowerCase());return r>=0?((a=[...e])[r]={...t,symbolA:n,symbolB:l},P(r)):P((a=[...e,{...t,symbolA:n,symbolB:l}]).length-1),localStorage.setItem("defi_simpleswap_pairs",JSON.stringify(a)),a})},[b,h,e.address]);(0,s.useEffect)(()=>{if(e.connected&&!m.loaded){let e=localStorage.getItem("defi_last_addrs");if(e)try{L(JSON.parse(e))}catch(e){}}},[e.connected,m.loaded,L]);let E=(0,s.useCallback)(async e=>{let t=k[e];t&&(P(e),await L({tokenA:t.tokenA,tokenB:t.tokenB,swap:t.swap}))},[k,L]),D=(0,s.useCallback)(async()=>{let{tokenA:t,tokenB:a,swap:r}=C.current;t&&a&&r&&await h(t,a,r,e.address)},[h,e.address]);return(0,r.jsxs)("div",{className:"relative min-h-screen",children:[(0,r.jsx)("div",{className:"fixed top-0 right-0 w-[500px] h-[500px] rounded-full pointer-events-none z-0",style:{background:"radial-gradient(circle, rgba(0,217,255,0.06) 0%, transparent 70%)",filter:"blur(60px)"}}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 w-[400px] h-[400px] rounded-full pointer-events-none z-0",style:{background:"radial-gradient(circle, rgba(139,92,246,0.07) 0%, transparent 70%)",filter:"blur(60px)"}}),(0,r.jsx)(B,{connected:e.connected,address:e.address,network:e.network,blockNumber:e.blockNumber,connecting:t,onConnect:a,onDisconnect:i}),(0,r.jsx)(Y,{notifications:g,onDismiss:w}),(0,r.jsxs)("main",{className:"relative z-10 max-w-[1120px] mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8 animate-slide-up",children:[(0,r.jsxs)("h1",{className:"font-display font-extrabold text-3xl md:text-4xl tracking-tight",children:[(0,r.jsx)("span",{className:"text-[#00d9ff]",children:"Decentralized"})," ",(0,r.jsx)("span",{className:"text-white",children:"Exchange"})]}),(0,r.jsx)("p",{className:"font-mono text-[0.72rem] text-gray-500 mt-2 tracking-wide",children:"AMM-powered token swaps \xb7 Constant product formula \xb7 0.3% LP fees"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_380px] gap-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.05s"},children:(0,r.jsx)(I,{pool:x,symbolA:m.symbolA,symbolB:m.symbolB})}),(0,r.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:(0,r.jsx)(J,{pool:x,user:u,symbolA:m.symbolA,symbolB:m.symbolB,tokenAContract:m.tokenA,tokenBContract:m.tokenB,swapContract:m.swap,onSuccess:D,onNotify:v,savedPairs:k,activePairIndex:S,onSelectPair:E})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.15s"},children:(0,r.jsx)(F,{network:e.network,blockNumber:e.blockNumber,connected:e.connected,onLoad:L,savedPairs:k,activePairIndex:S,onSelectPair:E})}),(0,r.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:(0,r.jsx)(_,{})}),(0,r.jsx)("div",{className:"animate-slide-up",style:{animationDelay:"0.25s"},children:(0,r.jsx)(M,{})})]})]}),(0,r.jsx)("div",{className:"mt-12 pt-6 border-t border-border text-center font-mono text-[0.62rem] text-gray-700 tracking-widest",children:"SIMPLESWAP DEX \xb7 DEFI LEARNING LAB \xb7 x\xb7y=k AMM"})]})]})}}},e=>{e.O(0,[771,441,255,358],()=>e(e.s=2689)),_N_E=e.O()}]);